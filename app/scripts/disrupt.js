(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
const html2canvas = require('../vendor/html2canvas.min.js')

/**
 * MOUSE class, for basic mouse tracking
 */

class Mouse {
  constructor () {
    this.x = window.innerWidth / 2
    this.y = window.innerHeight / 2

    window.addEventListener('mousemove', e => {
      this.x = e.clientX
      this.y = e.clientY
    })
  }

  get pos () {
    return {
      x: this.x,
      y: this.y
    }
  }
}

const MOUSE = new Mouse()

/**
 * Trigonometry class
 */

class Trig {
  static distanceBetween (p1, p2) {
    return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2))
  }

  static angleBetween (p1, p2) {
    return Math.atan2(p2.y - p1.y, p2.x - p1.x)
  }

  static lengthdirX (len, dir) {
    return len * Math.cos(dir)
  }

  static lengthdirY (len, dir) {
    return len * Math.sin(dir)
  }
}

/**
 * DISRUPT class, for handling disruptions
 */

class DISRUPT {
  constructor () {
    this.DOMURL = window.URL || window.webkitURL || window

    this.targetClass = 'disrupt'
    this.disruptables = {}

    this.disruptionCounter = 0

    this.GENERATORS = {
      randomRect: canvas => {
        let x = canvas.width * Math.random()
        let y = canvas.height * Math.random()
        let w = (canvas.width - x) * Math.random()
        let h = (canvas.height - y) * Math.random()

        return {
          sx: x,
          sy: y,
          w: w,
          h: h,
          dx: x,
          dy: y
        }
      }
    }

    // Disruption animations
    this.DISRUPTIONS = {
      /**
       * Horizontal bars that shake left-to-right
       */
      'dsrpt-horizontal': {
        setup: canvas => {
          let numLines = 7
          let lineHeight = canvas.height / numLines
          let lines = []
          for (let i = 0; i < numLines; i++) {
            lines.push({
              sx: 0,
              sy: lineHeight * i,
              w: canvas.width,
              h: lineHeight,
              dx: 0,
              dy: lineHeight * i,
              nextMovement: 0,
              offset: 0
            })
          }

          return {
            runtime: 2000,
            lines: lines
          }
        },
        animate: (canvas, domImage, setupData, progress) => {
          let ctx = canvas.getContext('2d')
          let lines = setupData.lines
          ctx.clearRect(0, 0, canvas.width, canvas.height)

          // Animate lines
          for (let i = 0; i < lines.length; i++) {
            let line = lines[i]

            // Should this line move this frame?
            if (progress > line.nextMovement) {
              // Offset should be 0 if animation is finished
              if (progress >= 1) {
                line.offset = 0
              } else {
                let offset = Math.random() * line.h * 2 - line.h
                let dampener = Math.max(0, 1 - progress)
                line.offset = offset * dampener
              }

              // Set time for next movement
              line.nextMovement += Math.random() * 0.3
              line.nextMovement = Math.min(1, line.nextMovement)
            }

            // Draw the line
            ctx.drawImage(domImage, line.sx, line.sy, line.w, line.h, line.dx + line.offset, line.dy, line.w, line.h)
          }
        }
      },

      /**
       * A distorted checkerboard effect that slowly dissolves in
       */
      'dsrpt-dissolve': {
        setup: canvas => {
          let rows = 30
          let columns = 8

          let w = canvas.width / rows
          let h = canvas.height / columns

          let grid = []
          for (let r = 0; r < rows; r++) {
            for (let c = 0; c < columns; c++) {
              grid.push({
                x: r * w,
                y: c * h,
                w: w,
                h: h,
                xOff: w * (Math.random() * 2 - 1),
                yOff: h * (Math.random() * 2 - 1),
                showAt: Math.random(),
                correctAt: Math.random()
              })
            }
          }

          return {
            runtime: 1500,
            grid: grid
          }
        },
        animate: (canvas, domImage, setupData, progress) => {
          let ctx = canvas.getContext('2d')
          let grid = setupData.grid
          ctx.clearRect(0, 0, canvas.width, canvas.height)

          /* ANIMATION CODE */
          for (let i = 0; i < grid.length; i++) {
            let square = grid[i]
            let x = square.x
            let y = square.y
            if (progress > square.showAt) {
              if (progress < square.correctAt) {
                x += square.xOff
                y += square.yOff
              }
              ctx.drawImage(domImage, square.x, square.y, square.w, square.h, x, y, square.w, square.h)
            }
          }
        }
      },

      /**
       * Blocks of the source image render "incorrectly" then snap into place
       */
      'dsrpt-blocks': {
        setup: (canvas, domImage, generators) => {
          let numblocks = 15
          let blocks = []
          for (let i = 0; i < numblocks; i++) {
            let block = generators.randomRect(canvas)

            let maxOffset = 20

            let xOff = Math.random() * maxOffset * 2 - maxOffset
            let yOff = Math.random() * maxOffset * 2 - maxOffset
            block.dx += xOff
            block.dy += yOff
            block.showAt = Math.random() * 0.1
            block.repositionAt = Math.random() * 0.9 + 0.1

            blocks.push(block)
          }

          return {
            runtime: 2500,
            blocks: blocks
          }
        },
        animate: (canvas, domImage, setupData, progress) => {
          let ctx = canvas.getContext('2d')
          let blocks = setupData.blocks

          // Clear canvas
          ctx.clearRect(0, 0, canvas.width, canvas.height)

          // Draw base image and erase sections
          ctx.drawImage(domImage, 0, 0)

          // Clear areas behind blocks
          for (let i = 0; i < blocks.length; i++) {
            let block = blocks[i]
            if (block.repositionAt > progress) {
              ctx.clearRect(block.sx, block.sy, block.w, block.h)
            }
          }

          // Draw blocks
          for (let i = 0; i < blocks.length; i++) {
            let block = blocks[i]
            if (block.repositionAt > progress) {
              ctx.drawImage(domImage, block.sx, block.sy, block.w, block.h, block.dx, block.dy, block.w, block.h)
            }
          }
        }
      },

      /**
       * The source images fades in and scales down, with some sections
       * glitching & freezing along the way
       */
      'dsrpt-scale-down': {
        setup: (canvas, domImage, generators) => {
          let numBlocks = 15
          let blocks = []
          for (let i = 0; i < numBlocks; i++) {
            let block = generators.randomRect(canvas)
            block.animTime = Math.min(0.4 + Math.random() * 0.7, 1)
            block.stopAt = Math.random() * block.animTime
            block.stopLength = Math.random() * Math.min(0.4, block.animTime)
            block.stopScale = 0
            blocks.push(block)
          }

          return new function () {
            // Props
            this.runtime = 1500
            this.blocks = blocks
            this.scale = {
              min: 1,
              max: 1.5
            }

            this.baseX = scale => -canvas.width * (scale - 1) / 2,
            this.baseY = scale => -canvas.height * (scale - 1) / 2,
            this.getScale = progress => this.scale.max - this.parabola(progress) * (this.scale.max - this.scale.min),
            this.scaleProgress = (progress, max) => Math.min(progress / max, 1),
            this.parabola = x => -Math.pow(x - 1, 2) + 1
          }
        },
        animate: (canvas, domImage, setupData, progress) => {
          let ctx = canvas.getContext('2d')
          let blocks = setupData.blocks

          // Clear canvas
          ctx.clearRect(0, 0, canvas.width, canvas.height)

          // Animate base image
          let baseProgress = setupData.scaleProgress(progress, 0.3)
          let baseScale = setupData.getScale(baseProgress)

          ctx.globalAlpha = baseProgress
          ctx.drawImage(
            domImage, 0, 0, canvas.width, canvas.height,
            setupData.baseX(baseScale), setupData.baseY(baseScale), canvas.width * baseScale, canvas.height * baseScale
          )

          for (let i = 0; i < blocks.length; i++) {
            let block = blocks[i]

            // Remove section from base image
            ctx.globalAlpha = 1
            ctx.clearRect(setupData.baseX(baseScale) + block.sx * baseScale, setupData.baseY(baseScale) + block.sy * baseScale, block.w * baseScale, block.h * baseScale)

            let myProg = setupData.scaleProgress(progress, block.animTime)
            let scale = setupData.getScale(myProg)
            let finalScale = scale

            if (block.stopAt < progress && progress <= block.stopAt + block.stopLength) {
              if (block.stopScale === 0) {
                block.stopScale = scale
              }
              finalScale = block.stopScale
            }

            ctx.globalAlpha = myProg
            ctx.drawImage(
              domImage, block.sx, block.sy, block.w, block.h,
              setupData.baseX(finalScale) + block.sx * finalScale, setupData.baseY(finalScale) + block.sy * finalScale, block.w * finalScale, block.h * finalScale
            )
          }
        }
      },

      /**
       * Okay let's give RGB shifting a go again
       */
      'dsrpt-rgb-shift': {
        setup: (canvas, domImage) => {
          let ctx = canvas.getContext('2d')

          // Set up colour-shifted images
          let colourNames = [ 'red', 'green', 'blue' ]
          let colours = []


          for (let i = 0; i < colourNames.length; i++) {
            ctx.clearRect(0, 0, canvas.width, canvas.height)

            // Draw basic image
            ctx.globalCompositeOperation = 'source-over'
            ctx.drawImage(domImage, 0, 0)

            // Recolour it
            ctx.globalCompositeOperation = 'source-in'
            ctx.fillStyle = colourNames[i]
            ctx.rect(0, 0, canvas.width, canvas.height)
            ctx.fill()

            let img = new Image()
            img.crossOrigin = 'anonymous'
            img.src = canvas.toDataURL('image/png')

            colours.push({
              image: img,
              x: 0,
              dx: 0,
              changeFreq: 0.1,
              changeAt: 0
            })
          }

          // Reset comp mode
          ctx.globalCompositeOperation = 'source-over'

          return new function () {
            this.runtime = 2500
            this.colours = colours
            this.amplitude = 5

            this.glitchAt = 0
            this.glitchTime = 0.05

            this.maxGlitchDelay = 0.8
            this.glitchAmplitudeModifier = 10

            this.isGlitching = progress => (progress > this.glitchAt && progress <= this.glitchAt + this.glitchTime)
            this.setGlitchAt = progress => {
              this.glitchAt = progress + Math.random() * this.maxGlitchDelay
            }
            this.setGlitchAt(0)

            // Glitch bars
            let numBars = 3
            this.glitchBars = []
            for (let i = 0; i < numBars; i++) {
              this.glitchBars.push(new function () {
                this.w = 0
                this.h = 1
                this.x = 0
                this.y = 0
                this.dx = 0
                this.maxOffset = 20
                this.maxMoveTime = 0.03
                this.moveAt = 0

                this.update = progress => {
                  if (progress > this.moveAt) {
                    this.updateSize()
                    this.updatePos()
                    this.moveAt = progress + this.maxMoveTime * Math.random()
                  }
                }

                this.updateSize = () => {
                  this.w = Math.random() * canvas.width
                  let xLeft = canvas.width - this.w
                  this.x = Math.random() * xLeft
                }

                this.updatePos = () => {
                  this.y = Math.floor(Math.random() * (canvas.height - this.h))
                  this.dx = this.maxOffset * (Math.random() * 2 - 1)
                }
              })
            }
          }
        },
        animate: (canvas, domImage, setupData, progress) => {
          let ctx = canvas.getContext('2d')
          ctx.clearRect(0, 0, canvas.width, canvas.height)

          /* ANIMATION CODE */

          // Draw colours
          ctx.globalAlpha = 1/3

          for (let colour of setupData.colours) {
            // Update dx every now and then
            if (progress > colour.changeAt) {
              colour.changeAt = progress + Math.random() * colour.changeFreq
              colour.x = setupData.amplitude * (Math.random() * 2 - 1)
              colour.dx = colour.x * (setupData.isGlitching(progress) ? setupData.glitchAmplitudeModifier : 1)
            }

            ctx.drawImage(colour.image, colour.dx, 0)
          }

          if (!setupData.isGlitching(progress)) {
            ctx.globalAlpha = 2/3
            ctx.drawImage(domImage, 0, 0)
          }

          // When glitch has finished, schedule another
          if (progress > setupData.glitchAt + setupData.glitchTime) {
            setupData.setGlitchAt(progress)
          }

          // Glitch bars
          for (let bar of setupData.glitchBars) {
            // Update bar
            bar.update(progress)

            ctx.globalAlpha = 1
            ctx.clearRect(bar.x, bar.y, bar.w, bar.h)

            // Re-draw source image but offset
            ctx.globalAlpha = 1/3
            for (let colour of setupData.colours) {
              ctx.drawImage(colour.image, bar.x, bar.y, bar.w, bar.h, bar.x + bar.dx + colour.dx, bar.y, bar.w, bar.h)
            }

            if (!setupData.isGlitching(progress)) {
              ctx.globalAlpha = 2/3
              ctx.drawImage(domImage, bar.x, bar.y, bar.w, bar.h, bar.x + bar.dx, bar.y, bar.w, bar.h)
            }
          }
        }
      },

      /**
       * RGB split with a slight parallax effect that follows the mouse
       */
      'dsrpt-rgb-follow': {
        setup: (canvas, domImage) => {
          let ctx = canvas.getContext('2d')

          // Set up colour-shifted images
          let colourNames = [ '#00f', '#f00', '#0f0' ]
          let colours = []


          for (let i = 0; i < colourNames.length; i++) {
            ctx.clearRect(0, 0, canvas.width, canvas.height)

            // Draw coloured background
            ctx.globalCompositeOperation = 'source-over'
            ctx.fillStyle = colourNames[i]
            ctx.fillRect(0, 0, canvas.width, canvas.height)

            // Mask to source image
            ctx.globalCompositeOperation = 'destination-atop'
            ctx.drawImage(domImage, 0, 0)

            // Multiply with source image to create alpha channel
            ctx.globalCompositeOperation = 'multiply'
            ctx.drawImage(domImage, 0, 0)

            let img = new Image()
            img.crossOrigin = 'anonymous'
            img.src = canvas.toDataURL('image/png')

            colours.push(img)
          }

          // Reset comp mode
          ctx.globalCompositeOperation = 'source-over'

          // Get canvas bounds
          let canvBounds = canvas.getBoundingClientRect()
          let maxOffset = 15

          let GLITCHBOX = function () {
            this.fps = 60

            this.secToFrames = sec => {
              return Math.floor(sec * this.fps)
            }

            this.setup = () => {
              // Box size
              this.pos.w = this.pos.wMin + Math.random() * (this.pos.wMax - this.pos.wMin)
              this.pos.h = this.pos.hMin + Math.random() * (this.pos.hMax - this.pos.hMin)
              // Box position
              let dir = (Math.random() > 0.5)
              this.pos.x = (dir ? 0 : canvas.width - this.pos.w)
              this.pos.y = Math.random() * (canvas.height - this.pos.h)
              this.pos.offset = maxOffset * 2 * (dir ? 1 : -1)
              this.timer = this.secToFrames(Math.random() * this.hideTimeMax)
            }

            this.visible = false
            this.hideTimeMax = 1
            this.showTimeMax = 0.5
            this.timer = this.hideTimeMax

            this.pos = {
              x: 0,
              y: 0,
              w: 0,
              wMin: canvas.width * 0.5,
              wMax: canvas.width,
              h: 0,
              hMin: canvas.height * 0.05,
              hMax: canvas.height * 0.2,
              offset: 0
            }

            this.setup()

            this.update = () => {
              if (--this.timer <= 0) {
                if (this.visible) {
                  // Hide and move
                  this.visible = false
                  this.setup()
                } else {
                  // Show
                  this.visible = true
                  this.timer = this.secToFrames(Math.random() * this.showTimeMax)
                }
              }
            }
          }

          return {
            runtime: -1,
            colours: colours,
            mouseEffect: {
              x: canvBounds.left + canvas.width / 2,
              y: canvBounds.top + canvas.height / 2,
              len: 0,
              maxLen: maxOffset,
              dir: 0,
              spd: 0.1
            },
            glitchBox: new GLITCHBOX()
          }
        },
        animate: (canvas, domImage, setupData, progress) => {
          let ctx = canvas.getContext('2d')
          ctx.clearRect(0, 0, canvas.width, canvas.height)

          /* ANIMATION CODE */

          let canvasPos = {
            x: setupData.mouseEffect.x,
            y: setupData.mouseEffect.y
          }

          let spd = setupData.mouseEffect.spd

          /* EFFECT DIRECTION */

          let dir = setupData.mouseEffect.dir
          let dirTarget = Trig.angleBetween(canvasPos, MOUSE.pos)

          // Difference between angles
          let dirDiff = dirTarget - dir
          dirDiff = Math.atan2(Math.sin(dirDiff), Math.cos(dirDiff))

          // Move towards target angle
          dir += dirDiff * spd
          let wrap = Math.PI * 2
          while (dir > wrap) { dir -= wrap }
          while (dir < 0) { dir += wrap }

          /* EFFECT MAGNITUDE */

          // Mouse pos as percentage
          let mouseMax = Trig.distanceBetween(canvasPos, { x: 0, y: 0})
          let mouseCurrent = Trig.distanceBetween(canvasPos, MOUSE.pos)

          // Move length towards target
          let len = setupData.mouseEffect.len
          let targetLen = (mouseCurrent / mouseMax) * setupData.mouseEffect.maxLen
          let lenDiff = targetLen - len
          len += lenDiff * spd

          // Store current dir for next animation loop
          setupData.mouseEffect.dir = dir
          setupData.mouseEffect.len = len

          // Draw three RGB shifted imagesa

          // Scale is (maxLen * 2)px smaller than canvas size
          let smallestAxis = Math.min(canvas.width, canvas.height)
          let targetSize = smallestAxis - setupData.mouseEffect.maxLen * 2
          let scale = targetSize / smallestAxis

          // Draw the images offset correctly
          let scaleW = canvas.width * scale
          let scaleH = canvas.height * scale
          let xOrigin = (canvas.width - scaleW) / 2
          let yOrigin = (canvas.height - scaleH) / 2
          let dx = Trig.lengthdirX(len, dir)
          let dy = Trig.lengthdirY(len, dir)

          ctx.globalCompositeOperation = 'lighten'

          // GlitchBox
          setupData.glitchBox.update()
          let bounds = setupData.glitchBox.pos

          let n = setupData.colours.length
          for (let i = 0; i < n; i++) {
            let offset = i - 1
            let imgX = xOrigin + dx * offset
            let imgY = yOrigin + dy * offset
            ctx.drawImage(setupData.colours[i], 0, 0, canvas.width, canvas.height, imgX, imgY, scaleW, scaleH)

            // Clear area for glitched portion
            if (setupData.glitchBox.visible) {
              ctx.clearRect(bounds.x, yOrigin + bounds.y * scale, bounds.w, bounds.h * scale)
            }
          }

          // Draw image with an offset to appear "glitched"
          if (setupData.glitchBox.visible) {
            for (let i = 0; i < n; i++) {
              let offset = i - 1
              ctx.drawImage(
                setupData.colours[i],
                bounds.x, bounds.y, bounds.w, bounds.h,
                xOrigin + (bounds.x + bounds.offset) * scale, yOrigin + bounds.y * scale, bounds.w * scale, bounds.h * scale
              )
            }
          }

          ctx.globalCompositeOperation = 'source-over'
        }
      }
    }
  }

  get disruptionTypes () {
    return Object.keys(this.DISRUPTIONS)
  }

  getDisruption (id) {
    return this.disruptables[id]
  }

  removeDisruption (id) {
    let disruption = this.disruptables[id]

    // Stop animation
    disruption.disruptionAnim.stop()

    // Re-show source element
    disruption.elem.style.visibility = 'visible'

    // Remove disruption canvas
    disruption.canvas.parentElement.removeChild(disruption.canvas)

    // Delete disruption
    delete this.disruptables[id]
  }

  forceStopDisruptions () {
    Object.keys(this.disruptables).forEach(key => {
      let d = this.disruptables[key]
      this.removeDisruption(d.id)
    })
  }

  /* DISRUPTION FUNCTIONS */

  addDisruptions () {
    let me = this

    // Scan through DOM and find disruptable elements
    let disruptables = Array.from(document.getElementsByClassName(this.targetClass))

    let canvasLoads = disruptables.map(elem => {
      // Determine disruption type - pick first found class
      let disruptionType = 'dsrpt-horizontal'
      for (let anim of this.disruptionTypes) {
        if (elem.classList.contains(anim)) {
          disruptionType = anim
          break
        }
      }

      let disruption = {
        id: this.disruptionCounter++,
        elem: elem,
        disruptionType: disruptionType,
        loop: elem.classList.contains('loop')
      }

      // Use html2canvas to create canvas and image
      return new Promise((resolve, reject) => {
        html2canvas(elem, {
          background: undefined,
          letterRendering: true
        }).then(canvas => {
          let img = new Image()
          img.crossOrigin = 'anonymous'
          img.src = canvas.toDataURL('data/image')

          disruption.image = img
          disruption.canvas = canvas

          me.disruptables[disruption.id] = disruption

          // Position canvas
          this.positionCanvas(elem, disruption.canvas)
          elem.parentNode.insertBefore(disruption.canvas, elem)

          // Resolve after image has loaded
          img.onload = resolve
        })
      })
    })

    Promise.all(canvasLoads).then(() => {
      me.triggerDisrupt()
    })
  }

  positionCanvas (elem, canvas) {
    // Get element bounds
    let bounds = elem.getBoundingClientRect()
    let parentBounds = elem.parentElement.getBoundingClientRect()

    // Position the canvas
    let scroll = document.body.scrollTop
    canvas.style.position = 'absolute'
    canvas.style.top = `${bounds.top + scroll - parentBounds.top}px`
    canvas.style.left = `${bounds.left - parentBounds.left}px`
  }

  triggerDisrupt () {
    Object.keys(this.disruptables).forEach(key => {
      let d = this.disruptables[key]
      let disruption = this.DISRUPTIONS[d.disruptionType]

      // Run setup
      let setupData = disruption.setup(d.canvas, d.image, this.GENERATORS)
      let animFunction = disruption.animate

      // Hide original element
      d.elem.style.visibility = 'hidden'

      // Do animation
      d.disruptionAnim = new DisruptAnimation(this, d.id, setupData, animFunction, d.loop)
    })
  }
}

class DisruptAnimation {
  constructor (parent, disruptionId, setupData, animFunction, loop) {
    this.parent = parent
    this.data = parent.getDisruption(disruptionId)
    this.setupData = setupData
    this.animFunction = animFunction
    this.loop = loop

    this.running = true

    this.animStart = null
    this.currentFrame = window.requestAnimationFrame(this.doAnimation.bind(this))
  }

  get animationFrame () {
    return this.currentFrame
  }

  stop () {
    window.cancelAnimationFrame(this.currentFrame)
  }

  doAnimation (timestamp) {
    if (this.animStart === null) {
      this.animStart = timestamp
    }

    // Determine animation progress (from 0 to 1)
    let progress = (timestamp - this.animStart) / this.setupData.runtime

    // Run custom animation function
    this.animFunction(this.data.canvas, this.data.image, this.setupData, progress)

    if (progress < 1 || this.loop) {
      this.currentFrame = window.requestAnimationFrame(this.doAnimation.bind(this))
    } else {
      this.stop()

      // Delete self from parent
      this.parent.removeDisruption(this.data.id)
    }
  }
}

// Auto-create global instance and trigger disruptions
window.DISRUPT = new DISRUPT()

// TODO: add ability to wait until revealed by scroll
window.DISRUPT.addDisruptions()

},{"../vendor/html2canvas.min.js":2}],2:[function(require,module,exports){
(function (global){
/*
  html2canvas 0.5.0-beta3 <http://html2canvas.hertzen.com>
  Copyright (c) 2016 Niklas von Hertzen

  Released under  License
*/
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.html2canvas=e()}}(function(){var e;return function n(e,f,o){function d(t,l){if(!f[t]){if(!e[t]){var s="function"==typeof require&&require;if(!l&&s)return s(t,!0);if(i)return i(t,!0);var u=new Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}var a=f[t]={exports:{}};e[t][0].call(a.exports,function(n){var f=e[t][1][n];return d(f?f:n)},a,a.exports,n,e,f,o)}return f[t].exports}for(var i="function"==typeof require&&require,t=0;t<o.length;t++)d(o[t]);return d}({1:[function(n,f,o){(function(n){!function(d){function i(e){throw RangeError(I[e])}function t(e,n){for(var f=e.length;f--;)e[f]=n(e[f]);return e}function l(e,n){return t(e.split(H),n).join(".")}function s(e){for(var n,f,o=[],d=0,i=e.length;i>d;)n=e.charCodeAt(d++),n>=55296&&56319>=n&&i>d?(f=e.charCodeAt(d++),56320==(64512&f)?o.push(((1023&n)<<10)+(1023&f)+65536):(o.push(n),d--)):o.push(n);return o}function u(e){return t(e,function(e){var n="";return e>65535&&(e-=65536,n+=L(e>>>10&1023|55296),e=56320|1023&e),n+=L(e)}).join("")}function a(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:k}function p(e,n){return e+22+75*(26>e)-((0!=n)<<5)}function c(e,n,f){var o=0;for(e=f?K(e/B):e>>1,e+=K(e/n);e>J*z>>1;o+=k)e=K(e/J);return K(o+(J+1)*e/(e+A))}function y(e){var n,f,o,d,t,l,s,p,y,m,r=[],v=e.length,w=0,b=D,g=C;for(f=e.lastIndexOf(E),0>f&&(f=0),o=0;f>o;++o)e.charCodeAt(o)>=128&&i("not-basic"),r.push(e.charCodeAt(o));for(d=f>0?f+1:0;v>d;){for(t=w,l=1,s=k;d>=v&&i("invalid-input"),p=a(e.charCodeAt(d++)),(p>=k||p>K((j-w)/l))&&i("overflow"),w+=p*l,y=g>=s?q:s>=g+z?z:s-g,!(y>p);s+=k)m=k-y,l>K(j/m)&&i("overflow"),l*=m;n=r.length+1,g=c(w-t,n,0==t),K(w/n)>j-b&&i("overflow"),b+=K(w/n),w%=n,r.splice(w++,0,b)}return u(r)}function m(e){var n,f,o,d,t,l,u,a,y,m,r,v,w,b,g,h=[];for(e=s(e),v=e.length,n=D,f=0,t=C,l=0;v>l;++l)r=e[l],128>r&&h.push(L(r));for(o=d=h.length,d&&h.push(E);v>o;){for(u=j,l=0;v>l;++l)r=e[l],r>=n&&u>r&&(u=r);for(w=o+1,u-n>K((j-f)/w)&&i("overflow"),f+=(u-n)*w,n=u,l=0;v>l;++l)if(r=e[l],n>r&&++f>j&&i("overflow"),r==n){for(a=f,y=k;m=t>=y?q:y>=t+z?z:y-t,!(m>a);y+=k)g=a-m,b=k-m,h.push(L(p(m+g%b,0))),a=K(g/b);h.push(L(p(a,0))),t=c(f,w,o==d),f=0,++o}++f,++n}return h.join("")}function r(e){return l(e,function(e){return F.test(e)?y(e.slice(4).toLowerCase()):e})}function v(e){return l(e,function(e){return G.test(e)?"xn--"+m(e):e})}var w="object"==typeof o&&o,b="object"==typeof f&&f&&f.exports==w&&f,g="object"==typeof n&&n;(g.global===g||g.window===g)&&(d=g);var h,x,j=2147483647,k=36,q=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^ -~]/,H=/\x2E|\u3002|\uFF0E|\uFF61/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=k-q,K=Math.floor,L=String.fromCharCode;if(h={version:"1.2.4",ucs2:{decode:s,encode:u},decode:y,encode:m,toASCII:v,toUnicode:r},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return h});else if(w&&!w.nodeType)if(b)b.exports=h;else for(x in h)h.hasOwnProperty(x)&&(w[x]=h[x]);else d.punycode=h}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,n){function f(e,n,f){!e.defaultView||n===e.defaultView.pageXOffset&&f===e.defaultView.pageYOffset||e.defaultView.scrollTo(n,f)}function o(e,n){try{n&&(n.width=e.width,n.height=e.height,n.getContext("2d").putImageData(e.getContext("2d").getImageData(0,0,e.width,e.height),0,0))}catch(f){t("Unable to copy canvas content from",e,f)}}function d(e,n){for(var f=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),i=e.firstChild;i;)(n===!0||1!==i.nodeType||"SCRIPT"!==i.nodeName)&&f.appendChild(d(i,n)),i=i.nextSibling;return 1===e.nodeType&&(f._scrollTop=e.scrollTop,f._scrollLeft=e.scrollLeft,"CANVAS"===e.nodeName?o(e,f):("TEXTAREA"===e.nodeName||"SELECT"===e.nodeName)&&(f.value=e.value)),f}function i(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var n=e.firstChild;n;)i(n),n=n.nextSibling}}var t=e("./log");n.exports=function(e,n,o,t,l,s,u){var a=d(e.documentElement,l.javascriptEnabled),p=n.createElement("iframe");return p.className="html2canvas-container",p.style.visibility="hidden",p.style.position="fixed",p.style.left="-10000px",p.style.top="0px",p.style.border="0",p.width=o,p.height=t,p.scrolling="no",n.body.appendChild(p),new Promise(function(n){var o=p.contentWindow.document;p.contentWindow.onload=p.onload=function(){var e=setInterval(function(){o.body.childNodes.length>0&&(i(o.documentElement),clearInterval(e),"view"===l.type&&(p.contentWindow.scrollTo(s,u),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||p.contentWindow.scrollY===u&&p.contentWindow.scrollX===s||(o.documentElement.style.top=-u+"px",o.documentElement.style.left=-s+"px",o.documentElement.style.position="absolute")),n(p))},50)},o.open(),o.write("<!DOCTYPE html><html></html>"),f(e,s,u),o.replaceChild(o.adoptNode(a),o.documentElement),o.close()})}},{"./log":13}],3:[function(e,n){function f(e){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(e)||this.namedColor(e)||this.rgb(e)||this.rgba(e)||this.hex6(e)||this.hex3(e)}f.prototype.darken=function(e){var n=1-e;return new f([Math.round(this.r*n),Math.round(this.g*n),Math.round(this.b*n),this.a])},f.prototype.isTransparent=function(){return 0===this.a},f.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},f.prototype.fromArray=function(e){return Array.isArray(e)&&(this.r=Math.min(e[0],255),this.g=Math.min(e[1],255),this.b=Math.min(e[2],255),e.length>3&&(this.a=e[3])),Array.isArray(e)};var o=/^#([a-f0-9]{3})$/i;f.prototype.hex3=function(e){var n=null;return null!==(n=e.match(o))&&(this.r=parseInt(n[1][0]+n[1][0],16),this.g=parseInt(n[1][1]+n[1][1],16),this.b=parseInt(n[1][2]+n[1][2],16)),null!==n};var d=/^#([a-f0-9]{6})$/i;f.prototype.hex6=function(e){var n=null;return null!==(n=e.match(d))&&(this.r=parseInt(n[1].substring(0,2),16),this.g=parseInt(n[1].substring(2,4),16),this.b=parseInt(n[1].substring(4,6),16)),null!==n};var i=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;f.prototype.rgb=function(e){var n=null;return null!==(n=e.match(i))&&(this.r=Number(n[1]),this.g=Number(n[2]),this.b=Number(n[3])),null!==n};var t=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;f.prototype.rgba=function(e){var n=null;return null!==(n=e.match(t))&&(this.r=Number(n[1]),this.g=Number(n[2]),this.b=Number(n[3]),this.a=Number(n[4])),null!==n},f.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},f.prototype.namedColor=function(e){e=e.toLowerCase();var n=l[e];if(n)this.r=n[0],this.g=n[1],this.b=n[2];else if("transparent"===e)return this.r=this.g=this.b=this.a=0,!0;return!!n},f.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};n.exports=f},{}],4:[function(n,f){function o(e,n){var f=j++;if(n=n||{},n.logging&&(v.options.logging=!0,v.options.start=Date.now()),n.async="undefined"==typeof n.async?!0:n.async,n.allowTaint="undefined"==typeof n.allowTaint?!1:n.allowTaint,n.removeContainer="undefined"==typeof n.removeContainer?!0:n.removeContainer,n.javascriptEnabled="undefined"==typeof n.javascriptEnabled?!1:n.javascriptEnabled,n.imageTimeout="undefined"==typeof n.imageTimeout?1e4:n.imageTimeout,n.renderer="function"==typeof n.renderer?n.renderer:c,n.strict=!!n.strict,"string"==typeof e){if("string"!=typeof n.proxy)return Promise.reject("Proxy must be used when rendering url");var o=null!=n.width?n.width:window.innerWidth,t=null!=n.height?n.height:window.innerHeight;return g(a(e),n.proxy,document,o,t,n).then(function(e){return i(e.contentWindow.document.documentElement,e,n,o,t)})}var l=(void 0===e?[document.documentElement]:e.length?e:[e])[0];return l.setAttribute(x+f,f),d(l.ownerDocument,n,l.ownerDocument.defaultView.innerWidth,l.ownerDocument.defaultView.innerHeight,f).then(function(e){return"function"==typeof n.onrendered&&(v("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),n.onrendered(e)),e})}function d(e,n,f,o,d){return b(e,e,f,o,n,e.defaultView.pageXOffset,e.defaultView.pageYOffset).then(function(t){v("Document cloned");var l=x+d,s="["+l+"='"+d+"']";e.querySelector(s).removeAttribute(l);var u=t.contentWindow,a=u.document.querySelector(s),p=Promise.resolve("function"==typeof n.onclone?n.onclone(u.document):!0);return p.then(function(){return i(a,t,n,f,o)})})}function i(e,n,f,o,d){var i=n.contentWindow,a=new p(i.document),c=new y(f,a),r=h(e),w="view"===f.type?o:s(i.document),b="view"===f.type?d:u(i.document),g=new f.renderer(w,b,c,f,document),x=new m(e,g,a,c,f);return x.ready.then(function(){v("Finished rendering");var o;return o="view"===f.type?l(g.canvas,{width:g.canvas.width,height:g.canvas.height,top:0,left:0,x:0,y:0}):e===i.document.body||e===i.document.documentElement||null!=f.canvas?g.canvas:l(g.canvas,{width:null!=f.width?f.width:r.width,height:null!=f.height?f.height:r.height,top:r.top,left:r.left,x:0,y:0}),t(n,f),o})}function t(e,n){n.removeContainer&&(e.parentNode.removeChild(e),v("Cleaned up container"))}function l(e,n){var f=document.createElement("canvas"),o=Math.min(e.width-1,Math.max(0,n.left)),d=Math.min(e.width,Math.max(1,n.left+n.width)),i=Math.min(e.height-1,Math.max(0,n.top)),t=Math.min(e.height,Math.max(1,n.top+n.height));f.width=n.width,f.height=n.height;var l=d-o,s=t-i;return v("Cropping canvas at:","left:",n.left,"top:",n.top,"width:",l,"height:",s),v("Resulting crop with width",n.width,"and height",n.height,"with x",o,"and y",i),f.getContext("2d").drawImage(e,o,i,l,s,n.x,n.y,l,s),f}function s(e){return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function u(e){return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function a(e){var n=document.createElement("a");return n.href=e,n.href=n.href,n}var p=n("./support"),c=n("./renderers/canvas"),y=n("./imageloader"),m=n("./nodeparser"),r=n("./nodecontainer"),v=n("./log"),w=n("./utils"),b=n("./clone"),g=n("./proxy").loadUrlDocument,h=w.getBounds,x="data-html2canvas-node",j=0;o.CanvasRenderer=c,o.NodeContainer=r,o.log=v,o.utils=w;var k="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:o;f.exports=k,"function"==typeof e&&e.amd&&e("html2canvas",[],function(){return k})},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(e,n){function f(e){if(this.src=e,o("DummyImageContainer for",e),!this.promise||!this.image){o("Initiating DummyImageContainer"),f.prototype.image=new Image;var n=this.image;f.prototype.promise=new Promise(function(e,f){n.onload=e,n.onerror=f,n.src=d(),n.complete===!0&&e(n)})}}var o=e("./log"),d=e("./utils").smallImage;n.exports=f},{"./log":13,"./utils":26}],6:[function(e,n){function f(e,n){var f,d,i=document.createElement("div"),t=document.createElement("img"),l=document.createElement("span"),s="Hidden Text";i.style.visibility="hidden",i.style.fontFamily=e,i.style.fontSize=n,i.style.margin=0,i.style.padding=0,document.body.appendChild(i),t.src=o(),t.width=1,t.height=1,t.style.margin=0,t.style.padding=0,t.style.verticalAlign="baseline",l.style.fontFamily=e,l.style.fontSize=n,l.style.margin=0,l.style.padding=0,l.appendChild(document.createTextNode(s)),i.appendChild(l),i.appendChild(t),f=t.offsetTop-l.offsetTop+1,i.removeChild(l),i.appendChild(document.createTextNode(s)),i.style.lineHeight="normal",t.style.verticalAlign="super",d=t.offsetTop-i.offsetTop+1,document.body.removeChild(i),this.baseline=f,this.lineWidth=1,this.middle=d}var o=e("./utils").smallImage;n.exports=f},{"./utils":26}],7:[function(e,n){function f(){this.data={}}var o=e("./font");f.prototype.getMetrics=function(e,n){return void 0===this.data[e+"-"+n]&&(this.data[e+"-"+n]=new o(e,n)),this.data[e+"-"+n]},n.exports=f},{"./font":6}],8:[function(e,n){function f(n,f,o){this.image=null,this.src=n;var i=this,t=d(n);this.promise=(f?new Promise(function(e){"about:blank"===n.contentWindow.document.URL||null==n.contentWindow.document.documentElement?n.contentWindow.onload=n.onload=function(){e(n)}:e(n)}):this.proxyLoad(o.proxy,t,o)).then(function(n){var f=e("./core");return f(n.contentWindow.document.documentElement,{type:"view",width:n.width,height:n.height,proxy:o.proxy,javascriptEnabled:o.javascriptEnabled,removeContainer:o.removeContainer,allowTaint:o.allowTaint,imageTimeout:o.imageTimeout/2})}).then(function(e){return i.image=e})}var o=e("./utils"),d=o.getBounds,i=e("./proxy").loadUrlDocument;f.prototype.proxyLoad=function(e,n,f){var o=this.src;return i(o.src,e,o.ownerDocument,n.width,n.height,f)},n.exports=f},{"./core":4,"./proxy":16,"./utils":26}],9:[function(e,n){function f(e){this.src=e.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}f.TYPES={LINEAR:1,RADIAL:2},f.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,n.exports=f},{}],10:[function(e,n){function f(e,n){this.src=e,this.image=new Image;var f=this;this.tainted=null,this.promise=new Promise(function(o,d){f.image.onload=o,f.image.onerror=d,n&&(f.image.crossOrigin="anonymous"),f.image.src=e,f.image.complete===!0&&o(f.image)})}n.exports=f},{}],11:[function(e,n){function f(e,n){this.link=null,this.options=e,this.support=n,this.origin=this.getOrigin(window.location.href)}var o=e("./log"),d=e("./imagecontainer"),i=e("./dummyimagecontainer"),t=e("./proxyimagecontainer"),l=e("./framecontainer"),s=e("./svgcontainer"),u=e("./svgnodecontainer"),a=e("./lineargradientcontainer"),p=e("./webkitgradientcontainer"),c=e("./utils").bind;f.prototype.findImages=function(e){var n=[];return e.reduce(function(e,n){switch(n.node.nodeName){case"IMG":return e.concat([{args:[n.node.src],method:"url"}]);case"svg":case"IFRAME":return e.concat([{args:[n.node],method:n.node.nodeName}])}return e},[]).forEach(this.addImage(n,this.loadImage),this),n},f.prototype.findBackgroundImage=function(e,n){return n.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(e,this.loadImage),this),e},f.prototype.addImage=function(e,n){return function(f){f.args.forEach(function(d){this.imageExists(e,d)||(e.splice(0,0,n.call(this,f)),o("Added image #"+e.length,"string"==typeof d?d.substring(0,100):d))},this)}},f.prototype.hasImageBackground=function(e){return"none"!==e.method},f.prototype.loadImage=function(e){if("url"===e.method){var n=e.args[0];return!this.isSVG(n)||this.support.svg||this.options.allowTaint?n.match(/data:image\/.*;base64,/i)?new d(n.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(n)||this.options.allowTaint===!0||this.isSVG(n)?new d(n,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new d(n,!0):this.options.proxy?new t(n,this.options.proxy):new i(n):new s(n)}return"linear-gradient"===e.method?new a(e):"gradient"===e.method?new p(e):"svg"===e.method?new u(e.args[0],this.support.svg):"IFRAME"===e.method?new l(e.args[0],this.isSameOrigin(e.args[0].src),this.options):new i(e)},f.prototype.isSVG=function(e){return"svg"===e.substring(e.length-3).toLowerCase()||s.prototype.isInline(e)},f.prototype.imageExists=function(e,n){return e.some(function(e){return e.src===n})},f.prototype.isSameOrigin=function(e){return this.getOrigin(e)===this.origin},f.prototype.getOrigin=function(e){var n=this.link||(this.link=document.createElement("a"));return n.href=e,n.href=n.href,n.protocol+n.hostname+n.port},f.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout)["catch"](function(){var n=new i(e.src);return n.promise.then(function(n){e.image=n})})},f.prototype.get=function(e){var n=null;return this.images.some(function(f){return(n=f).src===e})?n:null},f.prototype.fetch=function(e){return this.images=e.reduce(c(this.findBackgroundImage,this),this.findImages(e)),this.images.forEach(function(e,n){e.promise.then(function(){o("Succesfully loaded image #"+(n+1),e)},function(f){o("Failed loading image #"+(n+1),e,f)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),o("Finished searching images"),this},f.prototype.timeout=function(e,n){var f,d=Promise.race([e.promise,new Promise(function(d,i){f=setTimeout(function(){o("Timed out loading image",e),i(e)},n)})]).then(function(e){return clearTimeout(f),e});return d["catch"](function(){clearTimeout(f)}),d},n.exports=f},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(e,n){function f(e){o.apply(this,arguments),this.type=o.TYPES.LINEAR;var n=f.REGEXP_DIRECTION.test(e.args[0])||!o.REGEXP_COLORSTOP.test(e.args[0]);n?e.args[0].split(/\s+/).reverse().forEach(function(e,n){switch(e){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var f=this.y0,o=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=o,this.y1=f;break;case"center":break;default:var d=.01*parseFloat(e,10);if(isNaN(d))break;0===n?(this.y0=d,this.y1=1-this.y0):(this.x0=d,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=e.args.slice(n?1:0).map(function(e){var n=e.match(o.REGEXP_COLORSTOP),f=+n[2],i=0===f?"%":n[3];return{color:new d(n[1]),stop:"%"===i?f/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(e,n){null===e.stop&&this.colorStops.slice(n).some(function(f,o){return null!==f.stop?(e.stop=(f.stop-this.colorStops[n-1].stop)/(o+1)+this.colorStops[n-1].stop,!0):!1},this)},this)}var o=e("./gradientcontainer"),d=e("./color");f.prototype=Object.create(o.prototype),f.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,n.exports=f},{"./color":3,"./gradientcontainer":9}],13:[function(e,n){var f=function(){f.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-f.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};f.options={logging:!1},n.exports=f},{}],14:[function(e,n){function f(e,n){this.node=e,this.parent=n,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function o(e){var n=e.options[e.selectedIndex||0];return n?n.text||"":""}function d(e){if(e&&"matrix"===e[1])return e[2].split(",").map(function(e){return parseFloat(e.trim())});if(e&&"matrix3d"===e[1]){var n=e[2].split(",").map(function(e){return parseFloat(e.trim())});return[n[0],n[1],n[4],n[5],n[12],n[13]]}}function i(e){return-1!==e.toString().indexOf("%")}function t(e){return e.replace("px","")}function l(e){return parseFloat(e)}var s=e("./color"),u=e("./utils"),a=u.getBounds,p=u.parseBackgrounds,c=u.offsetBounds;f.prototype.cloneTo=function(e){e.visible=this.visible,e.borders=this.borders,e.bounds=this.bounds,e.clip=this.clip,e.backgroundClip=this.backgroundClip,e.computedStyles=this.computedStyles,e.styles=this.styles,e.backgroundImages=this.backgroundImages,e.opacity=this.opacity},f.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},f.prototype.assignStack=function(e){this.stack=e,e.children.push(this)},f.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},f.prototype.css=function(e){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[e]||(this.styles[e]=this.computedStyles[e])},f.prototype.prefixedCss=function(e){var n=["webkit","moz","ms","o"],f=this.css(e);return void 0===f&&n.some(function(n){return f=this.css(n+e.substr(0,1).toUpperCase()+e.substr(1)),void 0!==f},this),void 0===f?null:f},f.prototype.computedStyle=function(e){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,e)},f.prototype.cssInt=function(e){var n=parseInt(this.css(e),10);return isNaN(n)?0:n},f.prototype.color=function(e){return this.colors[e]||(this.colors[e]=new s(this.css(e)))},f.prototype.cssFloat=function(e){var n=parseFloat(this.css(e));return isNaN(n)?0:n},f.prototype.fontWeight=function(){var e=this.css("fontWeight");switch(parseInt(e,10)){case 401:e="bold";break;case 400:e="normal"}return e},f.prototype.parseClip=function(){var e=this.css("clip").match(this.CLIP);return e?{top:parseInt(e[1],10),right:parseInt(e[2],10),bottom:parseInt(e[3],10),left:parseInt(e[4],10)}:null},f.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=p(this.css("backgroundImage")))},f.prototype.cssList=function(e,n){var f=(this.css(e)||"").split(",");return f=f[n||0]||f[0]||"auto",f=f.trim().split(" "),1===f.length&&(f=[f[0],i(f[0])?"auto":f[0]]),f},f.prototype.parseBackgroundSize=function(e,n,f){var o,d,t=this.cssList("backgroundSize",f);if(i(t[0]))o=e.width*parseFloat(t[0])/100;else{if(/contain|cover/.test(t[0])){var l=e.width/e.height,s=n.width/n.height;return s>l^"contain"===t[0]?{width:e.height*s,height:e.height}:{width:e.width,height:e.width/s}}o=parseInt(t[0],10)}return d="auto"===t[0]&&"auto"===t[1]?n.height:"auto"===t[1]?o/n.width*n.height:i(t[1])?e.height*parseFloat(t[1])/100:parseInt(t[1],10),"auto"===t[0]&&(o=d/n.height*n.width),{width:o,height:d}},f.prototype.parseBackgroundPosition=function(e,n,f,o){var d,t,l=this.cssList("backgroundPosition",f);return d=i(l[0])?(e.width-(o||n).width)*(parseFloat(l[0])/100):parseInt(l[0],10),t="auto"===l[1]?d/n.width*n.height:i(l[1])?(e.height-(o||n).height)*parseFloat(l[1])/100:parseInt(l[1],10),"auto"===l[0]&&(d=t/n.height*n.width),{left:d,top:t}},f.prototype.parseBackgroundRepeat=function(e){return this.cssList("backgroundRepeat",e)[0]},f.prototype.parseTextShadows=function(){var e=this.css("textShadow"),n=[];if(e&&"none"!==e)for(var f=e.match(this.TEXT_SHADOW_PROPERTY),o=0;f&&o<f.length;o++){var d=f[o].match(this.TEXT_SHADOW_VALUES);n.push({color:new s(d[0]),offsetX:d[1]?parseFloat(d[1].replace("px","")):0,offsetY:d[2]?parseFloat(d[2].replace("px","")):0,blur:d[3]?d[3].replace("px",""):0})}return n},f.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var e=this.parseBounds(),n=this.prefixedCss("transformOrigin").split(" ").map(t).map(l);n[0]+=e.left,n[1]+=e.top,this.transformData={origin:n,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},f.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var e=this.prefixedCss("transform"),n=e?d(e.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=n?n:[1,0,0,1,0,0]}return this.transformMatrix},f.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?c(this.node):a(this.node))},f.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},f.prototype.getValue=function(){var e=this.node.value||"";return"SELECT"===this.node.tagName?e=o(this.node):"password"===this.node.type&&(e=Array(e.length+1).join("•")),0===e.length?this.node.placeholder||"":e},f.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,f.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,f.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,f.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,n.exports=f},{"./color":3,"./utils":26}],15:[function(e,n){function f(e,n,f,o,d){N("Starting NodeParser"),this.renderer=n,this.options=d,this.range=null,this.support=f,this.renderQueue=[],this.stack=new U(!0,1,e.ownerDocument,null);var i=new P(e,null);if(d.background&&n.rectangle(0,0,n.width,n.height,new T(d.background)),e===e.ownerDocument.documentElement){var t=new P(i.color("backgroundColor").isTransparent()?e.ownerDocument.body:e.ownerDocument.documentElement,null);n.rectangle(0,0,n.width,n.height,t.color("backgroundColor"))}i.visibile=i.isElementVisible(),this.createPseudoHideStyles(e.ownerDocument),this.disableAnimations(e.ownerDocument),this.nodes=I([i].concat(this.getChildren(i)).filter(function(e){return e.visible=e.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new S,N("Fetched nodes, total:",this.nodes.length),N("Calculate overflow clips"),this.calculateOverflowClips(),N("Start fetching images"),this.images=o.fetch(this.nodes.filter(A)),this.ready=this.images.ready.then(W(function(){return N("Images loaded, starting parsing"),N("Creating stacking contexts"),this.createStackingContexts(),N("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),N("Render queue created with "+this.renderQueue.length+" items"),new Promise(W(function(e){d.async?"function"==typeof d.async?d.async.call(this,this.renderQueue,e):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,e)):e():(this.renderQueue.forEach(this.paint,this),e())},this))},this))}function o(e){return e.parent&&e.parent.clip.length}function d(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})}function i(){}function t(e,n,f,o){return e.map(function(d,i){if(d.width>0){var t=n.left,l=n.top,s=n.width,u=n.height-e[2].width;switch(i){case 0:u=e[0].width,d.args=a({c1:[t,l],c2:[t+s,l],c3:[t+s-e[1].width,l+u],c4:[t+e[3].width,l+u]},o[0],o[1],f.topLeftOuter,f.topLeftInner,f.topRightOuter,f.topRightInner);break;case 1:t=n.left+n.width-e[1].width,s=e[1].width,d.args=a({c1:[t+s,l],c2:[t+s,l+u+e[2].width],c3:[t,l+u],c4:[t,l+e[0].width]},o[1],o[2],f.topRightOuter,f.topRightInner,f.bottomRightOuter,f.bottomRightInner);break;case 2:l=l+n.height-e[2].width,u=e[2].width,d.args=a({c1:[t+s,l+u],c2:[t,l+u],c3:[t+e[3].width,l],c4:[t+s-e[3].width,l]},o[2],o[3],f.bottomRightOuter,f.bottomRightInner,f.bottomLeftOuter,f.bottomLeftInner);break;case 3:s=e[3].width,d.args=a({c1:[t,l+u+e[2].width],c2:[t,l],c3:[t+s,l+e[0].width],c4:[t+s,l+u]},o[3],o[0],f.bottomLeftOuter,f.bottomLeftInner,f.topLeftOuter,f.topLeftInner)}}return d})}function l(e,n,f,o){var d=4*((Math.sqrt(2)-1)/3),i=f*d,t=o*d,l=e+f,s=n+o;return{topLeft:u({x:e,y:s},{x:e,y:s-t},{x:l-i,y:n},{x:l,y:n}),topRight:u({x:e,y:n},{x:e+i,y:n},{x:l,y:s-t},{x:l,y:s}),bottomRight:u({x:l,y:n},{x:l,y:n+t},{x:e+i,y:s},{x:e,y:s}),bottomLeft:u({x:l,y:s},{x:l-i,y:s},{x:e,y:n+t},{x:e,y:n})}}function s(e,n,f){var o=e.left,d=e.top,i=e.width,t=e.height,s=n[0][0]<i/2?n[0][0]:i/2,u=n[0][1]<t/2?n[0][1]:t/2,a=n[1][0]<i/2?n[1][0]:i/2,p=n[1][1]<t/2?n[1][1]:t/2,c=n[2][0]<i/2?n[2][0]:i/2,y=n[2][1]<t/2?n[2][1]:t/2,m=n[3][0]<i/2?n[3][0]:i/2,r=n[3][1]<t/2?n[3][1]:t/2,v=i-a,w=t-y,b=i-c,g=t-r;return{topLeftOuter:l(o,d,s,u).topLeft.subdivide(.5),topLeftInner:l(o+f[3].width,d+f[0].width,Math.max(0,s-f[3].width),Math.max(0,u-f[0].width)).topLeft.subdivide(.5),topRightOuter:l(o+v,d,a,p).topRight.subdivide(.5),topRightInner:l(o+Math.min(v,i+f[3].width),d+f[0].width,v>i+f[3].width?0:a-f[3].width,p-f[0].width).topRight.subdivide(.5),bottomRightOuter:l(o+b,d+w,c,y).bottomRight.subdivide(.5),bottomRightInner:l(o+Math.min(b,i-f[3].width),d+Math.min(w,t+f[0].width),Math.max(0,c-f[1].width),y-f[2].width).bottomRight.subdivide(.5),bottomLeftOuter:l(o,d+g,m,r).bottomLeft.subdivide(.5),bottomLeftInner:l(o+f[3].width,d+g,Math.max(0,m-f[3].width),r-f[2].width).bottomLeft.subdivide(.5)}
}function u(e,n,f,o){var d=function(e,n,f){return{x:e.x+(n.x-e.x)*f,y:e.y+(n.y-e.y)*f}};return{start:e,startControl:n,endControl:f,end:o,subdivide:function(i){var t=d(e,n,i),l=d(n,f,i),s=d(f,o,i),a=d(t,l,i),p=d(l,s,i),c=d(a,p,i);return[u(e,t,a,c),u(c,p,s,o)]},curveTo:function(e){e.push(["bezierCurve",n.x,n.y,f.x,f.y,o.x,o.y])},curveToReversed:function(o){o.push(["bezierCurve",f.x,f.y,n.x,n.y,e.x,e.y])}}}function a(e,n,f,o,d,i,t){var l=[];return n[0]>0||n[1]>0?(l.push(["line",o[1].start.x,o[1].start.y]),o[1].curveTo(l)):l.push(["line",e.c1[0],e.c1[1]]),f[0]>0||f[1]>0?(l.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(l),l.push(["line",t[0].end.x,t[0].end.y]),t[0].curveToReversed(l)):(l.push(["line",e.c2[0],e.c2[1]]),l.push(["line",e.c3[0],e.c3[1]])),n[0]>0||n[1]>0?(l.push(["line",d[1].end.x,d[1].end.y]),d[1].curveToReversed(l)):l.push(["line",e.c4[0],e.c4[1]]),l}function p(e,n,f,o,d,i,t){n[0]>0||n[1]>0?(e.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(e),o[1].curveTo(e)):e.push(["line",i,t]),(f[0]>0||f[1]>0)&&e.push(["line",d[0].start.x,d[0].start.y])}function c(e){return e.cssInt("zIndex")<0}function y(e){return e.cssInt("zIndex")>0}function m(e){return 0===e.cssInt("zIndex")}function r(e){return-1!==["inline","inline-block","inline-table"].indexOf(e.css("display"))}function v(e){return e instanceof U}function w(e){return e.node.data.trim().length>0}function b(e){return/^(normal|none|0px)$/.test(e.parent.css("letterSpacing"))}function g(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(n){var f=e.css("border"+n+"Radius"),o=f.split(" ");return o.length<=1&&(o[1]=o[0]),o.map(F)})}function h(e){return e.nodeType===Node.TEXT_NODE||e.nodeType===Node.ELEMENT_NODE}function x(e){var n=e.css("position"),f=-1!==["absolute","relative","fixed"].indexOf(n)?e.css("zIndex"):"auto";return"auto"!==f}function j(e){return"static"!==e.css("position")}function k(e){return"none"!==e.css("float")}function q(e){return-1!==["inline-block","inline-table"].indexOf(e.css("display"))}function z(e){var n=this;return function(){return!e.apply(n,arguments)}}function A(e){return e.node.nodeType===Node.ELEMENT_NODE}function B(e){return e.isPseudoElement===!0}function C(e){return e.node.nodeType===Node.TEXT_NODE}function D(e){return function(n,f){return n.cssInt("zIndex")+e.indexOf(n)/e.length-(f.cssInt("zIndex")+e.indexOf(f)/e.length)}}function E(e){return e.getOpacity()<1}function F(e){return parseInt(e,10)}function G(e){return e.width}function H(e){return e.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(e.node.nodeName)}function I(e){return[].concat.apply([],e)}function J(e){var n=e.substr(0,1);return n===e.substr(e.length-1)&&n.match(/'|"/)?e.substr(1,e.length-2):e}function K(e){for(var n,f=[],o=0,d=!1;e.length;)L(e[o])===d?(n=e.splice(0,o),n.length&&f.push(O.ucs2.encode(n)),d=!d,o=0):o++,o>=e.length&&(n=e.splice(0,o),n.length&&f.push(O.ucs2.encode(n)));return f}function L(e){return-1!==[32,13,10,9,45].indexOf(e)}function M(e){return/[^\u0000-\u00ff]/.test(e)}var N=e("./log"),O=e("punycode"),P=e("./nodecontainer"),Q=e("./textcontainer"),R=e("./pseudoelementcontainer"),S=e("./fontmetrics"),T=e("./color"),U=e("./stackingcontext"),V=e("./utils"),W=V.bind,X=V.getBounds,Y=V.parseBackgrounds,Z=V.offsetBounds;f.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(e){if(A(e)){B(e)&&e.appendToDOM(),e.borders=this.parseBorders(e);var n="hidden"===e.css("overflow")?[e.borders.clip]:[],f=e.parseClip();f&&-1!==["absolute","fixed"].indexOf(e.css("position"))&&n.push([["rect",e.bounds.left+f.left,e.bounds.top+f.top,f.right-f.left,f.bottom-f.top]]),e.clip=o(e)?e.parent.clip.concat(n):n,e.backgroundClip="hidden"!==e.css("overflow")?e.clip.concat([e.borders.clip]):e.clip,B(e)&&e.cleanDOM()}else C(e)&&(e.clip=o(e)?e.parent.clip:[]);B(e)||(e.bounds=null)},this)},f.prototype.asyncRenderer=function(e,n,f){f=f||Date.now(),this.paint(e[this.renderIndex++]),e.length===this.renderIndex?n():f+20>Date.now()?this.asyncRenderer(e,n,f):setTimeout(W(function(){this.asyncRenderer(e,n)},this),0)},f.prototype.createPseudoHideStyles=function(e){this.createStyles(e,"."+R.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+R.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},f.prototype.disableAnimations=function(e){this.createStyles(e,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},f.prototype.createStyles=function(e,n){var f=e.createElement("style");f.innerHTML=n,e.body.appendChild(f)},f.prototype.getPseudoElements=function(e){var n=[[e]];if(e.node.nodeType===Node.ELEMENT_NODE){var f=this.getPseudoElement(e,":before"),o=this.getPseudoElement(e,":after");f&&n.push(f),o&&n.push(o)}return I(n)},f.prototype.getPseudoElement=function(e,n){var f=e.computedStyle(n);if(!f||!f.content||"none"===f.content||"-moz-alt-content"===f.content||"none"===f.display)return null;for(var o=J(f.content),i="url"===o.substr(0,3),t=document.createElement(i?"img":"html2canvaspseudoelement"),l=new R(t,e,n),s=f.length-1;s>=0;s--){var u=d(f.item(s));t.style[u]=f[u]}if(t.className=R.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+R.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,i)return t.src=Y(o)[0].args[0],[l];var a=document.createTextNode(o);return t.appendChild(a),[l,new Q(a,l)]},f.prototype.getChildren=function(e){return I([].filter.call(e.node.childNodes,h).map(function(n){var f=[n.nodeType===Node.TEXT_NODE?new Q(n,e):new P(n,e)].filter(H);return n.nodeType===Node.ELEMENT_NODE&&f.length&&"TEXTAREA"!==n.tagName?f[0].isElementVisible()?f.concat(this.getChildren(f[0])):[]:f},this))},f.prototype.newStackingContext=function(e,n){var f=new U(n,e.getOpacity(),e.node,e.parent);e.cloneTo(f);var o=n?f.getParentStack(this):f.parent.stack;o.contexts.push(f),e.stack=f},f.prototype.createStackingContexts=function(){this.nodes.forEach(function(e){A(e)&&(this.isRootElement(e)||E(e)||x(e)||this.isBodyWithTransparentRoot(e)||e.hasTransform())?this.newStackingContext(e,!0):A(e)&&(j(e)&&m(e)||q(e)||k(e))?this.newStackingContext(e,!1):e.assignStack(e.parent.stack)},this)},f.prototype.isBodyWithTransparentRoot=function(e){return"BODY"===e.node.nodeName&&e.parent.color("backgroundColor").isTransparent()},f.prototype.isRootElement=function(e){return null===e.parent},f.prototype.sortStackingContexts=function(e){e.contexts.sort(D(e.contexts.slice(0))),e.contexts.forEach(this.sortStackingContexts,this)},f.prototype.parseTextBounds=function(e){return function(n,f,o){if("none"!==e.parent.css("textDecoration").substr(0,4)||0!==n.trim().length){if(this.support.rangeBounds&&!e.parent.hasTransform()){var d=o.slice(0,f).join("").length;return this.getRangeBounds(e.node,d,n.length)}if(e.node&&"string"==typeof e.node.data){var i=e.node.splitText(n.length),t=this.getWrapperBounds(e.node,e.parent.hasTransform());return e.node=i,t}}else(!this.support.rangeBounds||e.parent.hasTransform())&&(e.node=e.node.splitText(n.length));return{}}},f.prototype.getWrapperBounds=function(e,n){var f=e.ownerDocument.createElement("html2canvaswrapper"),o=e.parentNode,d=e.cloneNode(!0);f.appendChild(e.cloneNode(!0)),o.replaceChild(f,e);var i=n?Z(f):X(f);return o.replaceChild(d,f),i},f.prototype.getRangeBounds=function(e,n,f){var o=this.range||(this.range=e.ownerDocument.createRange());return o.setStart(e,n),o.setEnd(e,n+f),o.getBoundingClientRect()},f.prototype.parse=function(e){var n=e.contexts.filter(c),f=e.children.filter(A),o=f.filter(z(k)),d=o.filter(z(j)).filter(z(r)),t=f.filter(z(j)).filter(k),l=o.filter(z(j)).filter(r),s=e.contexts.concat(o.filter(j)).filter(m),u=e.children.filter(C).filter(w),a=e.contexts.filter(y);n.concat(d).concat(t).concat(l).concat(s).concat(u).concat(a).forEach(function(e){this.renderQueue.push(e),v(e)&&(this.parse(e),this.renderQueue.push(new i))},this)},f.prototype.paint=function(e){try{e instanceof i?this.renderer.ctx.restore():C(e)?(B(e.parent)&&e.parent.appendToDOM(),this.paintText(e),B(e.parent)&&e.parent.cleanDOM()):this.paintNode(e)}catch(n){if(N(n),this.options.strict)throw n}},f.prototype.paintNode=function(e){v(e)&&(this.renderer.setOpacity(e.opacity),this.renderer.ctx.save(),e.hasTransform()&&this.renderer.setTransform(e.parseTransform())),"INPUT"===e.node.nodeName&&"checkbox"===e.node.type?this.paintCheckbox(e):"INPUT"===e.node.nodeName&&"radio"===e.node.type?this.paintRadio(e):this.paintElement(e)},f.prototype.paintElement=function(e){var n=e.parseBounds();this.renderer.clip(e.backgroundClip,function(){this.renderer.renderBackground(e,n,e.borders.borders.map(G))},this),this.renderer.clip(e.clip,function(){this.renderer.renderBorders(e.borders.borders)},this),this.renderer.clip(e.backgroundClip,function(){switch(e.node.nodeName){case"svg":case"IFRAME":var f=this.images.get(e.node);f?this.renderer.renderImage(e,n,e.borders,f):N("Error loading <"+e.node.nodeName+">",e.node);break;case"IMG":var o=this.images.get(e.node.src);o?this.renderer.renderImage(e,n,e.borders,o):N("Error loading <img>",e.node.src);break;case"CANVAS":this.renderer.renderImage(e,n,e.borders,{image:e.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(e)}},this)},f.prototype.paintCheckbox=function(e){var n=e.parseBounds(),f=Math.min(n.width,n.height),o={width:f-1,height:f-1,top:n.top,left:n.left},d=[3,3],i=[d,d,d,d],l=[1,1,1,1].map(function(e){return{color:new T("#A5A5A5"),width:e}}),u=s(o,i,l);this.renderer.clip(e.backgroundClip,function(){this.renderer.rectangle(o.left+1,o.top+1,o.width-2,o.height-2,new T("#DEDEDE")),this.renderer.renderBorders(t(l,o,u,i)),e.node.checked&&(this.renderer.font(new T("#424242"),"normal","normal","bold",f-3+"px","arial"),this.renderer.text("✔",o.left+f/6,o.top+f-1))},this)},f.prototype.paintRadio=function(e){var n=e.parseBounds(),f=Math.min(n.width,n.height)-2;this.renderer.clip(e.backgroundClip,function(){this.renderer.circleStroke(n.left+1,n.top+1,f,new T("#DEDEDE"),1,new T("#A5A5A5")),e.node.checked&&this.renderer.circle(Math.ceil(n.left+f/4)+1,Math.ceil(n.top+f/4)+1,Math.floor(f/2),new T("#424242"))},this)},f.prototype.paintFormValue=function(e){var n=e.getValue();if(n.length>0){var f=e.node.ownerDocument,o=f.createElement("html2canvaswrapper"),d=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"];d.forEach(function(n){try{o.style[n]=e.css(n)}catch(f){N("html2canvas: Parse: Exception caught in renderFormValue: "+f.message)}});var i=e.parseBounds();o.style.position="fixed",o.style.left=i.left+"px",o.style.top=i.top+"px",o.textContent=n,f.body.appendChild(o),this.paintText(new Q(o.firstChild,e)),f.body.removeChild(o)}},f.prototype.paintText=function(e){e.applyTextTransform();var n=O.ucs2.decode(e.node.data),f=this.options.letterRendering&&!b(e)||M(e.node.data)?n.map(function(e){return O.ucs2.encode([e])}):K(n),o=e.parent.fontWeight(),d=e.parent.css("fontSize"),i=e.parent.css("fontFamily"),t=e.parent.parseTextShadows();this.renderer.font(e.parent.color("color"),e.parent.css("fontStyle"),e.parent.css("fontVariant"),o,d,i),t.length?this.renderer.fontShadow(t[0].color,t[0].offsetX,t[0].offsetY,t[0].blur):this.renderer.clearShadow(),this.renderer.clip(e.parent.clip,function(){f.map(this.parseTextBounds(e),this).forEach(function(n,o){n&&(this.renderer.text(f[o],n.left,n.bottom),this.renderTextDecoration(e.parent,n,this.fontMetrics.getMetrics(i,d)))},this)},this)},f.prototype.renderTextDecoration=function(e,n,f){switch(e.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(n.left,Math.round(n.top+f.baseline+f.lineWidth),n.width,1,e.color("color"));break;case"overline":this.renderer.rectangle(n.left,Math.round(n.top),n.width,1,e.color("color"));break;case"line-through":this.renderer.rectangle(n.left,Math.ceil(n.top+f.middle+f.lineWidth),n.width,1,e.color("color"))}};var $={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};f.prototype.parseBorders=function(e){var n=e.parseBounds(),f=g(e),o=["Top","Right","Bottom","Left"].map(function(n,f){var o=e.css("border"+n+"Style"),d=e.color("border"+n+"Color");"inset"===o&&d.isBlack()&&(d=new T([255,255,255,d.a]));var i=$[o]?$[o][f]:null;return{width:e.cssInt("border"+n+"Width"),color:i?d[i[0]](i[1]):d,args:null}}),d=s(n,f,o);return{clip:this.parseBackgroundClip(e,d,o,f,n),borders:t(o,n,d,f)}},f.prototype.parseBackgroundClip=function(e,n,f,o,d){var i=e.css("backgroundClip"),t=[];switch(i){case"content-box":case"padding-box":p(t,o[0],o[1],n.topLeftInner,n.topRightInner,d.left+f[3].width,d.top+f[0].width),p(t,o[1],o[2],n.topRightInner,n.bottomRightInner,d.left+d.width-f[1].width,d.top+f[0].width),p(t,o[2],o[3],n.bottomRightInner,n.bottomLeftInner,d.left+d.width-f[1].width,d.top+d.height-f[2].width),p(t,o[3],o[0],n.bottomLeftInner,n.topLeftInner,d.left+f[3].width,d.top+d.height-f[2].width);break;default:p(t,o[0],o[1],n.topLeftOuter,n.topRightOuter,d.left,d.top),p(t,o[1],o[2],n.topRightOuter,n.bottomRightOuter,d.left+d.width,d.top),p(t,o[2],o[3],n.bottomRightOuter,n.bottomLeftOuter,d.left+d.width,d.top+d.height),p(t,o[3],o[0],n.bottomLeftOuter,n.topLeftOuter,d.left,d.top+d.height)}return t},n.exports=f},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(e,n,f){function o(e,n,f){var o="withCredentials"in new XMLHttpRequest;if(!n)return Promise.reject("No proxy configured");var d=t(o),s=l(n,e,d);return o?a(s):i(f,s,d).then(function(e){return m(e.content)})}function d(e,n,f){var o="crossOrigin"in new Image,d=t(o),s=l(n,e,d);return o?Promise.resolve(s):i(f,s,d).then(function(e){return"data:"+e.type+";base64,"+e.content})}function i(e,n,f){return new Promise(function(o,d){var i=e.createElement("script"),t=function(){delete window.html2canvas.proxy[f],e.body.removeChild(i)};window.html2canvas.proxy[f]=function(e){t(),o(e)},i.src=n,i.onerror=function(e){t(),d(e)},e.body.appendChild(i)})}function t(e){return e?"":"html2canvas_"+Date.now()+"_"+ ++r+"_"+Math.round(1e5*Math.random())}function l(e,n,f){return e+"?url="+encodeURIComponent(n)+(f.length?"&callback=html2canvas.proxy."+f:"")}function s(e){return function(n){var f,o=new DOMParser;try{f=o.parseFromString(n,"text/html")}catch(d){c("DOMParser not supported, falling back to createHTMLDocument"),f=document.implementation.createHTMLDocument("");try{f.open(),f.write(n),f.close()}catch(i){c("createHTMLDocument write not supported, falling back to document.body.innerHTML"),f.body.innerHTML=n}}var t=f.querySelector("base");if(!t||!t.href.host){var l=f.createElement("base");l.href=e,f.head.insertBefore(l,f.head.firstChild)}return f}}function u(e,n,f,d,i,t){return new o(e,n,window.document).then(s(e)).then(function(e){return y(e,f,d,i,t,0,0)})}var a=e("./xhr"),p=e("./utils"),c=e("./log"),y=e("./clone"),m=p.decode64,r=0;f.Proxy=o,f.ProxyURL=d,f.loadUrlDocument=u},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(e,n){function f(e,n){var f=document.createElement("a");f.href=e,e=f.href,this.src=e,this.image=new Image;var d=this;this.promise=new Promise(function(f,i){d.image.crossOrigin="Anonymous",d.image.onload=f,d.image.onerror=i,new o(e,n,document).then(function(e){d.image.src=e})["catch"](i)})}var o=e("./proxy").ProxyURL;n.exports=f},{"./proxy":16}],18:[function(e,n){function f(e,n,f){o.call(this,e,n),this.isPseudoElement=!0,this.before=":before"===f}var o=e("./nodecontainer");f.prototype.cloneTo=function(e){f.prototype.cloneTo.call(this,e),e.isPseudoElement=!0,e.before=this.before},f.prototype=Object.create(o.prototype),f.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},f.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},f.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},f.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",f.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",n.exports=f},{"./nodecontainer":14}],19:[function(e,n){function f(e,n,f,o,d){this.width=e,this.height=n,this.images=f,this.options=o,this.document=d}var o=e("./log");f.prototype.renderImage=function(e,n,f,o){var d=e.cssInt("paddingLeft"),i=e.cssInt("paddingTop"),t=e.cssInt("paddingRight"),l=e.cssInt("paddingBottom"),s=f.borders,u=n.width-(s[1].width+s[3].width+d+t),a=n.height-(s[0].width+s[2].width+i+l);this.drawImage(o,0,0,o.image.width||u,o.image.height||a,n.left+d+s[3].width,n.top+i+s[0].width,u,a)},f.prototype.renderBackground=function(e,n,f){n.height>0&&n.width>0&&(this.renderBackgroundColor(e,n),this.renderBackgroundImage(e,n,f))},f.prototype.renderBackgroundColor=function(e,n){var f=e.color("backgroundColor");f.isTransparent()||this.rectangle(n.left,n.top,n.width,n.height,f)},f.prototype.renderBorders=function(e){e.forEach(this.renderBorder,this)},f.prototype.renderBorder=function(e){e.color.isTransparent()||null===e.args||this.drawShape(e.args,e.color)},f.prototype.renderBackgroundImage=function(e,n,f){var d=e.parseBackgroundImages();d.reverse().forEach(function(d,i,t){switch(d.method){case"url":var l=this.images.get(d.args[0]);l?this.renderBackgroundRepeating(e,n,l,t.length-(i+1),f):o("Error loading background-image",d.args[0]);break;case"linear-gradient":case"gradient":var s=this.images.get(d.value);s?this.renderBackgroundGradient(s,n,f):o("Error loading background-image",d.args[0]);break;case"none":break;default:o("Unknown background-image type",d.args[0])}},this)},f.prototype.renderBackgroundRepeating=function(e,n,f,o,d){var i=e.parseBackgroundSize(n,f.image,o),t=e.parseBackgroundPosition(n,f.image,o,i),l=e.parseBackgroundRepeat(o);switch(l){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(f,t,i,n,n.left+d[3],n.top+t.top+d[0],99999,i.height,d);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(f,t,i,n,n.left+t.left+d[3],n.top+d[0],i.width,99999,d);break;case"no-repeat":this.backgroundRepeatShape(f,t,i,n,n.left+t.left+d[3],n.top+t.top+d[0],i.width,i.height,d);break;default:this.renderBackgroundRepeat(f,t,i,{top:n.top,left:n.left},d[3],d[0])}},n.exports=f},{"./log":13}],20:[function(e,n){function f(e,n){d.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=e,this.canvas.height=n),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},t("Initialized CanvasRenderer with size",e,"x",n)}function o(e){return e.length>0}var d=e("../renderer"),i=e("../lineargradientcontainer"),t=e("../log");f.prototype=Object.create(d.prototype),f.prototype.setFillStyle=function(e){return this.ctx.fillStyle="object"==typeof e&&e.isColor?e.toString():e,this.ctx},f.prototype.rectangle=function(e,n,f,o,d){this.setFillStyle(d).fillRect(e,n,f,o)},f.prototype.circle=function(e,n,f,o){this.setFillStyle(o),this.ctx.beginPath(),this.ctx.arc(e+f/2,n+f/2,f/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},f.prototype.circleStroke=function(e,n,f,o,d,i){this.circle(e,n,f,o),this.ctx.strokeStyle=i.toString(),this.ctx.stroke()},f.prototype.drawShape=function(e,n){this.shape(e),this.setFillStyle(n).fill()},f.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(n){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},f.prototype.drawImage=function(e,n,f,o,d,i,t,l,s){(!this.taints(e)||this.options.allowTaint)&&this.ctx.drawImage(e.image,n,f,o,d,i,t,l,s)},f.prototype.clip=function(e,n,f){this.ctx.save(),e.filter(o).forEach(function(e){this.shape(e).clip()},this),n.call(f),this.ctx.restore()},f.prototype.shape=function(e){return this.ctx.beginPath(),e.forEach(function(e,n){"rect"===e[0]?this.ctx.rect.apply(this.ctx,e.slice(1)):this.ctx[0===n?"moveTo":e[0]+"To"].apply(this.ctx,e.slice(1))},this),this.ctx.closePath(),this.ctx},f.prototype.font=function(e,n,f,o,d,i){this.setFillStyle(e).font=[n,f,o,d,i].join(" ").split(",")[0]},f.prototype.fontShadow=function(e,n,f,o){this.setVariable("shadowColor",e.toString()).setVariable("shadowOffsetY",n).setVariable("shadowOffsetX",f).setVariable("shadowBlur",o)},f.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},f.prototype.setOpacity=function(e){this.ctx.globalAlpha=e},f.prototype.setTransform=function(e){this.ctx.translate(e.origin[0],e.origin[1]),this.ctx.transform.apply(this.ctx,e.matrix),this.ctx.translate(-e.origin[0],-e.origin[1])},f.prototype.setVariable=function(e,n){return this.variables[e]!==n&&(this.variables[e]=this.ctx[e]=n),this},f.prototype.text=function(e,n,f){this.ctx.fillText(e,n,f)},f.prototype.backgroundRepeatShape=function(e,n,f,o,d,i,t,l,s){var u=[["line",Math.round(d),Math.round(i)],["line",Math.round(d+t),Math.round(i)],["line",Math.round(d+t),Math.round(l+i)],["line",Math.round(d),Math.round(l+i)]];this.clip([u],function(){this.renderBackgroundRepeat(e,n,f,o,s[3],s[0])},this)},f.prototype.renderBackgroundRepeat=function(e,n,f,o,d,i){var t=Math.round(o.left+n.left+d),l=Math.round(o.top+n.top+i);this.setFillStyle(this.ctx.createPattern(this.resizeImage(e,f),"repeat")),this.ctx.translate(t,l),this.ctx.fill(),this.ctx.translate(-t,-l)},f.prototype.renderBackgroundGradient=function(e,n){if(e instanceof i){var f=this.ctx.createLinearGradient(n.left+n.width*e.x0,n.top+n.height*e.y0,n.left+n.width*e.x1,n.top+n.height*e.y1);e.colorStops.forEach(function(e){f.addColorStop(e.stop,e.color.toString())}),this.rectangle(n.left,n.top,n.width,n.height,f)}},f.prototype.resizeImage=function(e,n){var f=e.image;if(f.width===n.width&&f.height===n.height)return f;var o,d=document.createElement("canvas");return d.width=n.width,d.height=n.height,o=d.getContext("2d"),o.drawImage(f,0,0,f.width,f.height,0,0,n.width,n.height),d},n.exports=f},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(e,n){function f(e,n,f,d){o.call(this,f,d),this.ownStacking=e,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*n}var o=e("./nodecontainer");f.prototype=Object.create(o.prototype),f.prototype.getParentStack=function(e){var n=this.parent?this.parent.stack:null;return n?n.ownStacking?n:n.getParentStack(e):e.stack},n.exports=f},{"./nodecontainer":14}],22:[function(e,n){function f(e){this.rangeBounds=this.testRangeBounds(e),this.cors=this.testCORS(),this.svg=this.testSVG()}f.prototype.testRangeBounds=function(e){var n,f,o,d,i=!1;return e.createRange&&(n=e.createRange(),n.getBoundingClientRect&&(f=e.createElement("boundtest"),f.style.height="123px",f.style.display="block",e.body.appendChild(f),n.selectNode(f),o=n.getBoundingClientRect(),d=o.height,123===d&&(i=!0),e.body.removeChild(f))),i},f.prototype.testCORS=function(){return"undefined"!=typeof(new Image).crossOrigin},f.prototype.testSVG=function(){var e=new Image,n=document.createElement("canvas"),f=n.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{f.drawImage(e,0,0),n.toDataURL()}catch(o){return!1}return!0},n.exports=f},{}],23:[function(e,n){function f(e){this.src=e,this.image=null;var n=this;this.promise=this.hasFabric().then(function(){return n.isInline(e)?Promise.resolve(n.inlineFormatting(e)):o(e)}).then(function(e){return new Promise(function(f){window.html2canvas.svg.fabric.loadSVGFromString(e,n.createCanvas.call(n,f))})})}var o=e("./xhr"),d=e("./utils").decode64;f.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},f.prototype.inlineFormatting=function(e){return/^data:image\/svg\+xml;base64,/.test(e)?this.decode64(this.removeContentType(e)):this.removeContentType(e)},f.prototype.removeContentType=function(e){return e.replace(/^data:image\/svg\+xml(;base64)?,/,"")},f.prototype.isInline=function(e){return/^data:image\/svg\+xml/i.test(e)},f.prototype.createCanvas=function(e){var n=this;return function(f,o){var d=new window.html2canvas.svg.fabric.StaticCanvas("c");n.image=d.lowerCanvasEl,d.setWidth(o.width).setHeight(o.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(f,o)).renderAll(),e(d.lowerCanvasEl)}},f.prototype.decode64=function(e){return"function"==typeof window.atob?window.atob(e):d(e)},n.exports=f},{"./utils":26,"./xhr":28}],24:[function(e,n){function f(e,n){this.src=e,this.image=null;var f=this;this.promise=n?new Promise(function(n,o){f.image=new Image,f.image.onload=n,f.image.onerror=o,f.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(e),f.image.complete===!0&&n(f.image)}):this.hasFabric().then(function(){return new Promise(function(n){window.html2canvas.svg.fabric.parseSVGDocument(e,f.createCanvas.call(f,n))})})}var o=e("./svgcontainer");f.prototype=Object.create(o.prototype),n.exports=f},{"./svgcontainer":23}],25:[function(e,n){function f(e,n){d.call(this,e,n)}function o(e,n,f){return e.length>0?n+f.toUpperCase():void 0}var d=e("./nodecontainer");f.prototype=Object.create(d.prototype),f.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},f.prototype.transform=function(e){var n=this.node.data;switch(e){case"lowercase":return n.toLowerCase();case"capitalize":return n.replace(/(^|\s|:|-|\(|\))([a-z])/g,o);case"uppercase":return n.toUpperCase();default:return n}},n.exports=f},{"./nodecontainer":14}],26:[function(e,n,f){f.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},f.bind=function(e,n){return function(){return e.apply(n,arguments)}},f.decode64=function(e){var n,f,o,d,i,t,l,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=e.length,p="";for(n=0;a>n;n+=4)f=u.indexOf(e[n]),o=u.indexOf(e[n+1]),d=u.indexOf(e[n+2]),i=u.indexOf(e[n+3]),t=f<<2|o>>4,l=(15&o)<<4|d>>2,s=(3&d)<<6|i,p+=64===d?String.fromCharCode(t):64===i||-1===i?String.fromCharCode(t,l):String.fromCharCode(t,l,s);return p},f.getBounds=function(e){if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),f=null==e.offsetWidth?n.width:e.offsetWidth;return{top:n.top,bottom:n.bottom||n.top+n.height,right:n.left+f,left:n.left,width:f,height:null==e.offsetHeight?n.height:e.offsetHeight}}return{}},f.offsetBounds=function(e){var n=e.offsetParent?f.offsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+n.top,bottom:e.offsetTop+e.offsetHeight+n.top,right:e.offsetLeft+n.left+e.offsetWidth,left:e.offsetLeft+n.left,width:e.offsetWidth,height:e.offsetHeight}},f.parseBackgrounds=function(e){var n,f,o,d,i,t,l,s=" \r\n	",u=[],a=0,p=0,c=function(){n&&('"'===f.substr(0,1)&&(f=f.substr(1,f.length-2)),f&&l.push(f),"-"===n.substr(0,1)&&(d=n.indexOf("-",1)+1)>0&&(o=n.substr(0,d),n=n.substr(d)),u.push({prefix:o,method:n.toLowerCase(),value:i,args:l,image:null})),l=[],n=o=f=i=""};return l=[],n=o=f=i="",e.split("").forEach(function(e){if(!(0===a&&s.indexOf(e)>-1)){switch(e){case'"':t?t===e&&(t=null):t=e;break;case"(":if(t)break;if(0===a)return a=1,void(i+=e);p++;break;case")":if(t)break;if(1===a){if(0===p)return a=0,i+=e,void c();p--}break;case",":if(t)break;if(0===a)return void c();if(1===a&&0===p&&!n.match(/^url$/i))return l.push(f),f="",void(i+=e)}i+=e,0===a?n+=e:f+=e}}),c(),u}},{}],27:[function(e,n){function f(e){o.apply(this,arguments),this.type="linear"===e.args[0]?o.TYPES.LINEAR:o.TYPES.RADIAL}var o=e("./gradientcontainer");f.prototype=Object.create(o.prototype),n.exports=f},{"./gradientcontainer":9}],28:[function(e,n){function f(e){return new Promise(function(n,f){var o=new XMLHttpRequest;o.open("GET",e),o.onload=function(){200===o.status?n(o.responseText):f(new Error(o.statusText))},o.onerror=function(){f(new Error("Network Error"))},o.send()})}n.exports=f},{}]},{},[4])(4)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L0RvY3VtZW50cy9naXQvZGlzcnVwdC5qcy9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL21haW4uanMiLCJEOi9Eb2N1bWVudHMvZ2l0L2Rpc3J1cHQuanMvdmVuZG9yL2h0bWwyY2FudmFzLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2dkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiY29uc3QgaHRtbDJjYW52YXMgPSByZXF1aXJlKCcuLi92ZW5kb3IvaHRtbDJjYW52YXMubWluLmpzJylcclxuXHJcbi8qKlxyXG4gKiBNT1VTRSBjbGFzcywgZm9yIGJhc2ljIG1vdXNlIHRyYWNraW5nXHJcbiAqL1xyXG5cclxuY2xhc3MgTW91c2Uge1xyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIHRoaXMueCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gMlxyXG4gICAgdGhpcy55ID0gd2luZG93LmlubmVySGVpZ2h0IC8gMlxyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlID0+IHtcclxuICAgICAgdGhpcy54ID0gZS5jbGllbnRYXHJcbiAgICAgIHRoaXMueSA9IGUuY2xpZW50WVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGdldCBwb3MgKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogdGhpcy54LFxyXG4gICAgICB5OiB0aGlzLnlcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IE1PVVNFID0gbmV3IE1vdXNlKClcclxuXHJcbi8qKlxyXG4gKiBUcmlnb25vbWV0cnkgY2xhc3NcclxuICovXHJcblxyXG5jbGFzcyBUcmlnIHtcclxuICBzdGF0aWMgZGlzdGFuY2VCZXR3ZWVuIChwMSwgcDIpIHtcclxuICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3cocDIueCAtIHAxLngsIDIpICsgTWF0aC5wb3cocDIueSAtIHAxLnksIDIpKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFuZ2xlQmV0d2VlbiAocDEsIHAyKSB7XHJcbiAgICByZXR1cm4gTWF0aC5hdGFuMihwMi55IC0gcDEueSwgcDIueCAtIHAxLngpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbGVuZ3RoZGlyWCAobGVuLCBkaXIpIHtcclxuICAgIHJldHVybiBsZW4gKiBNYXRoLmNvcyhkaXIpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbGVuZ3RoZGlyWSAobGVuLCBkaXIpIHtcclxuICAgIHJldHVybiBsZW4gKiBNYXRoLnNpbihkaXIpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogRElTUlVQVCBjbGFzcywgZm9yIGhhbmRsaW5nIGRpc3J1cHRpb25zXHJcbiAqL1xyXG5cclxuY2xhc3MgRElTUlVQVCB7XHJcbiAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgdGhpcy5ET01VUkwgPSB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkwgfHwgd2luZG93XHJcblxyXG4gICAgdGhpcy50YXJnZXRDbGFzcyA9ICdkaXNydXB0J1xyXG4gICAgdGhpcy5kaXNydXB0YWJsZXMgPSB7fVxyXG5cclxuICAgIHRoaXMuZGlzcnVwdGlvbkNvdW50ZXIgPSAwXHJcblxyXG4gICAgdGhpcy5HRU5FUkFUT1JTID0ge1xyXG4gICAgICByYW5kb21SZWN0OiBjYW52YXMgPT4ge1xyXG4gICAgICAgIGxldCB4ID0gY2FudmFzLndpZHRoICogTWF0aC5yYW5kb20oKVxyXG4gICAgICAgIGxldCB5ID0gY2FudmFzLmhlaWdodCAqIE1hdGgucmFuZG9tKClcclxuICAgICAgICBsZXQgdyA9IChjYW52YXMud2lkdGggLSB4KSAqIE1hdGgucmFuZG9tKClcclxuICAgICAgICBsZXQgaCA9IChjYW52YXMuaGVpZ2h0IC0geSkgKiBNYXRoLnJhbmRvbSgpXHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzeDogeCxcclxuICAgICAgICAgIHN5OiB5LFxyXG4gICAgICAgICAgdzogdyxcclxuICAgICAgICAgIGg6IGgsXHJcbiAgICAgICAgICBkeDogeCxcclxuICAgICAgICAgIGR5OiB5XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGlzcnVwdGlvbiBhbmltYXRpb25zXHJcbiAgICB0aGlzLkRJU1JVUFRJT05TID0ge1xyXG4gICAgICAvKipcclxuICAgICAgICogSG9yaXpvbnRhbCBiYXJzIHRoYXQgc2hha2UgbGVmdC10by1yaWdodFxyXG4gICAgICAgKi9cclxuICAgICAgJ2RzcnB0LWhvcml6b250YWwnOiB7XHJcbiAgICAgICAgc2V0dXA6IGNhbnZhcyA9PiB7XHJcbiAgICAgICAgICBsZXQgbnVtTGluZXMgPSA3XHJcbiAgICAgICAgICBsZXQgbGluZUhlaWdodCA9IGNhbnZhcy5oZWlnaHQgLyBudW1MaW5lc1xyXG4gICAgICAgICAgbGV0IGxpbmVzID0gW11cclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtTGluZXM7IGkrKykge1xyXG4gICAgICAgICAgICBsaW5lcy5wdXNoKHtcclxuICAgICAgICAgICAgICBzeDogMCxcclxuICAgICAgICAgICAgICBzeTogbGluZUhlaWdodCAqIGksXHJcbiAgICAgICAgICAgICAgdzogY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgICAgIGg6IGxpbmVIZWlnaHQsXHJcbiAgICAgICAgICAgICAgZHg6IDAsXHJcbiAgICAgICAgICAgICAgZHk6IGxpbmVIZWlnaHQgKiBpLFxyXG4gICAgICAgICAgICAgIG5leHRNb3ZlbWVudDogMCxcclxuICAgICAgICAgICAgICBvZmZzZXQ6IDBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBydW50aW1lOiAyMDAwLFxyXG4gICAgICAgICAgICBsaW5lczogbGluZXNcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGFuaW1hdGU6IChjYW52YXMsIGRvbUltYWdlLCBzZXR1cERhdGEsIHByb2dyZXNzKSA9PiB7XHJcbiAgICAgICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcclxuICAgICAgICAgIGxldCBsaW5lcyA9IHNldHVwRGF0YS5saW5lc1xyXG4gICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpXHJcblxyXG4gICAgICAgICAgLy8gQW5pbWF0ZSBsaW5lc1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgbGluZSA9IGxpbmVzW2ldXHJcblxyXG4gICAgICAgICAgICAvLyBTaG91bGQgdGhpcyBsaW5lIG1vdmUgdGhpcyBmcmFtZT9cclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzID4gbGluZS5uZXh0TW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgICAvLyBPZmZzZXQgc2hvdWxkIGJlIDAgaWYgYW5pbWF0aW9uIGlzIGZpbmlzaGVkXHJcbiAgICAgICAgICAgICAgaWYgKHByb2dyZXNzID49IDEpIHtcclxuICAgICAgICAgICAgICAgIGxpbmUub2Zmc2V0ID0gMFxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb2Zmc2V0ID0gTWF0aC5yYW5kb20oKSAqIGxpbmUuaCAqIDIgLSBsaW5lLmhcclxuICAgICAgICAgICAgICAgIGxldCBkYW1wZW5lciA9IE1hdGgubWF4KDAsIDEgLSBwcm9ncmVzcylcclxuICAgICAgICAgICAgICAgIGxpbmUub2Zmc2V0ID0gb2Zmc2V0ICogZGFtcGVuZXJcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIC8vIFNldCB0aW1lIGZvciBuZXh0IG1vdmVtZW50XHJcbiAgICAgICAgICAgICAgbGluZS5uZXh0TW92ZW1lbnQgKz0gTWF0aC5yYW5kb20oKSAqIDAuM1xyXG4gICAgICAgICAgICAgIGxpbmUubmV4dE1vdmVtZW50ID0gTWF0aC5taW4oMSwgbGluZS5uZXh0TW92ZW1lbnQpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIERyYXcgdGhlIGxpbmVcclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShkb21JbWFnZSwgbGluZS5zeCwgbGluZS5zeSwgbGluZS53LCBsaW5lLmgsIGxpbmUuZHggKyBsaW5lLm9mZnNldCwgbGluZS5keSwgbGluZS53LCBsaW5lLmgpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEEgZGlzdG9ydGVkIGNoZWNrZXJib2FyZCBlZmZlY3QgdGhhdCBzbG93bHkgZGlzc29sdmVzIGluXHJcbiAgICAgICAqL1xyXG4gICAgICAnZHNycHQtZGlzc29sdmUnOiB7XHJcbiAgICAgICAgc2V0dXA6IGNhbnZhcyA9PiB7XHJcbiAgICAgICAgICBsZXQgcm93cyA9IDMwXHJcbiAgICAgICAgICBsZXQgY29sdW1ucyA9IDhcclxuXHJcbiAgICAgICAgICBsZXQgdyA9IGNhbnZhcy53aWR0aCAvIHJvd3NcclxuICAgICAgICAgIGxldCBoID0gY2FudmFzLmhlaWdodCAvIGNvbHVtbnNcclxuXHJcbiAgICAgICAgICBsZXQgZ3JpZCA9IFtdXHJcbiAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IHJvd3M7IHIrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IGNvbHVtbnM7IGMrKykge1xyXG4gICAgICAgICAgICAgIGdyaWQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB4OiByICogdyxcclxuICAgICAgICAgICAgICAgIHk6IGMgKiBoLFxyXG4gICAgICAgICAgICAgICAgdzogdyxcclxuICAgICAgICAgICAgICAgIGg6IGgsXHJcbiAgICAgICAgICAgICAgICB4T2ZmOiB3ICogKE1hdGgucmFuZG9tKCkgKiAyIC0gMSksXHJcbiAgICAgICAgICAgICAgICB5T2ZmOiBoICogKE1hdGgucmFuZG9tKCkgKiAyIC0gMSksXHJcbiAgICAgICAgICAgICAgICBzaG93QXQ6IE1hdGgucmFuZG9tKCksXHJcbiAgICAgICAgICAgICAgICBjb3JyZWN0QXQ6IE1hdGgucmFuZG9tKClcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcnVudGltZTogMTUwMCxcclxuICAgICAgICAgICAgZ3JpZDogZ3JpZFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYW5pbWF0ZTogKGNhbnZhcywgZG9tSW1hZ2UsIHNldHVwRGF0YSwgcHJvZ3Jlc3MpID0+IHtcclxuICAgICAgICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxyXG4gICAgICAgICAgbGV0IGdyaWQgPSBzZXR1cERhdGEuZ3JpZFxyXG4gICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpXHJcblxyXG4gICAgICAgICAgLyogQU5JTUFUSU9OIENPREUgKi9cclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JpZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgc3F1YXJlID0gZ3JpZFtpXVxyXG4gICAgICAgICAgICBsZXQgeCA9IHNxdWFyZS54XHJcbiAgICAgICAgICAgIGxldCB5ID0gc3F1YXJlLnlcclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzID4gc3F1YXJlLnNob3dBdCkge1xyXG4gICAgICAgICAgICAgIGlmIChwcm9ncmVzcyA8IHNxdWFyZS5jb3JyZWN0QXQpIHtcclxuICAgICAgICAgICAgICAgIHggKz0gc3F1YXJlLnhPZmZcclxuICAgICAgICAgICAgICAgIHkgKz0gc3F1YXJlLnlPZmZcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShkb21JbWFnZSwgc3F1YXJlLngsIHNxdWFyZS55LCBzcXVhcmUudywgc3F1YXJlLmgsIHgsIHksIHNxdWFyZS53LCBzcXVhcmUuaClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBCbG9ja3Mgb2YgdGhlIHNvdXJjZSBpbWFnZSByZW5kZXIgXCJpbmNvcnJlY3RseVwiIHRoZW4gc25hcCBpbnRvIHBsYWNlXHJcbiAgICAgICAqL1xyXG4gICAgICAnZHNycHQtYmxvY2tzJzoge1xyXG4gICAgICAgIHNldHVwOiAoY2FudmFzLCBkb21JbWFnZSwgZ2VuZXJhdG9ycykgPT4ge1xyXG4gICAgICAgICAgbGV0IG51bWJsb2NrcyA9IDE1XHJcbiAgICAgICAgICBsZXQgYmxvY2tzID0gW11cclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmxvY2tzOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGJsb2NrID0gZ2VuZXJhdG9ycy5yYW5kb21SZWN0KGNhbnZhcylcclxuXHJcbiAgICAgICAgICAgIGxldCBtYXhPZmZzZXQgPSAyMFxyXG5cclxuICAgICAgICAgICAgbGV0IHhPZmYgPSBNYXRoLnJhbmRvbSgpICogbWF4T2Zmc2V0ICogMiAtIG1heE9mZnNldFxyXG4gICAgICAgICAgICBsZXQgeU9mZiA9IE1hdGgucmFuZG9tKCkgKiBtYXhPZmZzZXQgKiAyIC0gbWF4T2Zmc2V0XHJcbiAgICAgICAgICAgIGJsb2NrLmR4ICs9IHhPZmZcclxuICAgICAgICAgICAgYmxvY2suZHkgKz0geU9mZlxyXG4gICAgICAgICAgICBibG9jay5zaG93QXQgPSBNYXRoLnJhbmRvbSgpICogMC4xXHJcbiAgICAgICAgICAgIGJsb2NrLnJlcG9zaXRpb25BdCA9IE1hdGgucmFuZG9tKCkgKiAwLjkgKyAwLjFcclxuXHJcbiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKGJsb2NrKVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJ1bnRpbWU6IDI1MDAsXHJcbiAgICAgICAgICAgIGJsb2NrczogYmxvY2tzXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhbmltYXRlOiAoY2FudmFzLCBkb21JbWFnZSwgc2V0dXBEYXRhLCBwcm9ncmVzcykgPT4ge1xyXG4gICAgICAgICAgbGV0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcbiAgICAgICAgICBsZXQgYmxvY2tzID0gc2V0dXBEYXRhLmJsb2Nrc1xyXG5cclxuICAgICAgICAgIC8vIENsZWFyIGNhbnZhc1xyXG4gICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpXHJcblxyXG4gICAgICAgICAgLy8gRHJhdyBiYXNlIGltYWdlIGFuZCBlcmFzZSBzZWN0aW9uc1xyXG4gICAgICAgICAgY3R4LmRyYXdJbWFnZShkb21JbWFnZSwgMCwgMClcclxuXHJcbiAgICAgICAgICAvLyBDbGVhciBhcmVhcyBiZWhpbmQgYmxvY2tzXHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsb2Nrcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgYmxvY2sgPSBibG9ja3NbaV1cclxuICAgICAgICAgICAgaWYgKGJsb2NrLnJlcG9zaXRpb25BdCA+IHByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdChibG9jay5zeCwgYmxvY2suc3ksIGJsb2NrLncsIGJsb2NrLmgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBEcmF3IGJsb2Nrc1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibG9ja3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGJsb2NrID0gYmxvY2tzW2ldXHJcbiAgICAgICAgICAgIGlmIChibG9jay5yZXBvc2l0aW9uQXQgPiBwcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZG9tSW1hZ2UsIGJsb2NrLnN4LCBibG9jay5zeSwgYmxvY2sudywgYmxvY2suaCwgYmxvY2suZHgsIGJsb2NrLmR5LCBibG9jay53LCBibG9jay5oKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFRoZSBzb3VyY2UgaW1hZ2VzIGZhZGVzIGluIGFuZCBzY2FsZXMgZG93biwgd2l0aCBzb21lIHNlY3Rpb25zXHJcbiAgICAgICAqIGdsaXRjaGluZyAmIGZyZWV6aW5nIGFsb25nIHRoZSB3YXlcclxuICAgICAgICovXHJcbiAgICAgICdkc3JwdC1zY2FsZS1kb3duJzoge1xyXG4gICAgICAgIHNldHVwOiAoY2FudmFzLCBkb21JbWFnZSwgZ2VuZXJhdG9ycykgPT4ge1xyXG4gICAgICAgICAgbGV0IG51bUJsb2NrcyA9IDE1XHJcbiAgICAgICAgICBsZXQgYmxvY2tzID0gW11cclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQmxvY2tzOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGJsb2NrID0gZ2VuZXJhdG9ycy5yYW5kb21SZWN0KGNhbnZhcylcclxuICAgICAgICAgICAgYmxvY2suYW5pbVRpbWUgPSBNYXRoLm1pbigwLjQgKyBNYXRoLnJhbmRvbSgpICogMC43LCAxKVxyXG4gICAgICAgICAgICBibG9jay5zdG9wQXQgPSBNYXRoLnJhbmRvbSgpICogYmxvY2suYW5pbVRpbWVcclxuICAgICAgICAgICAgYmxvY2suc3RvcExlbmd0aCA9IE1hdGgucmFuZG9tKCkgKiBNYXRoLm1pbigwLjQsIGJsb2NrLmFuaW1UaW1lKVxyXG4gICAgICAgICAgICBibG9jay5zdG9wU2NhbGUgPSAwXHJcbiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKGJsb2NrKVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBuZXcgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBQcm9wc1xyXG4gICAgICAgICAgICB0aGlzLnJ1bnRpbWUgPSAxNTAwXHJcbiAgICAgICAgICAgIHRoaXMuYmxvY2tzID0gYmxvY2tzXHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGUgPSB7XHJcbiAgICAgICAgICAgICAgbWluOiAxLFxyXG4gICAgICAgICAgICAgIG1heDogMS41XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYmFzZVggPSBzY2FsZSA9PiAtY2FudmFzLndpZHRoICogKHNjYWxlIC0gMSkgLyAyLFxyXG4gICAgICAgICAgICB0aGlzLmJhc2VZID0gc2NhbGUgPT4gLWNhbnZhcy5oZWlnaHQgKiAoc2NhbGUgLSAxKSAvIDIsXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0U2NhbGUgPSBwcm9ncmVzcyA9PiB0aGlzLnNjYWxlLm1heCAtIHRoaXMucGFyYWJvbGEocHJvZ3Jlc3MpICogKHRoaXMuc2NhbGUubWF4IC0gdGhpcy5zY2FsZS5taW4pLFxyXG4gICAgICAgICAgICB0aGlzLnNjYWxlUHJvZ3Jlc3MgPSAocHJvZ3Jlc3MsIG1heCkgPT4gTWF0aC5taW4ocHJvZ3Jlc3MgLyBtYXgsIDEpLFxyXG4gICAgICAgICAgICB0aGlzLnBhcmFib2xhID0geCA9PiAtTWF0aC5wb3coeCAtIDEsIDIpICsgMVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYW5pbWF0ZTogKGNhbnZhcywgZG9tSW1hZ2UsIHNldHVwRGF0YSwgcHJvZ3Jlc3MpID0+IHtcclxuICAgICAgICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxyXG4gICAgICAgICAgbGV0IGJsb2NrcyA9IHNldHVwRGF0YS5ibG9ja3NcclxuXHJcbiAgICAgICAgICAvLyBDbGVhciBjYW52YXNcclxuICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG5cclxuICAgICAgICAgIC8vIEFuaW1hdGUgYmFzZSBpbWFnZVxyXG4gICAgICAgICAgbGV0IGJhc2VQcm9ncmVzcyA9IHNldHVwRGF0YS5zY2FsZVByb2dyZXNzKHByb2dyZXNzLCAwLjMpXHJcbiAgICAgICAgICBsZXQgYmFzZVNjYWxlID0gc2V0dXBEYXRhLmdldFNjYWxlKGJhc2VQcm9ncmVzcylcclxuXHJcbiAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBiYXNlUHJvZ3Jlc3NcclxuICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoXHJcbiAgICAgICAgICAgIGRvbUltYWdlLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICAgIHNldHVwRGF0YS5iYXNlWChiYXNlU2NhbGUpLCBzZXR1cERhdGEuYmFzZVkoYmFzZVNjYWxlKSwgY2FudmFzLndpZHRoICogYmFzZVNjYWxlLCBjYW52YXMuaGVpZ2h0ICogYmFzZVNjYWxlXHJcbiAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibG9ja3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGJsb2NrID0gYmxvY2tzW2ldXHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgc2VjdGlvbiBmcm9tIGJhc2UgaW1hZ2VcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMVxyXG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KHNldHVwRGF0YS5iYXNlWChiYXNlU2NhbGUpICsgYmxvY2suc3ggKiBiYXNlU2NhbGUsIHNldHVwRGF0YS5iYXNlWShiYXNlU2NhbGUpICsgYmxvY2suc3kgKiBiYXNlU2NhbGUsIGJsb2NrLncgKiBiYXNlU2NhbGUsIGJsb2NrLmggKiBiYXNlU2NhbGUpXHJcblxyXG4gICAgICAgICAgICBsZXQgbXlQcm9nID0gc2V0dXBEYXRhLnNjYWxlUHJvZ3Jlc3MocHJvZ3Jlc3MsIGJsb2NrLmFuaW1UaW1lKVxyXG4gICAgICAgICAgICBsZXQgc2NhbGUgPSBzZXR1cERhdGEuZ2V0U2NhbGUobXlQcm9nKVxyXG4gICAgICAgICAgICBsZXQgZmluYWxTY2FsZSA9IHNjYWxlXHJcblxyXG4gICAgICAgICAgICBpZiAoYmxvY2suc3RvcEF0IDwgcHJvZ3Jlc3MgJiYgcHJvZ3Jlc3MgPD0gYmxvY2suc3RvcEF0ICsgYmxvY2suc3RvcExlbmd0aCkge1xyXG4gICAgICAgICAgICAgIGlmIChibG9jay5zdG9wU2NhbGUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGJsb2NrLnN0b3BTY2FsZSA9IHNjYWxlXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGZpbmFsU2NhbGUgPSBibG9jay5zdG9wU2NhbGVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gbXlQcm9nXHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoXHJcbiAgICAgICAgICAgICAgZG9tSW1hZ2UsIGJsb2NrLnN4LCBibG9jay5zeSwgYmxvY2sudywgYmxvY2suaCxcclxuICAgICAgICAgICAgICBzZXR1cERhdGEuYmFzZVgoZmluYWxTY2FsZSkgKyBibG9jay5zeCAqIGZpbmFsU2NhbGUsIHNldHVwRGF0YS5iYXNlWShmaW5hbFNjYWxlKSArIGJsb2NrLnN5ICogZmluYWxTY2FsZSwgYmxvY2sudyAqIGZpbmFsU2NhbGUsIGJsb2NrLmggKiBmaW5hbFNjYWxlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogT2theSBsZXQncyBnaXZlIFJHQiBzaGlmdGluZyBhIGdvIGFnYWluXHJcbiAgICAgICAqL1xyXG4gICAgICAnZHNycHQtcmdiLXNoaWZ0Jzoge1xyXG4gICAgICAgIHNldHVwOiAoY2FudmFzLCBkb21JbWFnZSkgPT4ge1xyXG4gICAgICAgICAgbGV0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcblxyXG4gICAgICAgICAgLy8gU2V0IHVwIGNvbG91ci1zaGlmdGVkIGltYWdlc1xyXG4gICAgICAgICAgbGV0IGNvbG91ck5hbWVzID0gWyAncmVkJywgJ2dyZWVuJywgJ2JsdWUnIF1cclxuICAgICAgICAgIGxldCBjb2xvdXJzID0gW11cclxuXHJcblxyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvdXJOYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcclxuXHJcbiAgICAgICAgICAgIC8vIERyYXcgYmFzaWMgaW1hZ2VcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3ZlcidcclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShkb21JbWFnZSwgMCwgMClcclxuXHJcbiAgICAgICAgICAgIC8vIFJlY29sb3VyIGl0XHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLWluJ1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3VyTmFtZXNbaV1cclxuICAgICAgICAgICAgY3R4LnJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG4gICAgICAgICAgICBjdHguZmlsbCgpXHJcblxyXG4gICAgICAgICAgICBsZXQgaW1nID0gbmV3IEltYWdlKClcclxuICAgICAgICAgICAgaW1nLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cydcclxuICAgICAgICAgICAgaW1nLnNyYyA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpXHJcblxyXG4gICAgICAgICAgICBjb2xvdXJzLnB1c2goe1xyXG4gICAgICAgICAgICAgIGltYWdlOiBpbWcsXHJcbiAgICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgICBkeDogMCxcclxuICAgICAgICAgICAgICBjaGFuZ2VGcmVxOiAwLjEsXHJcbiAgICAgICAgICAgICAgY2hhbmdlQXQ6IDBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBSZXNldCBjb21wIG1vZGVcclxuICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInXHJcblxyXG4gICAgICAgICAgcmV0dXJuIG5ldyBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucnVudGltZSA9IDI1MDBcclxuICAgICAgICAgICAgdGhpcy5jb2xvdXJzID0gY29sb3Vyc1xyXG4gICAgICAgICAgICB0aGlzLmFtcGxpdHVkZSA9IDVcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2xpdGNoQXQgPSAwXHJcbiAgICAgICAgICAgIHRoaXMuZ2xpdGNoVGltZSA9IDAuMDVcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWF4R2xpdGNoRGVsYXkgPSAwLjhcclxuICAgICAgICAgICAgdGhpcy5nbGl0Y2hBbXBsaXR1ZGVNb2RpZmllciA9IDEwXHJcblxyXG4gICAgICAgICAgICB0aGlzLmlzR2xpdGNoaW5nID0gcHJvZ3Jlc3MgPT4gKHByb2dyZXNzID4gdGhpcy5nbGl0Y2hBdCAmJiBwcm9ncmVzcyA8PSB0aGlzLmdsaXRjaEF0ICsgdGhpcy5nbGl0Y2hUaW1lKVxyXG4gICAgICAgICAgICB0aGlzLnNldEdsaXRjaEF0ID0gcHJvZ3Jlc3MgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMuZ2xpdGNoQXQgPSBwcm9ncmVzcyArIE1hdGgucmFuZG9tKCkgKiB0aGlzLm1heEdsaXRjaERlbGF5XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZXRHbGl0Y2hBdCgwKVxyXG5cclxuICAgICAgICAgICAgLy8gR2xpdGNoIGJhcnNcclxuICAgICAgICAgICAgbGV0IG51bUJhcnMgPSAzXHJcbiAgICAgICAgICAgIHRoaXMuZ2xpdGNoQmFycyA9IFtdXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQmFyczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5nbGl0Y2hCYXJzLnB1c2gobmV3IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudyA9IDBcclxuICAgICAgICAgICAgICAgIHRoaXMuaCA9IDFcclxuICAgICAgICAgICAgICAgIHRoaXMueCA9IDBcclxuICAgICAgICAgICAgICAgIHRoaXMueSA9IDBcclxuICAgICAgICAgICAgICAgIHRoaXMuZHggPSAwXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1heE9mZnNldCA9IDIwXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1heE1vdmVUaW1lID0gMC4wM1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlQXQgPSAwXHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUgPSBwcm9ncmVzcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyA+IHRoaXMubW92ZUF0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTaXplKClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBvcygpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlQXQgPSBwcm9ncmVzcyArIHRoaXMubWF4TW92ZVRpbWUgKiBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNpemUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudyA9IE1hdGgucmFuZG9tKCkgKiBjYW52YXMud2lkdGhcclxuICAgICAgICAgICAgICAgICAgbGV0IHhMZWZ0ID0gY2FudmFzLndpZHRoIC0gdGhpcy53XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMueCA9IE1hdGgucmFuZG9tKCkgKiB4TGVmdFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUG9zID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoY2FudmFzLmhlaWdodCAtIHRoaXMuaCkpXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZHggPSB0aGlzLm1heE9mZnNldCAqIChNYXRoLnJhbmRvbSgpICogMiAtIDEpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYW5pbWF0ZTogKGNhbnZhcywgZG9tSW1hZ2UsIHNldHVwRGF0YSwgcHJvZ3Jlc3MpID0+IHtcclxuICAgICAgICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxyXG4gICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpXHJcblxyXG4gICAgICAgICAgLyogQU5JTUFUSU9OIENPREUgKi9cclxuXHJcbiAgICAgICAgICAvLyBEcmF3IGNvbG91cnNcclxuICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEvM1xyXG5cclxuICAgICAgICAgIGZvciAobGV0IGNvbG91ciBvZiBzZXR1cERhdGEuY29sb3Vycykge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZHggZXZlcnkgbm93IGFuZCB0aGVuXHJcbiAgICAgICAgICAgIGlmIChwcm9ncmVzcyA+IGNvbG91ci5jaGFuZ2VBdCkge1xyXG4gICAgICAgICAgICAgIGNvbG91ci5jaGFuZ2VBdCA9IHByb2dyZXNzICsgTWF0aC5yYW5kb20oKSAqIGNvbG91ci5jaGFuZ2VGcmVxXHJcbiAgICAgICAgICAgICAgY29sb3VyLnggPSBzZXR1cERhdGEuYW1wbGl0dWRlICogKE1hdGgucmFuZG9tKCkgKiAyIC0gMSlcclxuICAgICAgICAgICAgICBjb2xvdXIuZHggPSBjb2xvdXIueCAqIChzZXR1cERhdGEuaXNHbGl0Y2hpbmcocHJvZ3Jlc3MpID8gc2V0dXBEYXRhLmdsaXRjaEFtcGxpdHVkZU1vZGlmaWVyIDogMSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShjb2xvdXIuaW1hZ2UsIGNvbG91ci5keCwgMClcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoIXNldHVwRGF0YS5pc0dsaXRjaGluZyhwcm9ncmVzcykpIHtcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMi8zXHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZG9tSW1hZ2UsIDAsIDApXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gV2hlbiBnbGl0Y2ggaGFzIGZpbmlzaGVkLCBzY2hlZHVsZSBhbm90aGVyXHJcbiAgICAgICAgICBpZiAocHJvZ3Jlc3MgPiBzZXR1cERhdGEuZ2xpdGNoQXQgKyBzZXR1cERhdGEuZ2xpdGNoVGltZSkge1xyXG4gICAgICAgICAgICBzZXR1cERhdGEuc2V0R2xpdGNoQXQocHJvZ3Jlc3MpXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gR2xpdGNoIGJhcnNcclxuICAgICAgICAgIGZvciAobGV0IGJhciBvZiBzZXR1cERhdGEuZ2xpdGNoQmFycykge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgYmFyXHJcbiAgICAgICAgICAgIGJhci51cGRhdGUocHJvZ3Jlc3MpXHJcblxyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxXHJcbiAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoYmFyLngsIGJhci55LCBiYXIudywgYmFyLmgpXHJcblxyXG4gICAgICAgICAgICAvLyBSZS1kcmF3IHNvdXJjZSBpbWFnZSBidXQgb2Zmc2V0XHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEvM1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjb2xvdXIgb2Ygc2V0dXBEYXRhLmNvbG91cnMpIHtcclxuICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGNvbG91ci5pbWFnZSwgYmFyLngsIGJhci55LCBiYXIudywgYmFyLmgsIGJhci54ICsgYmFyLmR4ICsgY29sb3VyLmR4LCBiYXIueSwgYmFyLncsIGJhci5oKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNldHVwRGF0YS5pc0dsaXRjaGluZyhwcm9ncmVzcykpIHtcclxuICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAyLzNcclxuICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGRvbUltYWdlLCBiYXIueCwgYmFyLnksIGJhci53LCBiYXIuaCwgYmFyLnggKyBiYXIuZHgsIGJhci55LCBiYXIudywgYmFyLmgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUkdCIHNwbGl0IHdpdGggYSBzbGlnaHQgcGFyYWxsYXggZWZmZWN0IHRoYXQgZm9sbG93cyB0aGUgbW91c2VcclxuICAgICAgICovXHJcbiAgICAgICdkc3JwdC1yZ2ItZm9sbG93Jzoge1xyXG4gICAgICAgIHNldHVwOiAoY2FudmFzLCBkb21JbWFnZSkgPT4ge1xyXG4gICAgICAgICAgbGV0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcblxyXG4gICAgICAgICAgLy8gU2V0IHVwIGNvbG91ci1zaGlmdGVkIGltYWdlc1xyXG4gICAgICAgICAgbGV0IGNvbG91ck5hbWVzID0gWyAnIzAwZicsICcjZjAwJywgJyMwZjAnIF1cclxuICAgICAgICAgIGxldCBjb2xvdXJzID0gW11cclxuXHJcblxyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvdXJOYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcclxuXHJcbiAgICAgICAgICAgIC8vIERyYXcgY29sb3VyZWQgYmFja2dyb3VuZFxyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJ1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3VyTmFtZXNbaV1cclxuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcclxuXHJcbiAgICAgICAgICAgIC8vIE1hc2sgdG8gc291cmNlIGltYWdlXHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24tYXRvcCdcclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShkb21JbWFnZSwgMCwgMClcclxuXHJcbiAgICAgICAgICAgIC8vIE11bHRpcGx5IHdpdGggc291cmNlIGltYWdlIHRvIGNyZWF0ZSBhbHBoYSBjaGFubmVsXHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnbXVsdGlwbHknXHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZG9tSW1hZ2UsIDAsIDApXHJcblxyXG4gICAgICAgICAgICBsZXQgaW1nID0gbmV3IEltYWdlKClcclxuICAgICAgICAgICAgaW1nLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cydcclxuICAgICAgICAgICAgaW1nLnNyYyA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpXHJcblxyXG4gICAgICAgICAgICBjb2xvdXJzLnB1c2goaW1nKVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIFJlc2V0IGNvbXAgbW9kZVxyXG4gICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3ZlcidcclxuXHJcbiAgICAgICAgICAvLyBHZXQgY2FudmFzIGJvdW5kc1xyXG4gICAgICAgICAgbGV0IGNhbnZCb3VuZHMgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcclxuXHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBydW50aW1lOiAtMSxcclxuICAgICAgICAgICAgY29sb3VyczogY29sb3VycyxcclxuICAgICAgICAgICAgbW91c2VFZmZlY3Q6IHtcclxuICAgICAgICAgICAgICB4OiBjYW52Qm91bmRzLmxlZnQgKyBjYW52YXMud2lkdGggLyAyLFxyXG4gICAgICAgICAgICAgIHk6IGNhbnZCb3VuZHMudG9wICsgY2FudmFzLmhlaWdodCAvIDIsXHJcbiAgICAgICAgICAgICAgbGVuOiAwLFxyXG4gICAgICAgICAgICAgIG1heExlbjogMTAsXHJcbiAgICAgICAgICAgICAgZGlyOiAwLFxyXG4gICAgICAgICAgICAgIHNwZDogMC4xXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGFuaW1hdGU6IChjYW52YXMsIGRvbUltYWdlLCBzZXR1cERhdGEsIHByb2dyZXNzKSA9PiB7XHJcbiAgICAgICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcclxuICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG5cclxuICAgICAgICAgIC8qIEFOSU1BVElPTiBDT0RFICovXHJcblxyXG4gICAgICAgICAgbGV0IGNhbnZhc1BvcyA9IHtcclxuICAgICAgICAgICAgeDogc2V0dXBEYXRhLm1vdXNlRWZmZWN0LngsXHJcbiAgICAgICAgICAgIHk6IHNldHVwRGF0YS5tb3VzZUVmZmVjdC55XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbGV0IHNwZCA9IHNldHVwRGF0YS5tb3VzZUVmZmVjdC5zcGRcclxuXHJcbiAgICAgICAgICAvKiBFRkZFQ1QgRElSRUNUSU9OICovXHJcblxyXG4gICAgICAgICAgbGV0IGRpciA9IHNldHVwRGF0YS5tb3VzZUVmZmVjdC5kaXJcclxuICAgICAgICAgIGxldCBkaXJUYXJnZXQgPSBUcmlnLmFuZ2xlQmV0d2VlbihjYW52YXNQb3MsIE1PVVNFLnBvcylcclxuXHJcbiAgICAgICAgICAvLyBEaWZmZXJlbmNlIGJldHdlZW4gYW5nbGVzXHJcbiAgICAgICAgICBsZXQgZGlyRGlmZiA9IGRpclRhcmdldCAtIGRpclxyXG4gICAgICAgICAgZGlyRGlmZiA9IE1hdGguYXRhbjIoTWF0aC5zaW4oZGlyRGlmZiksIE1hdGguY29zKGRpckRpZmYpKVxyXG5cclxuICAgICAgICAgIC8vIE1vdmUgdG93YXJkcyB0YXJnZXQgYW5nbGVcclxuICAgICAgICAgIGRpciArPSBkaXJEaWZmICogc3BkXHJcbiAgICAgICAgICBsZXQgd3JhcCA9IE1hdGguUEkgKiAyXHJcbiAgICAgICAgICB3aGlsZSAoZGlyID4gd3JhcCkgeyBkaXIgLT0gd3JhcCB9XHJcbiAgICAgICAgICB3aGlsZSAoZGlyIDwgMCkgeyBkaXIgKz0gd3JhcCB9XHJcblxyXG4gICAgICAgICAgLyogRUZGRUNUIE1BR05JVFVERSAqL1xyXG5cclxuICAgICAgICAgIC8vIE1vdXNlIHBvcyBhcyBwZXJjZW50YWdlXHJcbiAgICAgICAgICBsZXQgbW91c2VNYXggPSBUcmlnLmRpc3RhbmNlQmV0d2VlbihjYW52YXNQb3MsIHsgeDogMCwgeTogMH0pXHJcbiAgICAgICAgICBsZXQgbW91c2VDdXJyZW50ID0gVHJpZy5kaXN0YW5jZUJldHdlZW4oY2FudmFzUG9zLCBNT1VTRS5wb3MpXHJcblxyXG4gICAgICAgICAgLy8gTW92ZSBsZW5ndGggdG93YXJkcyB0YXJnZXRcclxuICAgICAgICAgIGxldCBsZW4gPSBzZXR1cERhdGEubW91c2VFZmZlY3QubGVuXHJcbiAgICAgICAgICBsZXQgdGFyZ2V0TGVuID0gKG1vdXNlQ3VycmVudCAvIG1vdXNlTWF4KSAqIHNldHVwRGF0YS5tb3VzZUVmZmVjdC5tYXhMZW5cclxuICAgICAgICAgIGxldCBsZW5EaWZmID0gdGFyZ2V0TGVuIC0gbGVuXHJcbiAgICAgICAgICBsZW4gKz0gbGVuRGlmZiAqIHNwZFxyXG5cclxuICAgICAgICAgIC8vIFN0b3JlIGN1cnJlbnQgZGlyIGZvciBuZXh0IGFuaW1hdGlvbiBsb29wXHJcbiAgICAgICAgICBzZXR1cERhdGEubW91c2VFZmZlY3QuZGlyID0gZGlyXHJcbiAgICAgICAgICBzZXR1cERhdGEubW91c2VFZmZlY3QubGVuID0gbGVuXHJcblxyXG4gICAgICAgICAgLy8gRHJhdyB0aHJlZSBSR0Igc2hpZnRlZCBpbWFnZXNhXHJcblxyXG4gICAgICAgICAgLy8gU2NhbGUgaXMgKG1heExlbiAqIDIpcHggc21hbGxlciB0aGFuIGNhbnZhcyBzaXplXHJcbiAgICAgICAgICBsZXQgc21hbGxlc3RBeGlzID0gTWF0aC5taW4oY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG4gICAgICAgICAgbGV0IHRhcmdldFNpemUgPSBzbWFsbGVzdEF4aXMgLSBzZXR1cERhdGEubW91c2VFZmZlY3QubWF4TGVuICogMlxyXG4gICAgICAgICAgbGV0IHNjYWxlID0gdGFyZ2V0U2l6ZSAvIHNtYWxsZXN0QXhpc1xyXG5cclxuICAgICAgICAgIC8vIERyYXcgdGhlIGltYWdlcyBvZmZzZXQgY29ycmVjdGx5XHJcbiAgICAgICAgICBsZXQgc2NhbGVXID0gY2FudmFzLndpZHRoICogc2NhbGVcclxuICAgICAgICAgIGxldCBzY2FsZUggPSBjYW52YXMuaGVpZ2h0ICogc2NhbGVcclxuICAgICAgICAgIGxldCB4T3JpZ2luID0gKGNhbnZhcy53aWR0aCAtIHNjYWxlVykgLyAyXHJcbiAgICAgICAgICBsZXQgeU9yaWdpbiA9IChjYW52YXMuaGVpZ2h0IC0gc2NhbGVIKSAvIDJcclxuICAgICAgICAgIGxldCBkeCA9IFRyaWcubGVuZ3RoZGlyWChsZW4sIGRpcilcclxuICAgICAgICAgIGxldCBkeSA9IFRyaWcubGVuZ3RoZGlyWShsZW4sIGRpcilcclxuXHJcbiAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2xpZ2h0ZW4nXHJcblxyXG4gICAgICAgICAgbGV0IG4gPSBzZXR1cERhdGEuY29sb3Vycy5sZW5ndGhcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBvZmZzZXQgPSBpIC0gMVxyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKHNldHVwRGF0YS5jb2xvdXJzW2ldLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQsIHhPcmlnaW4gKyBkeCAqIG9mZnNldCwgeU9yaWdpbiArIGR5ICogb2Zmc2V0LCBzY2FsZVcsIHNjYWxlSClcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgZGlzcnVwdGlvblR5cGVzICgpIHtcclxuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLkRJU1JVUFRJT05TKVxyXG4gIH1cclxuXHJcbiAgZ2V0RGlzcnVwdGlvbiAoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLmRpc3J1cHRhYmxlc1tpZF1cclxuICB9XHJcblxyXG4gIHJlbW92ZURpc3J1cHRpb24gKGlkKSB7XHJcbiAgICBsZXQgZGlzcnVwdGlvbiA9IHRoaXMuZGlzcnVwdGFibGVzW2lkXVxyXG5cclxuICAgIC8vIFN0b3AgYW5pbWF0aW9uXHJcbiAgICBkaXNydXB0aW9uLmRpc3J1cHRpb25BbmltLnN0b3AoKVxyXG5cclxuICAgIC8vIFJlLXNob3cgc291cmNlIGVsZW1lbnRcclxuICAgIGRpc3J1cHRpb24uZWxlbS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnXHJcblxyXG4gICAgLy8gUmVtb3ZlIGRpc3J1cHRpb24gY2FudmFzXHJcbiAgICBkaXNydXB0aW9uLmNhbnZhcy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGRpc3J1cHRpb24uY2FudmFzKVxyXG5cclxuICAgIC8vIERlbGV0ZSBkaXNydXB0aW9uXHJcbiAgICBkZWxldGUgdGhpcy5kaXNydXB0YWJsZXNbaWRdXHJcbiAgfVxyXG5cclxuICBmb3JjZVN0b3BEaXNydXB0aW9ucyAoKSB7XHJcbiAgICBPYmplY3Qua2V5cyh0aGlzLmRpc3J1cHRhYmxlcykuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICBsZXQgZCA9IHRoaXMuZGlzcnVwdGFibGVzW2tleV1cclxuICAgICAgdGhpcy5yZW1vdmVEaXNydXB0aW9uKGQuaWQpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyogRElTUlVQVElPTiBGVU5DVElPTlMgKi9cclxuXHJcbiAgYWRkRGlzcnVwdGlvbnMgKCkge1xyXG4gICAgbGV0IG1lID0gdGhpc1xyXG5cclxuICAgIC8vIFNjYW4gdGhyb3VnaCBET00gYW5kIGZpbmQgZGlzcnVwdGFibGUgZWxlbWVudHNcclxuICAgIGxldCBkaXNydXB0YWJsZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUodGhpcy50YXJnZXRDbGFzcykpXHJcblxyXG4gICAgbGV0IGNhbnZhc0xvYWRzID0gZGlzcnVwdGFibGVzLm1hcChlbGVtID0+IHtcclxuICAgICAgLy8gRGV0ZXJtaW5lIGRpc3J1cHRpb24gdHlwZSAtIHBpY2sgZmlyc3QgZm91bmQgY2xhc3NcclxuICAgICAgbGV0IGRpc3J1cHRpb25UeXBlID0gJ2RzcnB0LWhvcml6b250YWwnXHJcbiAgICAgIGZvciAobGV0IGFuaW0gb2YgdGhpcy5kaXNydXB0aW9uVHlwZXMpIHtcclxuICAgICAgICBpZiAoZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoYW5pbSkpIHtcclxuICAgICAgICAgIGRpc3J1cHRpb25UeXBlID0gYW5pbVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBkaXNydXB0aW9uID0ge1xyXG4gICAgICAgIGlkOiB0aGlzLmRpc3J1cHRpb25Db3VudGVyKyssXHJcbiAgICAgICAgZWxlbTogZWxlbSxcclxuICAgICAgICBkaXNydXB0aW9uVHlwZTogZGlzcnVwdGlvblR5cGUsXHJcbiAgICAgICAgbG9vcDogZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2xvb3AnKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVc2UgaHRtbDJjYW52YXMgdG8gY3JlYXRlIGNhbnZhcyBhbmQgaW1hZ2VcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBodG1sMmNhbnZhcyhlbGVtLCB7XHJcbiAgICAgICAgICBsZXR0ZXJSZW5kZXJpbmc6IHRydWUsXHJcbiAgICAgICAgICBvbnJlbmRlcmVkOiBjYW52YXMgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaW1nID0gbmV3IEltYWdlKClcclxuICAgICAgICAgICAgaW1nLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cydcclxuICAgICAgICAgICAgaW1nLnNyYyA9IGNhbnZhcy50b0RhdGFVUkwoJ2RhdGEvaW1hZ2UnKVxyXG5cclxuICAgICAgICAgICAgZGlzcnVwdGlvbi5pbWFnZSA9IGltZ1xyXG4gICAgICAgICAgICBkaXNydXB0aW9uLmNhbnZhcyA9IGNhbnZhc1xyXG5cclxuICAgICAgICAgICAgbWUuZGlzcnVwdGFibGVzW2Rpc3J1cHRpb24uaWRdID0gZGlzcnVwdGlvblxyXG5cclxuICAgICAgICAgICAgLy8gUG9zaXRpb24gY2FudmFzXHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25DYW52YXMoZWxlbSwgZGlzcnVwdGlvbi5jYW52YXMpXHJcbiAgICAgICAgICAgIGVsZW0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZGlzcnVwdGlvbi5jYW52YXMsIGVsZW0pXHJcbiAgICAgICAgICAgIHJlc29sdmUoKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIFByb21pc2UuYWxsKGNhbnZhc0xvYWRzKS50aGVuKCgpID0+IHtcclxuICAgICAgbWUudHJpZ2dlckRpc3J1cHQoKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHBvc2l0aW9uQ2FudmFzIChlbGVtLCBjYW52YXMpIHtcclxuICAgIC8vIEdldCBlbGVtZW50IGJvdW5kc1xyXG4gICAgbGV0IGJvdW5kcyA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcclxuICAgIGxldCBwYXJlbnRCb3VuZHMgPSBlbGVtLnBhcmVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcclxuXHJcbiAgICAvLyBQb3NpdGlvbiB0aGUgY2FudmFzXHJcbiAgICBsZXQgc2Nyb2xsID0gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3BcclxuICAgIGNhbnZhcy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSdcclxuICAgIGNhbnZhcy5zdHlsZS50b3AgPSBgJHtib3VuZHMudG9wICsgc2Nyb2xsIC0gcGFyZW50Qm91bmRzLnRvcH1weGBcclxuICAgIGNhbnZhcy5zdHlsZS5sZWZ0ID0gYCR7Ym91bmRzLmxlZnQgLSBwYXJlbnRCb3VuZHMubGVmdH1weGBcclxuICB9XHJcblxyXG4gIHRyaWdnZXJEaXNydXB0ICgpIHtcclxuICAgIE9iamVjdC5rZXlzKHRoaXMuZGlzcnVwdGFibGVzKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgIGxldCBkID0gdGhpcy5kaXNydXB0YWJsZXNba2V5XVxyXG4gICAgICBsZXQgZGlzcnVwdGlvbiA9IHRoaXMuRElTUlVQVElPTlNbZC5kaXNydXB0aW9uVHlwZV1cclxuXHJcbiAgICAgIC8vIFJ1biBzZXR1cFxyXG4gICAgICBsZXQgc2V0dXBEYXRhID0gZGlzcnVwdGlvbi5zZXR1cChkLmNhbnZhcywgZC5pbWFnZSwgdGhpcy5HRU5FUkFUT1JTKVxyXG4gICAgICBsZXQgYW5pbUZ1bmN0aW9uID0gZGlzcnVwdGlvbi5hbmltYXRlXHJcblxyXG4gICAgICAvLyBIaWRlIG9yaWdpbmFsIGVsZW1lbnRcclxuICAgICAgZC5lbGVtLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJ1xyXG5cclxuICAgICAgLy8gRG8gYW5pbWF0aW9uXHJcbiAgICAgIGQuZGlzcnVwdGlvbkFuaW0gPSBuZXcgRGlzcnVwdEFuaW1hdGlvbih0aGlzLCBkLmlkLCBzZXR1cERhdGEsIGFuaW1GdW5jdGlvbiwgZC5sb29wKVxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuXHJcbmNsYXNzIERpc3J1cHRBbmltYXRpb24ge1xyXG4gIGNvbnN0cnVjdG9yIChwYXJlbnQsIGRpc3J1cHRpb25JZCwgc2V0dXBEYXRhLCBhbmltRnVuY3Rpb24sIGxvb3ApIHtcclxuICAgIHRoaXMucGFyZW50ID0gcGFyZW50XHJcbiAgICB0aGlzLmRhdGEgPSBwYXJlbnQuZ2V0RGlzcnVwdGlvbihkaXNydXB0aW9uSWQpXHJcbiAgICB0aGlzLnNldHVwRGF0YSA9IHNldHVwRGF0YVxyXG4gICAgdGhpcy5hbmltRnVuY3Rpb24gPSBhbmltRnVuY3Rpb25cclxuICAgIHRoaXMubG9vcCA9IGxvb3BcclxuXHJcbiAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlXHJcblxyXG4gICAgdGhpcy5hbmltU3RhcnQgPSBudWxsXHJcbiAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5kb0FuaW1hdGlvbi5iaW5kKHRoaXMpKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGFuaW1hdGlvbkZyYW1lICgpIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRGcmFtZVxyXG4gIH1cclxuXHJcbiAgc3RvcCAoKSB7XHJcbiAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5jdXJyZW50RnJhbWUpXHJcbiAgfVxyXG5cclxuICBkb0FuaW1hdGlvbiAodGltZXN0YW1wKSB7XHJcbiAgICBpZiAodGhpcy5hbmltU3RhcnQgPT09IG51bGwpIHtcclxuICAgICAgdGhpcy5hbmltU3RhcnQgPSB0aW1lc3RhbXBcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZXRlcm1pbmUgYW5pbWF0aW9uIHByb2dyZXNzIChmcm9tIDAgdG8gMSlcclxuICAgIGxldCBwcm9ncmVzcyA9ICh0aW1lc3RhbXAgLSB0aGlzLmFuaW1TdGFydCkgLyB0aGlzLnNldHVwRGF0YS5ydW50aW1lXHJcblxyXG4gICAgLy8gUnVuIGN1c3RvbSBhbmltYXRpb24gZnVuY3Rpb25cclxuICAgIHRoaXMuYW5pbUZ1bmN0aW9uKHRoaXMuZGF0YS5jYW52YXMsIHRoaXMuZGF0YS5pbWFnZSwgdGhpcy5zZXR1cERhdGEsIHByb2dyZXNzKVxyXG5cclxuICAgIGlmIChwcm9ncmVzcyA8IDEgfHwgdGhpcy5sb29wKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudEZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmRvQW5pbWF0aW9uLmJpbmQodGhpcykpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnN0b3AoKVxyXG5cclxuICAgICAgLy8gRGVsZXRlIHNlbGYgZnJvbSBwYXJlbnRcclxuICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlRGlzcnVwdGlvbih0aGlzLmRhdGEuaWQpXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyBBdXRvLWNyZWF0ZSBnbG9iYWwgaW5zdGFuY2UgYW5kIHRyaWdnZXIgZGlzcnVwdGlvbnNcclxud2luZG93LkRJU1JVUFQgPSBuZXcgRElTUlVQVCgpXHJcblxyXG4vLyBUT0RPOiBhZGQgYWJpbGl0eSB0byB3YWl0IHVudGlsIHJldmVhbGVkIGJ5IHNjcm9sbFxyXG53aW5kb3cuRElTUlVQVC5hZGREaXNydXB0aW9ucygpXHJcbiIsIi8qXG4gIGh0bWwyY2FudmFzIDAuNS4wLWJldGEzIDxodHRwOi8vaHRtbDJjYW52YXMuaGVydHplbi5jb20+XG4gIENvcHlyaWdodCAoYykgMjAxNiBOaWtsYXMgdm9uIEhlcnR6ZW5cblxuICBSZWxlYXNlZCB1bmRlciAgTGljZW5zZVxuKi9cbiFmdW5jdGlvbihlKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIG47XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz9uPXdpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP249Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiYobj1zZWxmKSxuLmh0bWwyY2FudmFzPWUoKX19KGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIGZ1bmN0aW9uIG4oZSxmLG8pe2Z1bmN0aW9uIGQodCxsKXtpZighZlt0XSl7aWYoIWVbdF0pe3ZhciBzPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWwmJnMpcmV0dXJuIHModCwhMCk7aWYoaSlyZXR1cm4gaSh0LCEwKTt2YXIgdT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK3QrXCInXCIpO3Rocm93IHUuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIix1fXZhciBhPWZbdF09e2V4cG9ydHM6e319O2VbdF1bMF0uY2FsbChhLmV4cG9ydHMsZnVuY3Rpb24obil7dmFyIGY9ZVt0XVsxXVtuXTtyZXR1cm4gZChmP2Y6bil9LGEsYS5leHBvcnRzLG4sZSxmLG8pfXJldHVybiBmW3RdLmV4cG9ydHN9Zm9yKHZhciBpPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsdD0wO3Q8by5sZW5ndGg7dCsrKWQob1t0XSk7cmV0dXJuIGR9KHsxOltmdW5jdGlvbihuLGYsbyl7KGZ1bmN0aW9uKG4peyFmdW5jdGlvbihkKXtmdW5jdGlvbiBpKGUpe3Rocm93IFJhbmdlRXJyb3IoSVtlXSl9ZnVuY3Rpb24gdChlLG4pe2Zvcih2YXIgZj1lLmxlbmd0aDtmLS07KWVbZl09bihlW2ZdKTtyZXR1cm4gZX1mdW5jdGlvbiBsKGUsbil7cmV0dXJuIHQoZS5zcGxpdChIKSxuKS5qb2luKFwiLlwiKX1mdW5jdGlvbiBzKGUpe2Zvcih2YXIgbixmLG89W10sZD0wLGk9ZS5sZW5ndGg7aT5kOyluPWUuY2hhckNvZGVBdChkKyspLG4+PTU1Mjk2JiY1NjMxOT49biYmaT5kPyhmPWUuY2hhckNvZGVBdChkKyspLDU2MzIwPT0oNjQ1MTImZik/by5wdXNoKCgoMTAyMyZuKTw8MTApKygxMDIzJmYpKzY1NTM2KTooby5wdXNoKG4pLGQtLSkpOm8ucHVzaChuKTtyZXR1cm4gb31mdW5jdGlvbiB1KGUpe3JldHVybiB0KGUsZnVuY3Rpb24oZSl7dmFyIG49XCJcIjtyZXR1cm4gZT42NTUzNSYmKGUtPTY1NTM2LG4rPUwoZT4+PjEwJjEwMjN8NTUyOTYpLGU9NTYzMjB8MTAyMyZlKSxuKz1MKGUpfSkuam9pbihcIlwiKX1mdW5jdGlvbiBhKGUpe3JldHVybiAxMD5lLTQ4P2UtMjI6MjY+ZS02NT9lLTY1OjI2PmUtOTc/ZS05NzprfWZ1bmN0aW9uIHAoZSxuKXtyZXR1cm4gZSsyMis3NSooMjY+ZSktKCgwIT1uKTw8NSl9ZnVuY3Rpb24gYyhlLG4sZil7dmFyIG89MDtmb3IoZT1mP0soZS9CKTplPj4xLGUrPUsoZS9uKTtlPkoqej4+MTtvKz1rKWU9SyhlL0opO3JldHVybiBLKG8rKEorMSkqZS8oZStBKSl9ZnVuY3Rpb24geShlKXt2YXIgbixmLG8sZCx0LGwscyxwLHksbSxyPVtdLHY9ZS5sZW5ndGgsdz0wLGI9RCxnPUM7Zm9yKGY9ZS5sYXN0SW5kZXhPZihFKSwwPmYmJihmPTApLG89MDtmPm87KytvKWUuY2hhckNvZGVBdChvKT49MTI4JiZpKFwibm90LWJhc2ljXCIpLHIucHVzaChlLmNoYXJDb2RlQXQobykpO2ZvcihkPWY+MD9mKzE6MDt2PmQ7KXtmb3IodD13LGw9MSxzPWs7ZD49diYmaShcImludmFsaWQtaW5wdXRcIikscD1hKGUuY2hhckNvZGVBdChkKyspKSwocD49a3x8cD5LKChqLXcpL2wpKSYmaShcIm92ZXJmbG93XCIpLHcrPXAqbCx5PWc+PXM/cTpzPj1nK3o/ejpzLWcsISh5PnApO3MrPWspbT1rLXksbD5LKGovbSkmJmkoXCJvdmVyZmxvd1wiKSxsKj1tO249ci5sZW5ndGgrMSxnPWMody10LG4sMD09dCksSyh3L24pPmotYiYmaShcIm92ZXJmbG93XCIpLGIrPUsody9uKSx3JT1uLHIuc3BsaWNlKHcrKywwLGIpfXJldHVybiB1KHIpfWZ1bmN0aW9uIG0oZSl7dmFyIG4sZixvLGQsdCxsLHUsYSx5LG0scix2LHcsYixnLGg9W107Zm9yKGU9cyhlKSx2PWUubGVuZ3RoLG49RCxmPTAsdD1DLGw9MDt2Pmw7KytsKXI9ZVtsXSwxMjg+ciYmaC5wdXNoKEwocikpO2ZvcihvPWQ9aC5sZW5ndGgsZCYmaC5wdXNoKEUpO3Y+bzspe2Zvcih1PWosbD0wO3Y+bDsrK2wpcj1lW2xdLHI+PW4mJnU+ciYmKHU9cik7Zm9yKHc9bysxLHUtbj5LKChqLWYpL3cpJiZpKFwib3ZlcmZsb3dcIiksZis9KHUtbikqdyxuPXUsbD0wO3Y+bDsrK2wpaWYocj1lW2xdLG4+ciYmKytmPmomJmkoXCJvdmVyZmxvd1wiKSxyPT1uKXtmb3IoYT1mLHk9azttPXQ+PXk/cTp5Pj10K3o/ejp5LXQsIShtPmEpO3krPWspZz1hLW0sYj1rLW0saC5wdXNoKEwocChtK2clYiwwKSkpLGE9SyhnL2IpO2gucHVzaChMKHAoYSwwKSkpLHQ9YyhmLHcsbz09ZCksZj0wLCsrb30rK2YsKytufXJldHVybiBoLmpvaW4oXCJcIil9ZnVuY3Rpb24gcihlKXtyZXR1cm4gbChlLGZ1bmN0aW9uKGUpe3JldHVybiBGLnRlc3QoZSk/eShlLnNsaWNlKDQpLnRvTG93ZXJDYXNlKCkpOmV9KX1mdW5jdGlvbiB2KGUpe3JldHVybiBsKGUsZnVuY3Rpb24oZSl7cmV0dXJuIEcudGVzdChlKT9cInhuLS1cIittKGUpOmV9KX12YXIgdz1cIm9iamVjdFwiPT10eXBlb2YgbyYmbyxiPVwib2JqZWN0XCI9PXR5cGVvZiBmJiZmJiZmLmV4cG9ydHM9PXcmJmYsZz1cIm9iamVjdFwiPT10eXBlb2YgbiYmbjsoZy5nbG9iYWw9PT1nfHxnLndpbmRvdz09PWcpJiYoZD1nKTt2YXIgaCx4LGo9MjE0NzQ4MzY0NyxrPTM2LHE9MSx6PTI2LEE9MzgsQj03MDAsQz03MixEPTEyOCxFPVwiLVwiLEY9L154bi0tLyxHPS9bXiAtfl0vLEg9L1xceDJFfFxcdTMwMDJ8XFx1RkYwRXxcXHVGRjYxL2csST17b3ZlcmZsb3c6XCJPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2Vzc1wiLFwibm90LWJhc2ljXCI6XCJJbGxlZ2FsIGlucHV0ID49IDB4ODAgKG5vdCBhIGJhc2ljIGNvZGUgcG9pbnQpXCIsXCJpbnZhbGlkLWlucHV0XCI6XCJJbnZhbGlkIGlucHV0XCJ9LEo9ay1xLEs9TWF0aC5mbG9vcixMPVN0cmluZy5mcm9tQ2hhckNvZGU7aWYoaD17dmVyc2lvbjpcIjEuMi40XCIsdWNzMjp7ZGVjb2RlOnMsZW5jb2RlOnV9LGRlY29kZTp5LGVuY29kZTptLHRvQVNDSUk6dix0b1VuaWNvZGU6cn0sXCJmdW5jdGlvblwiPT10eXBlb2YgZSYmXCJvYmplY3RcIj09dHlwZW9mIGUuYW1kJiZlLmFtZCllKFwicHVueWNvZGVcIixmdW5jdGlvbigpe3JldHVybiBofSk7ZWxzZSBpZih3JiYhdy5ub2RlVHlwZSlpZihiKWIuZXhwb3J0cz1oO2Vsc2UgZm9yKHggaW4gaCloLmhhc093blByb3BlcnR5KHgpJiYod1t4XT1oW3hdKTtlbHNlIGQucHVueWNvZGU9aH0odGhpcyl9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHt9XSwyOltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSxuLGYpeyFlLmRlZmF1bHRWaWV3fHxuPT09ZS5kZWZhdWx0Vmlldy5wYWdlWE9mZnNldCYmZj09PWUuZGVmYXVsdFZpZXcucGFnZVlPZmZzZXR8fGUuZGVmYXVsdFZpZXcuc2Nyb2xsVG8obixmKX1mdW5jdGlvbiBvKGUsbil7dHJ5e24mJihuLndpZHRoPWUud2lkdGgsbi5oZWlnaHQ9ZS5oZWlnaHQsbi5nZXRDb250ZXh0KFwiMmRcIikucHV0SW1hZ2VEYXRhKGUuZ2V0Q29udGV4dChcIjJkXCIpLmdldEltYWdlRGF0YSgwLDAsZS53aWR0aCxlLmhlaWdodCksMCwwKSl9Y2F0Y2goZil7dChcIlVuYWJsZSB0byBjb3B5IGNhbnZhcyBjb250ZW50IGZyb21cIixlLGYpfX1mdW5jdGlvbiBkKGUsbil7Zm9yKHZhciBmPTM9PT1lLm5vZGVUeXBlP2RvY3VtZW50LmNyZWF0ZVRleHROb2RlKGUubm9kZVZhbHVlKTplLmNsb25lTm9kZSghMSksaT1lLmZpcnN0Q2hpbGQ7aTspKG49PT0hMHx8MSE9PWkubm9kZVR5cGV8fFwiU0NSSVBUXCIhPT1pLm5vZGVOYW1lKSYmZi5hcHBlbmRDaGlsZChkKGksbikpLGk9aS5uZXh0U2libGluZztyZXR1cm4gMT09PWUubm9kZVR5cGUmJihmLl9zY3JvbGxUb3A9ZS5zY3JvbGxUb3AsZi5fc2Nyb2xsTGVmdD1lLnNjcm9sbExlZnQsXCJDQU5WQVNcIj09PWUubm9kZU5hbWU/byhlLGYpOihcIlRFWFRBUkVBXCI9PT1lLm5vZGVOYW1lfHxcIlNFTEVDVFwiPT09ZS5ub2RlTmFtZSkmJihmLnZhbHVlPWUudmFsdWUpKSxmfWZ1bmN0aW9uIGkoZSl7aWYoMT09PWUubm9kZVR5cGUpe2Uuc2Nyb2xsVG9wPWUuX3Njcm9sbFRvcCxlLnNjcm9sbExlZnQ9ZS5fc2Nyb2xsTGVmdDtmb3IodmFyIG49ZS5maXJzdENoaWxkO247KWkobiksbj1uLm5leHRTaWJsaW5nfX12YXIgdD1lKFwiLi9sb2dcIik7bi5leHBvcnRzPWZ1bmN0aW9uKGUsbixvLHQsbCxzLHUpe3ZhciBhPWQoZS5kb2N1bWVudEVsZW1lbnQsbC5qYXZhc2NyaXB0RW5hYmxlZCkscD1uLmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7cmV0dXJuIHAuY2xhc3NOYW1lPVwiaHRtbDJjYW52YXMtY29udGFpbmVyXCIscC5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCIscC5zdHlsZS5wb3NpdGlvbj1cImZpeGVkXCIscC5zdHlsZS5sZWZ0PVwiLTEwMDAwcHhcIixwLnN0eWxlLnRvcD1cIjBweFwiLHAuc3R5bGUuYm9yZGVyPVwiMFwiLHAud2lkdGg9byxwLmhlaWdodD10LHAuc2Nyb2xsaW5nPVwibm9cIixuLmJvZHkuYXBwZW5kQ2hpbGQocCksbmV3IFByb21pc2UoZnVuY3Rpb24obil7dmFyIG89cC5jb250ZW50V2luZG93LmRvY3VtZW50O3AuY29udGVudFdpbmRvdy5vbmxvYWQ9cC5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgZT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe28uYm9keS5jaGlsZE5vZGVzLmxlbmd0aD4wJiYoaShvLmRvY3VtZW50RWxlbWVudCksY2xlYXJJbnRlcnZhbChlKSxcInZpZXdcIj09PWwudHlwZSYmKHAuY29udGVudFdpbmRvdy5zY3JvbGxUbyhzLHUpLCEvKGlQYWR8aVBob25lfGlQb2QpL2cudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KXx8cC5jb250ZW50V2luZG93LnNjcm9sbFk9PT11JiZwLmNvbnRlbnRXaW5kb3cuc2Nyb2xsWD09PXN8fChvLmRvY3VtZW50RWxlbWVudC5zdHlsZS50b3A9LXUrXCJweFwiLG8uZG9jdW1lbnRFbGVtZW50LnN0eWxlLmxlZnQ9LXMrXCJweFwiLG8uZG9jdW1lbnRFbGVtZW50LnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIikpLG4ocCkpfSw1MCl9LG8ub3BlbigpLG8ud3JpdGUoXCI8IURPQ1RZUEUgaHRtbD48aHRtbD48L2h0bWw+XCIpLGYoZSxzLHUpLG8ucmVwbGFjZUNoaWxkKG8uYWRvcHROb2RlKGEpLG8uZG9jdW1lbnRFbGVtZW50KSxvLmNsb3NlKCl9KX19LHtcIi4vbG9nXCI6MTN9XSwzOltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSl7dGhpcy5yPTAsdGhpcy5nPTAsdGhpcy5iPTAsdGhpcy5hPW51bGw7dGhpcy5mcm9tQXJyYXkoZSl8fHRoaXMubmFtZWRDb2xvcihlKXx8dGhpcy5yZ2IoZSl8fHRoaXMucmdiYShlKXx8dGhpcy5oZXg2KGUpfHx0aGlzLmhleDMoZSl9Zi5wcm90b3R5cGUuZGFya2VuPWZ1bmN0aW9uKGUpe3ZhciBuPTEtZTtyZXR1cm4gbmV3IGYoW01hdGgucm91bmQodGhpcy5yKm4pLE1hdGgucm91bmQodGhpcy5nKm4pLE1hdGgucm91bmQodGhpcy5iKm4pLHRoaXMuYV0pfSxmLnByb3RvdHlwZS5pc1RyYW5zcGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmF9LGYucHJvdG90eXBlLmlzQmxhY2s9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuciYmMD09PXRoaXMuZyYmMD09PXRoaXMuYn0sZi5wcm90b3R5cGUuZnJvbUFycmF5PWZ1bmN0aW9uKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpJiYodGhpcy5yPU1hdGgubWluKGVbMF0sMjU1KSx0aGlzLmc9TWF0aC5taW4oZVsxXSwyNTUpLHRoaXMuYj1NYXRoLm1pbihlWzJdLDI1NSksZS5sZW5ndGg+MyYmKHRoaXMuYT1lWzNdKSksQXJyYXkuaXNBcnJheShlKX07dmFyIG89L14jKFthLWYwLTldezN9KSQvaTtmLnByb3RvdHlwZS5oZXgzPWZ1bmN0aW9uKGUpe3ZhciBuPW51bGw7cmV0dXJuIG51bGwhPT0obj1lLm1hdGNoKG8pKSYmKHRoaXMucj1wYXJzZUludChuWzFdWzBdK25bMV1bMF0sMTYpLHRoaXMuZz1wYXJzZUludChuWzFdWzFdK25bMV1bMV0sMTYpLHRoaXMuYj1wYXJzZUludChuWzFdWzJdK25bMV1bMl0sMTYpKSxudWxsIT09bn07dmFyIGQ9L14jKFthLWYwLTldezZ9KSQvaTtmLnByb3RvdHlwZS5oZXg2PWZ1bmN0aW9uKGUpe3ZhciBuPW51bGw7cmV0dXJuIG51bGwhPT0obj1lLm1hdGNoKGQpKSYmKHRoaXMucj1wYXJzZUludChuWzFdLnN1YnN0cmluZygwLDIpLDE2KSx0aGlzLmc9cGFyc2VJbnQoblsxXS5zdWJzdHJpbmcoMiw0KSwxNiksdGhpcy5iPXBhcnNlSW50KG5bMV0uc3Vic3RyaW5nKDQsNiksMTYpKSxudWxsIT09bn07dmFyIGk9L15yZ2JcXChcXHMqKFxcZHsxLDN9KVxccyosXFxzKihcXGR7MSwzfSlcXHMqLFxccyooXFxkezEsM30pXFxzKlxcKSQvO2YucHJvdG90eXBlLnJnYj1mdW5jdGlvbihlKXt2YXIgbj1udWxsO3JldHVybiBudWxsIT09KG49ZS5tYXRjaChpKSkmJih0aGlzLnI9TnVtYmVyKG5bMV0pLHRoaXMuZz1OdW1iZXIoblsyXSksdGhpcy5iPU51bWJlcihuWzNdKSksbnVsbCE9PW59O3ZhciB0PS9ecmdiYVxcKFxccyooXFxkezEsM30pXFxzKixcXHMqKFxcZHsxLDN9KVxccyosXFxzKihcXGR7MSwzfSlcXHMqLFxccyooXFxkP1xcLj9cXGQrKVxccypcXCkkLztmLnByb3RvdHlwZS5yZ2JhPWZ1bmN0aW9uKGUpe3ZhciBuPW51bGw7cmV0dXJuIG51bGwhPT0obj1lLm1hdGNoKHQpKSYmKHRoaXMucj1OdW1iZXIoblsxXSksdGhpcy5nPU51bWJlcihuWzJdKSx0aGlzLmI9TnVtYmVyKG5bM10pLHRoaXMuYT1OdW1iZXIobls0XSkpLG51bGwhPT1ufSxmLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5hJiYxIT09dGhpcy5hP1wicmdiYShcIitbdGhpcy5yLHRoaXMuZyx0aGlzLmIsdGhpcy5hXS5qb2luKFwiLFwiKStcIilcIjpcInJnYihcIitbdGhpcy5yLHRoaXMuZyx0aGlzLmJdLmpvaW4oXCIsXCIpK1wiKVwifSxmLnByb3RvdHlwZS5uYW1lZENvbG9yPWZ1bmN0aW9uKGUpe2U9ZS50b0xvd2VyQ2FzZSgpO3ZhciBuPWxbZV07aWYobil0aGlzLnI9blswXSx0aGlzLmc9blsxXSx0aGlzLmI9blsyXTtlbHNlIGlmKFwidHJhbnNwYXJlbnRcIj09PWUpcmV0dXJuIHRoaXMucj10aGlzLmc9dGhpcy5iPXRoaXMuYT0wLCEwO3JldHVybiEhbn0sZi5wcm90b3R5cGUuaXNDb2xvcj0hMDt2YXIgbD17YWxpY2VibHVlOlsyNDAsMjQ4LDI1NV0sYW50aXF1ZXdoaXRlOlsyNTAsMjM1LDIxNV0sYXF1YTpbMCwyNTUsMjU1XSxhcXVhbWFyaW5lOlsxMjcsMjU1LDIxMl0sYXp1cmU6WzI0MCwyNTUsMjU1XSxiZWlnZTpbMjQ1LDI0NSwyMjBdLGJpc3F1ZTpbMjU1LDIyOCwxOTZdLGJsYWNrOlswLDAsMF0sYmxhbmNoZWRhbG1vbmQ6WzI1NSwyMzUsMjA1XSxibHVlOlswLDAsMjU1XSxibHVldmlvbGV0OlsxMzgsNDMsMjI2XSxicm93bjpbMTY1LDQyLDQyXSxidXJseXdvb2Q6WzIyMiwxODQsMTM1XSxjYWRldGJsdWU6Wzk1LDE1OCwxNjBdLGNoYXJ0cmV1c2U6WzEyNywyNTUsMF0sY2hvY29sYXRlOlsyMTAsMTA1LDMwXSxjb3JhbDpbMjU1LDEyNyw4MF0sY29ybmZsb3dlcmJsdWU6WzEwMCwxNDksMjM3XSxjb3Juc2lsazpbMjU1LDI0OCwyMjBdLGNyaW1zb246WzIyMCwyMCw2MF0sY3lhbjpbMCwyNTUsMjU1XSxkYXJrYmx1ZTpbMCwwLDEzOV0sZGFya2N5YW46WzAsMTM5LDEzOV0sZGFya2dvbGRlbnJvZDpbMTg0LDEzNCwxMV0sZGFya2dyYXk6WzE2OSwxNjksMTY5XSxkYXJrZ3JlZW46WzAsMTAwLDBdLGRhcmtncmV5OlsxNjksMTY5LDE2OV0sZGFya2toYWtpOlsxODksMTgzLDEwN10sZGFya21hZ2VudGE6WzEzOSwwLDEzOV0sZGFya29saXZlZ3JlZW46Wzg1LDEwNyw0N10sZGFya29yYW5nZTpbMjU1LDE0MCwwXSxkYXJrb3JjaGlkOlsxNTMsNTAsMjA0XSxkYXJrcmVkOlsxMzksMCwwXSxkYXJrc2FsbW9uOlsyMzMsMTUwLDEyMl0sZGFya3NlYWdyZWVuOlsxNDMsMTg4LDE0M10sZGFya3NsYXRlYmx1ZTpbNzIsNjEsMTM5XSxkYXJrc2xhdGVncmF5Ols0Nyw3OSw3OV0sZGFya3NsYXRlZ3JleTpbNDcsNzksNzldLGRhcmt0dXJxdW9pc2U6WzAsMjA2LDIwOV0sZGFya3Zpb2xldDpbMTQ4LDAsMjExXSxkZWVwcGluazpbMjU1LDIwLDE0N10sZGVlcHNreWJsdWU6WzAsMTkxLDI1NV0sZGltZ3JheTpbMTA1LDEwNSwxMDVdLGRpbWdyZXk6WzEwNSwxMDUsMTA1XSxkb2RnZXJibHVlOlszMCwxNDQsMjU1XSxmaXJlYnJpY2s6WzE3OCwzNCwzNF0sZmxvcmFsd2hpdGU6WzI1NSwyNTAsMjQwXSxmb3Jlc3RncmVlbjpbMzQsMTM5LDM0XSxmdWNoc2lhOlsyNTUsMCwyNTVdLGdhaW5zYm9ybzpbMjIwLDIyMCwyMjBdLGdob3N0d2hpdGU6WzI0OCwyNDgsMjU1XSxnb2xkOlsyNTUsMjE1LDBdLGdvbGRlbnJvZDpbMjE4LDE2NSwzMl0sZ3JheTpbMTI4LDEyOCwxMjhdLGdyZWVuOlswLDEyOCwwXSxncmVlbnllbGxvdzpbMTczLDI1NSw0N10sZ3JleTpbMTI4LDEyOCwxMjhdLGhvbmV5ZGV3OlsyNDAsMjU1LDI0MF0saG90cGluazpbMjU1LDEwNSwxODBdLGluZGlhbnJlZDpbMjA1LDkyLDkyXSxpbmRpZ286Wzc1LDAsMTMwXSxpdm9yeTpbMjU1LDI1NSwyNDBdLGtoYWtpOlsyNDAsMjMwLDE0MF0sbGF2ZW5kZXI6WzIzMCwyMzAsMjUwXSxsYXZlbmRlcmJsdXNoOlsyNTUsMjQwLDI0NV0sbGF3bmdyZWVuOlsxMjQsMjUyLDBdLGxlbW9uY2hpZmZvbjpbMjU1LDI1MCwyMDVdLGxpZ2h0Ymx1ZTpbMTczLDIxNiwyMzBdLGxpZ2h0Y29yYWw6WzI0MCwxMjgsMTI4XSxsaWdodGN5YW46WzIyNCwyNTUsMjU1XSxsaWdodGdvbGRlbnJvZHllbGxvdzpbMjUwLDI1MCwyMTBdLGxpZ2h0Z3JheTpbMjExLDIxMSwyMTFdLGxpZ2h0Z3JlZW46WzE0NCwyMzgsMTQ0XSxsaWdodGdyZXk6WzIxMSwyMTEsMjExXSxsaWdodHBpbms6WzI1NSwxODIsMTkzXSxsaWdodHNhbG1vbjpbMjU1LDE2MCwxMjJdLGxpZ2h0c2VhZ3JlZW46WzMyLDE3OCwxNzBdLGxpZ2h0c2t5Ymx1ZTpbMTM1LDIwNiwyNTBdLGxpZ2h0c2xhdGVncmF5OlsxMTksMTM2LDE1M10sbGlnaHRzbGF0ZWdyZXk6WzExOSwxMzYsMTUzXSxsaWdodHN0ZWVsYmx1ZTpbMTc2LDE5NiwyMjJdLGxpZ2h0eWVsbG93OlsyNTUsMjU1LDIyNF0sbGltZTpbMCwyNTUsMF0sbGltZWdyZWVuOls1MCwyMDUsNTBdLGxpbmVuOlsyNTAsMjQwLDIzMF0sbWFnZW50YTpbMjU1LDAsMjU1XSxtYXJvb246WzEyOCwwLDBdLG1lZGl1bWFxdWFtYXJpbmU6WzEwMiwyMDUsMTcwXSxtZWRpdW1ibHVlOlswLDAsMjA1XSxtZWRpdW1vcmNoaWQ6WzE4Niw4NSwyMTFdLG1lZGl1bXB1cnBsZTpbMTQ3LDExMiwyMTldLG1lZGl1bXNlYWdyZWVuOls2MCwxNzksMTEzXSxtZWRpdW1zbGF0ZWJsdWU6WzEyMywxMDQsMjM4XSxtZWRpdW1zcHJpbmdncmVlbjpbMCwyNTAsMTU0XSxtZWRpdW10dXJxdW9pc2U6WzcyLDIwOSwyMDRdLG1lZGl1bXZpb2xldHJlZDpbMTk5LDIxLDEzM10sbWlkbmlnaHRibHVlOlsyNSwyNSwxMTJdLG1pbnRjcmVhbTpbMjQ1LDI1NSwyNTBdLG1pc3R5cm9zZTpbMjU1LDIyOCwyMjVdLG1vY2Nhc2luOlsyNTUsMjI4LDE4MV0sbmF2YWpvd2hpdGU6WzI1NSwyMjIsMTczXSxuYXZ5OlswLDAsMTI4XSxvbGRsYWNlOlsyNTMsMjQ1LDIzMF0sb2xpdmU6WzEyOCwxMjgsMF0sb2xpdmVkcmFiOlsxMDcsMTQyLDM1XSxvcmFuZ2U6WzI1NSwxNjUsMF0sb3JhbmdlcmVkOlsyNTUsNjksMF0sb3JjaGlkOlsyMTgsMTEyLDIxNF0scGFsZWdvbGRlbnJvZDpbMjM4LDIzMiwxNzBdLHBhbGVncmVlbjpbMTUyLDI1MSwxNTJdLHBhbGV0dXJxdW9pc2U6WzE3NSwyMzgsMjM4XSxwYWxldmlvbGV0cmVkOlsyMTksMTEyLDE0N10scGFwYXlhd2hpcDpbMjU1LDIzOSwyMTNdLHBlYWNocHVmZjpbMjU1LDIxOCwxODVdLHBlcnU6WzIwNSwxMzMsNjNdLHBpbms6WzI1NSwxOTIsMjAzXSxwbHVtOlsyMjEsMTYwLDIyMV0scG93ZGVyYmx1ZTpbMTc2LDIyNCwyMzBdLHB1cnBsZTpbMTI4LDAsMTI4XSxyZWJlY2NhcHVycGxlOlsxMDIsNTEsMTUzXSxyZWQ6WzI1NSwwLDBdLHJvc3licm93bjpbMTg4LDE0MywxNDNdLHJveWFsYmx1ZTpbNjUsMTA1LDIyNV0sc2FkZGxlYnJvd246WzEzOSw2OSwxOV0sc2FsbW9uOlsyNTAsMTI4LDExNF0sc2FuZHlicm93bjpbMjQ0LDE2NCw5Nl0sc2VhZ3JlZW46WzQ2LDEzOSw4N10sc2Vhc2hlbGw6WzI1NSwyNDUsMjM4XSxzaWVubmE6WzE2MCw4Miw0NV0sc2lsdmVyOlsxOTIsMTkyLDE5Ml0sc2t5Ymx1ZTpbMTM1LDIwNiwyMzVdLHNsYXRlYmx1ZTpbMTA2LDkwLDIwNV0sc2xhdGVncmF5OlsxMTIsMTI4LDE0NF0sc2xhdGVncmV5OlsxMTIsMTI4LDE0NF0sc25vdzpbMjU1LDI1MCwyNTBdLHNwcmluZ2dyZWVuOlswLDI1NSwxMjddLHN0ZWVsYmx1ZTpbNzAsMTMwLDE4MF0sdGFuOlsyMTAsMTgwLDE0MF0sdGVhbDpbMCwxMjgsMTI4XSx0aGlzdGxlOlsyMTYsMTkxLDIxNl0sdG9tYXRvOlsyNTUsOTksNzFdLHR1cnF1b2lzZTpbNjQsMjI0LDIwOF0sdmlvbGV0OlsyMzgsMTMwLDIzOF0sd2hlYXQ6WzI0NSwyMjIsMTc5XSx3aGl0ZTpbMjU1LDI1NSwyNTVdLHdoaXRlc21va2U6WzI0NSwyNDUsMjQ1XSx5ZWxsb3c6WzI1NSwyNTUsMF0seWVsbG93Z3JlZW46WzE1NCwyMDUsNTBdfTtuLmV4cG9ydHM9Zn0se31dLDQ6W2Z1bmN0aW9uKG4sZil7ZnVuY3Rpb24gbyhlLG4pe3ZhciBmPWorKztpZihuPW58fHt9LG4ubG9nZ2luZyYmKHYub3B0aW9ucy5sb2dnaW5nPSEwLHYub3B0aW9ucy5zdGFydD1EYXRlLm5vdygpKSxuLmFzeW5jPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBuLmFzeW5jPyEwOm4uYXN5bmMsbi5hbGxvd1RhaW50PVwidW5kZWZpbmVkXCI9PXR5cGVvZiBuLmFsbG93VGFpbnQ/ITE6bi5hbGxvd1RhaW50LG4ucmVtb3ZlQ29udGFpbmVyPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBuLnJlbW92ZUNvbnRhaW5lcj8hMDpuLnJlbW92ZUNvbnRhaW5lcixuLmphdmFzY3JpcHRFbmFibGVkPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBuLmphdmFzY3JpcHRFbmFibGVkPyExOm4uamF2YXNjcmlwdEVuYWJsZWQsbi5pbWFnZVRpbWVvdXQ9XCJ1bmRlZmluZWRcIj09dHlwZW9mIG4uaW1hZ2VUaW1lb3V0PzFlNDpuLmltYWdlVGltZW91dCxuLnJlbmRlcmVyPVwiZnVuY3Rpb25cIj09dHlwZW9mIG4ucmVuZGVyZXI/bi5yZW5kZXJlcjpjLG4uc3RyaWN0PSEhbi5zdHJpY3QsXCJzdHJpbmdcIj09dHlwZW9mIGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBuLnByb3h5KXJldHVybiBQcm9taXNlLnJlamVjdChcIlByb3h5IG11c3QgYmUgdXNlZCB3aGVuIHJlbmRlcmluZyB1cmxcIik7dmFyIG89bnVsbCE9bi53aWR0aD9uLndpZHRoOndpbmRvdy5pbm5lcldpZHRoLHQ9bnVsbCE9bi5oZWlnaHQ/bi5oZWlnaHQ6d2luZG93LmlubmVySGVpZ2h0O3JldHVybiBnKGEoZSksbi5wcm94eSxkb2N1bWVudCxvLHQsbikudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gaShlLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGUsbixvLHQpfSl9dmFyIGw9KHZvaWQgMD09PWU/W2RvY3VtZW50LmRvY3VtZW50RWxlbWVudF06ZS5sZW5ndGg/ZTpbZV0pWzBdO3JldHVybiBsLnNldEF0dHJpYnV0ZSh4K2YsZiksZChsLm93bmVyRG9jdW1lbnQsbixsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuaW5uZXJXaWR0aCxsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuaW5uZXJIZWlnaHQsZikudGhlbihmdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBuLm9ucmVuZGVyZWQmJih2KFwib3B0aW9ucy5vbnJlbmRlcmVkIGlzIGRlcHJlY2F0ZWQsIGh0bWwyY2FudmFzIHJldHVybnMgYSBQcm9taXNlIGNvbnRhaW5pbmcgdGhlIGNhbnZhc1wiKSxuLm9ucmVuZGVyZWQoZSkpLGV9KX1mdW5jdGlvbiBkKGUsbixmLG8sZCl7cmV0dXJuIGIoZSxlLGYsbyxuLGUuZGVmYXVsdFZpZXcucGFnZVhPZmZzZXQsZS5kZWZhdWx0Vmlldy5wYWdlWU9mZnNldCkudGhlbihmdW5jdGlvbih0KXt2KFwiRG9jdW1lbnQgY2xvbmVkXCIpO3ZhciBsPXgrZCxzPVwiW1wiK2wrXCI9J1wiK2QrXCInXVwiO2UucXVlcnlTZWxlY3RvcihzKS5yZW1vdmVBdHRyaWJ1dGUobCk7dmFyIHU9dC5jb250ZW50V2luZG93LGE9dS5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHMpLHA9UHJvbWlzZS5yZXNvbHZlKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4ub25jbG9uZT9uLm9uY2xvbmUodS5kb2N1bWVudCk6ITApO3JldHVybiBwLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaShhLHQsbixmLG8pfSl9KX1mdW5jdGlvbiBpKGUsbixmLG8sZCl7dmFyIGk9bi5jb250ZW50V2luZG93LGE9bmV3IHAoaS5kb2N1bWVudCksYz1uZXcgeShmLGEpLHI9aChlKSx3PVwidmlld1wiPT09Zi50eXBlP286cyhpLmRvY3VtZW50KSxiPVwidmlld1wiPT09Zi50eXBlP2Q6dShpLmRvY3VtZW50KSxnPW5ldyBmLnJlbmRlcmVyKHcsYixjLGYsZG9jdW1lbnQpLHg9bmV3IG0oZSxnLGEsYyxmKTtyZXR1cm4geC5yZWFkeS50aGVuKGZ1bmN0aW9uKCl7dihcIkZpbmlzaGVkIHJlbmRlcmluZ1wiKTt2YXIgbztyZXR1cm4gbz1cInZpZXdcIj09PWYudHlwZT9sKGcuY2FudmFzLHt3aWR0aDpnLmNhbnZhcy53aWR0aCxoZWlnaHQ6Zy5jYW52YXMuaGVpZ2h0LHRvcDowLGxlZnQ6MCx4OjAseTowfSk6ZT09PWkuZG9jdW1lbnQuYm9keXx8ZT09PWkuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fHxudWxsIT1mLmNhbnZhcz9nLmNhbnZhczpsKGcuY2FudmFzLHt3aWR0aDpudWxsIT1mLndpZHRoP2Yud2lkdGg6ci53aWR0aCxoZWlnaHQ6bnVsbCE9Zi5oZWlnaHQ/Zi5oZWlnaHQ6ci5oZWlnaHQsdG9wOnIudG9wLGxlZnQ6ci5sZWZ0LHg6MCx5OjB9KSx0KG4sZiksb30pfWZ1bmN0aW9uIHQoZSxuKXtuLnJlbW92ZUNvbnRhaW5lciYmKGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKSx2KFwiQ2xlYW5lZCB1cCBjb250YWluZXJcIikpfWZ1bmN0aW9uIGwoZSxuKXt2YXIgZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLG89TWF0aC5taW4oZS53aWR0aC0xLE1hdGgubWF4KDAsbi5sZWZ0KSksZD1NYXRoLm1pbihlLndpZHRoLE1hdGgubWF4KDEsbi5sZWZ0K24ud2lkdGgpKSxpPU1hdGgubWluKGUuaGVpZ2h0LTEsTWF0aC5tYXgoMCxuLnRvcCkpLHQ9TWF0aC5taW4oZS5oZWlnaHQsTWF0aC5tYXgoMSxuLnRvcCtuLmhlaWdodCkpO2Yud2lkdGg9bi53aWR0aCxmLmhlaWdodD1uLmhlaWdodDt2YXIgbD1kLW8scz10LWk7cmV0dXJuIHYoXCJDcm9wcGluZyBjYW52YXMgYXQ6XCIsXCJsZWZ0OlwiLG4ubGVmdCxcInRvcDpcIixuLnRvcCxcIndpZHRoOlwiLGwsXCJoZWlnaHQ6XCIscyksdihcIlJlc3VsdGluZyBjcm9wIHdpdGggd2lkdGhcIixuLndpZHRoLFwiYW5kIGhlaWdodFwiLG4uaGVpZ2h0LFwid2l0aCB4XCIsbyxcImFuZCB5XCIsaSksZi5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKGUsbyxpLGwscyxuLngsbi55LGwscyksZn1mdW5jdGlvbiBzKGUpe3JldHVybiBNYXRoLm1heChNYXRoLm1heChlLmJvZHkuc2Nyb2xsV2lkdGgsZS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGgpLE1hdGgubWF4KGUuYm9keS5vZmZzZXRXaWR0aCxlLmRvY3VtZW50RWxlbWVudC5vZmZzZXRXaWR0aCksTWF0aC5tYXgoZS5ib2R5LmNsaWVudFdpZHRoLGUuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKSl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gTWF0aC5tYXgoTWF0aC5tYXgoZS5ib2R5LnNjcm9sbEhlaWdodCxlLmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpLE1hdGgubWF4KGUuYm9keS5vZmZzZXRIZWlnaHQsZS5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0KSxNYXRoLm1heChlLmJvZHkuY2xpZW50SGVpZ2h0LGUuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkpfWZ1bmN0aW9uIGEoZSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7cmV0dXJuIG4uaHJlZj1lLG4uaHJlZj1uLmhyZWYsbn12YXIgcD1uKFwiLi9zdXBwb3J0XCIpLGM9bihcIi4vcmVuZGVyZXJzL2NhbnZhc1wiKSx5PW4oXCIuL2ltYWdlbG9hZGVyXCIpLG09bihcIi4vbm9kZXBhcnNlclwiKSxyPW4oXCIuL25vZGVjb250YWluZXJcIiksdj1uKFwiLi9sb2dcIiksdz1uKFwiLi91dGlsc1wiKSxiPW4oXCIuL2Nsb25lXCIpLGc9bihcIi4vcHJveHlcIikubG9hZFVybERvY3VtZW50LGg9dy5nZXRCb3VuZHMseD1cImRhdGEtaHRtbDJjYW52YXMtbm9kZVwiLGo9MDtvLkNhbnZhc1JlbmRlcmVyPWMsby5Ob2RlQ29udGFpbmVyPXIsby5sb2c9dixvLnV0aWxzPXc7dmFyIGs9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGRvY3VtZW50fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBPYmplY3QuY3JlYXRlfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLmdldENvbnRleHQ/ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJObyBjYW52YXMgc3VwcG9ydFwiKX06bztmLmV4cG9ydHM9ayxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlLmFtZCYmZShcImh0bWwyY2FudmFzXCIsW10sZnVuY3Rpb24oKXtyZXR1cm4ga30pfSx7XCIuL2Nsb25lXCI6MixcIi4vaW1hZ2Vsb2FkZXJcIjoxMSxcIi4vbG9nXCI6MTMsXCIuL25vZGVjb250YWluZXJcIjoxNCxcIi4vbm9kZXBhcnNlclwiOjE1LFwiLi9wcm94eVwiOjE2LFwiLi9yZW5kZXJlcnMvY2FudmFzXCI6MjAsXCIuL3N1cHBvcnRcIjoyMixcIi4vdXRpbHNcIjoyNn1dLDU6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gZihlKXtpZih0aGlzLnNyYz1lLG8oXCJEdW1teUltYWdlQ29udGFpbmVyIGZvclwiLGUpLCF0aGlzLnByb21pc2V8fCF0aGlzLmltYWdlKXtvKFwiSW5pdGlhdGluZyBEdW1teUltYWdlQ29udGFpbmVyXCIpLGYucHJvdG90eXBlLmltYWdlPW5ldyBJbWFnZTt2YXIgbj10aGlzLmltYWdlO2YucHJvdG90eXBlLnByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24oZSxmKXtuLm9ubG9hZD1lLG4ub25lcnJvcj1mLG4uc3JjPWQoKSxuLmNvbXBsZXRlPT09ITAmJmUobil9KX19dmFyIG89ZShcIi4vbG9nXCIpLGQ9ZShcIi4vdXRpbHNcIikuc21hbGxJbWFnZTtuLmV4cG9ydHM9Zn0se1wiLi9sb2dcIjoxMyxcIi4vdXRpbHNcIjoyNn1dLDY6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gZihlLG4pe3ZhciBmLGQsaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKSxsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHM9XCJIaWRkZW4gVGV4dFwiO2kuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLGkuc3R5bGUuZm9udEZhbWlseT1lLGkuc3R5bGUuZm9udFNpemU9bixpLnN0eWxlLm1hcmdpbj0wLGkuc3R5bGUucGFkZGluZz0wLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaSksdC5zcmM9bygpLHQud2lkdGg9MSx0LmhlaWdodD0xLHQuc3R5bGUubWFyZ2luPTAsdC5zdHlsZS5wYWRkaW5nPTAsdC5zdHlsZS52ZXJ0aWNhbEFsaWduPVwiYmFzZWxpbmVcIixsLnN0eWxlLmZvbnRGYW1pbHk9ZSxsLnN0eWxlLmZvbnRTaXplPW4sbC5zdHlsZS5tYXJnaW49MCxsLnN0eWxlLnBhZGRpbmc9MCxsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHMpKSxpLmFwcGVuZENoaWxkKGwpLGkuYXBwZW5kQ2hpbGQodCksZj10Lm9mZnNldFRvcC1sLm9mZnNldFRvcCsxLGkucmVtb3ZlQ2hpbGQobCksaS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzKSksaS5zdHlsZS5saW5lSGVpZ2h0PVwibm9ybWFsXCIsdC5zdHlsZS52ZXJ0aWNhbEFsaWduPVwic3VwZXJcIixkPXQub2Zmc2V0VG9wLWkub2Zmc2V0VG9wKzEsZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpKSx0aGlzLmJhc2VsaW5lPWYsdGhpcy5saW5lV2lkdGg9MSx0aGlzLm1pZGRsZT1kfXZhciBvPWUoXCIuL3V0aWxzXCIpLnNtYWxsSW1hZ2U7bi5leHBvcnRzPWZ9LHtcIi4vdXRpbHNcIjoyNn1dLDc6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gZigpe3RoaXMuZGF0YT17fX12YXIgbz1lKFwiLi9mb250XCIpO2YucHJvdG90eXBlLmdldE1ldHJpY3M9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5kYXRhW2UrXCItXCIrbl0mJih0aGlzLmRhdGFbZStcIi1cIituXT1uZXcgbyhlLG4pKSx0aGlzLmRhdGFbZStcIi1cIituXX0sbi5leHBvcnRzPWZ9LHtcIi4vZm9udFwiOjZ9XSw4OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYobixmLG8pe3RoaXMuaW1hZ2U9bnVsbCx0aGlzLnNyYz1uO3ZhciBpPXRoaXMsdD1kKG4pO3RoaXMucHJvbWlzZT0oZj9uZXcgUHJvbWlzZShmdW5jdGlvbihlKXtcImFib3V0OmJsYW5rXCI9PT1uLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuVVJMfHxudWxsPT1uLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50P24uY29udGVudFdpbmRvdy5vbmxvYWQ9bi5vbmxvYWQ9ZnVuY3Rpb24oKXtlKG4pfTplKG4pfSk6dGhpcy5wcm94eUxvYWQoby5wcm94eSx0LG8pKS50aGVuKGZ1bmN0aW9uKG4pe3ZhciBmPWUoXCIuL2NvcmVcIik7cmV0dXJuIGYobi5jb250ZW50V2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCx7dHlwZTpcInZpZXdcIix3aWR0aDpuLndpZHRoLGhlaWdodDpuLmhlaWdodCxwcm94eTpvLnByb3h5LGphdmFzY3JpcHRFbmFibGVkOm8uamF2YXNjcmlwdEVuYWJsZWQscmVtb3ZlQ29udGFpbmVyOm8ucmVtb3ZlQ29udGFpbmVyLGFsbG93VGFpbnQ6by5hbGxvd1RhaW50LGltYWdlVGltZW91dDpvLmltYWdlVGltZW91dC8yfSl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBpLmltYWdlPWV9KX12YXIgbz1lKFwiLi91dGlsc1wiKSxkPW8uZ2V0Qm91bmRzLGk9ZShcIi4vcHJveHlcIikubG9hZFVybERvY3VtZW50O2YucHJvdG90eXBlLnByb3h5TG9hZD1mdW5jdGlvbihlLG4sZil7dmFyIG89dGhpcy5zcmM7cmV0dXJuIGkoby5zcmMsZSxvLm93bmVyRG9jdW1lbnQsbi53aWR0aCxuLmhlaWdodCxmKX0sbi5leHBvcnRzPWZ9LHtcIi4vY29yZVwiOjQsXCIuL3Byb3h5XCI6MTYsXCIuL3V0aWxzXCI6MjZ9XSw5OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSl7dGhpcy5zcmM9ZS52YWx1ZSx0aGlzLmNvbG9yU3RvcHM9W10sdGhpcy50eXBlPW51bGwsdGhpcy54MD0uNSx0aGlzLnkwPS41LHRoaXMueDE9LjUsdGhpcy55MT0uNSx0aGlzLnByb21pc2U9UHJvbWlzZS5yZXNvbHZlKCEwKX1mLlRZUEVTPXtMSU5FQVI6MSxSQURJQUw6Mn0sZi5SRUdFWFBfQ09MT1JTVE9QPS9eXFxzKihyZ2JhP1xcKFxccypcXGR7MSwzfSxcXHMqXFxkezEsM30sXFxzKlxcZHsxLDN9KD86LFxccypbMC05XFwuXSspP1xccypcXCl8W2Etel17MywyMH18I1thLWYwLTldezMsNn0pKD86XFxzKyhcXGR7MSwzfSg/OlxcLlxcZCspPykoJXxweCk/KT8oPzpcXHN8JCkvaSxuLmV4cG9ydHM9Zn0se31dLDEwOltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSxuKXt0aGlzLnNyYz1lLHRoaXMuaW1hZ2U9bmV3IEltYWdlO3ZhciBmPXRoaXM7dGhpcy50YWludGVkPW51bGwsdGhpcy5wcm9taXNlPW5ldyBQcm9taXNlKGZ1bmN0aW9uKG8sZCl7Zi5pbWFnZS5vbmxvYWQ9byxmLmltYWdlLm9uZXJyb3I9ZCxuJiYoZi5pbWFnZS5jcm9zc09yaWdpbj1cImFub255bW91c1wiKSxmLmltYWdlLnNyYz1lLGYuaW1hZ2UuY29tcGxldGU9PT0hMCYmbyhmLmltYWdlKX0pfW4uZXhwb3J0cz1mfSx7fV0sMTE6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gZihlLG4pe3RoaXMubGluaz1udWxsLHRoaXMub3B0aW9ucz1lLHRoaXMuc3VwcG9ydD1uLHRoaXMub3JpZ2luPXRoaXMuZ2V0T3JpZ2luKHdpbmRvdy5sb2NhdGlvbi5ocmVmKX12YXIgbz1lKFwiLi9sb2dcIiksZD1lKFwiLi9pbWFnZWNvbnRhaW5lclwiKSxpPWUoXCIuL2R1bW15aW1hZ2Vjb250YWluZXJcIiksdD1lKFwiLi9wcm94eWltYWdlY29udGFpbmVyXCIpLGw9ZShcIi4vZnJhbWVjb250YWluZXJcIikscz1lKFwiLi9zdmdjb250YWluZXJcIiksdT1lKFwiLi9zdmdub2RlY29udGFpbmVyXCIpLGE9ZShcIi4vbGluZWFyZ3JhZGllbnRjb250YWluZXJcIikscD1lKFwiLi93ZWJraXRncmFkaWVudGNvbnRhaW5lclwiKSxjPWUoXCIuL3V0aWxzXCIpLmJpbmQ7Zi5wcm90b3R5cGUuZmluZEltYWdlcz1mdW5jdGlvbihlKXt2YXIgbj1bXTtyZXR1cm4gZS5yZWR1Y2UoZnVuY3Rpb24oZSxuKXtzd2l0Y2gobi5ub2RlLm5vZGVOYW1lKXtjYXNlXCJJTUdcIjpyZXR1cm4gZS5jb25jYXQoW3thcmdzOltuLm5vZGUuc3JjXSxtZXRob2Q6XCJ1cmxcIn1dKTtjYXNlXCJzdmdcIjpjYXNlXCJJRlJBTUVcIjpyZXR1cm4gZS5jb25jYXQoW3thcmdzOltuLm5vZGVdLG1ldGhvZDpuLm5vZGUubm9kZU5hbWV9XSl9cmV0dXJuIGV9LFtdKS5mb3JFYWNoKHRoaXMuYWRkSW1hZ2Uobix0aGlzLmxvYWRJbWFnZSksdGhpcyksbn0sZi5wcm90b3R5cGUuZmluZEJhY2tncm91bmRJbWFnZT1mdW5jdGlvbihlLG4pe3JldHVybiBuLnBhcnNlQmFja2dyb3VuZEltYWdlcygpLmZpbHRlcih0aGlzLmhhc0ltYWdlQmFja2dyb3VuZCkuZm9yRWFjaCh0aGlzLmFkZEltYWdlKGUsdGhpcy5sb2FkSW1hZ2UpLHRoaXMpLGV9LGYucHJvdG90eXBlLmFkZEltYWdlPWZ1bmN0aW9uKGUsbil7cmV0dXJuIGZ1bmN0aW9uKGYpe2YuYXJncy5mb3JFYWNoKGZ1bmN0aW9uKGQpe3RoaXMuaW1hZ2VFeGlzdHMoZSxkKXx8KGUuc3BsaWNlKDAsMCxuLmNhbGwodGhpcyxmKSksbyhcIkFkZGVkIGltYWdlICNcIitlLmxlbmd0aCxcInN0cmluZ1wiPT10eXBlb2YgZD9kLnN1YnN0cmluZygwLDEwMCk6ZCkpfSx0aGlzKX19LGYucHJvdG90eXBlLmhhc0ltYWdlQmFja2dyb3VuZD1mdW5jdGlvbihlKXtyZXR1cm5cIm5vbmVcIiE9PWUubWV0aG9kfSxmLnByb3RvdHlwZS5sb2FkSW1hZ2U9ZnVuY3Rpb24oZSl7aWYoXCJ1cmxcIj09PWUubWV0aG9kKXt2YXIgbj1lLmFyZ3NbMF07cmV0dXJuIXRoaXMuaXNTVkcobil8fHRoaXMuc3VwcG9ydC5zdmd8fHRoaXMub3B0aW9ucy5hbGxvd1RhaW50P24ubWF0Y2goL2RhdGE6aW1hZ2VcXC8uKjtiYXNlNjQsL2kpP25ldyBkKG4ucmVwbGFjZSgvdXJsXFwoWydcIl17MCx9fFsnXCJdezAsfVxcKSQvZ2ksXCJcIiksITEpOnRoaXMuaXNTYW1lT3JpZ2luKG4pfHx0aGlzLm9wdGlvbnMuYWxsb3dUYWludD09PSEwfHx0aGlzLmlzU1ZHKG4pP25ldyBkKG4sITEpOnRoaXMuc3VwcG9ydC5jb3JzJiYhdGhpcy5vcHRpb25zLmFsbG93VGFpbnQmJnRoaXMub3B0aW9ucy51c2VDT1JTP25ldyBkKG4sITApOnRoaXMub3B0aW9ucy5wcm94eT9uZXcgdChuLHRoaXMub3B0aW9ucy5wcm94eSk6bmV3IGkobik6bmV3IHMobil9cmV0dXJuXCJsaW5lYXItZ3JhZGllbnRcIj09PWUubWV0aG9kP25ldyBhKGUpOlwiZ3JhZGllbnRcIj09PWUubWV0aG9kP25ldyBwKGUpOlwic3ZnXCI9PT1lLm1ldGhvZD9uZXcgdShlLmFyZ3NbMF0sdGhpcy5zdXBwb3J0LnN2Zyk6XCJJRlJBTUVcIj09PWUubWV0aG9kP25ldyBsKGUuYXJnc1swXSx0aGlzLmlzU2FtZU9yaWdpbihlLmFyZ3NbMF0uc3JjKSx0aGlzLm9wdGlvbnMpOm5ldyBpKGUpfSxmLnByb3RvdHlwZS5pc1NWRz1mdW5jdGlvbihlKXtyZXR1cm5cInN2Z1wiPT09ZS5zdWJzdHJpbmcoZS5sZW5ndGgtMykudG9Mb3dlckNhc2UoKXx8cy5wcm90b3R5cGUuaXNJbmxpbmUoZSl9LGYucHJvdG90eXBlLmltYWdlRXhpc3RzPWZ1bmN0aW9uKGUsbil7cmV0dXJuIGUuc29tZShmdW5jdGlvbihlKXtyZXR1cm4gZS5zcmM9PT1ufSl9LGYucHJvdG90eXBlLmlzU2FtZU9yaWdpbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRPcmlnaW4oZSk9PT10aGlzLm9yaWdpbn0sZi5wcm90b3R5cGUuZ2V0T3JpZ2luPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMubGlua3x8KHRoaXMubGluaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSk7cmV0dXJuIG4uaHJlZj1lLG4uaHJlZj1uLmhyZWYsbi5wcm90b2NvbCtuLmhvc3RuYW1lK24ucG9ydH0sZi5wcm90b3R5cGUuZ2V0UHJvbWlzZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aW1lb3V0KGUsdGhpcy5vcHRpb25zLmltYWdlVGltZW91dClbXCJjYXRjaFwiXShmdW5jdGlvbigpe3ZhciBuPW5ldyBpKGUuc3JjKTtyZXR1cm4gbi5wcm9taXNlLnRoZW4oZnVuY3Rpb24obil7ZS5pbWFnZT1ufSl9KX0sZi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3ZhciBuPW51bGw7cmV0dXJuIHRoaXMuaW1hZ2VzLnNvbWUoZnVuY3Rpb24oZil7cmV0dXJuKG49Zikuc3JjPT09ZX0pP246bnVsbH0sZi5wcm90b3R5cGUuZmV0Y2g9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaW1hZ2VzPWUucmVkdWNlKGModGhpcy5maW5kQmFja2dyb3VuZEltYWdlLHRoaXMpLHRoaXMuZmluZEltYWdlcyhlKSksdGhpcy5pbWFnZXMuZm9yRWFjaChmdW5jdGlvbihlLG4pe2UucHJvbWlzZS50aGVuKGZ1bmN0aW9uKCl7byhcIlN1Y2Nlc2Z1bGx5IGxvYWRlZCBpbWFnZSAjXCIrKG4rMSksZSl9LGZ1bmN0aW9uKGYpe28oXCJGYWlsZWQgbG9hZGluZyBpbWFnZSAjXCIrKG4rMSksZSxmKX0pfSksdGhpcy5yZWFkeT1Qcm9taXNlLmFsbCh0aGlzLmltYWdlcy5tYXAodGhpcy5nZXRQcm9taXNlLHRoaXMpKSxvKFwiRmluaXNoZWQgc2VhcmNoaW5nIGltYWdlc1wiKSx0aGlzfSxmLnByb3RvdHlwZS50aW1lb3V0PWZ1bmN0aW9uKGUsbil7dmFyIGYsZD1Qcm9taXNlLnJhY2UoW2UucHJvbWlzZSxuZXcgUHJvbWlzZShmdW5jdGlvbihkLGkpe2Y9c2V0VGltZW91dChmdW5jdGlvbigpe28oXCJUaW1lZCBvdXQgbG9hZGluZyBpbWFnZVwiLGUpLGkoZSl9LG4pfSldKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBjbGVhclRpbWVvdXQoZiksZX0pO3JldHVybiBkW1wiY2F0Y2hcIl0oZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoZil9KSxkfSxuLmV4cG9ydHM9Zn0se1wiLi9kdW1teWltYWdlY29udGFpbmVyXCI6NSxcIi4vZnJhbWVjb250YWluZXJcIjo4LFwiLi9pbWFnZWNvbnRhaW5lclwiOjEwLFwiLi9saW5lYXJncmFkaWVudGNvbnRhaW5lclwiOjEyLFwiLi9sb2dcIjoxMyxcIi4vcHJveHlpbWFnZWNvbnRhaW5lclwiOjE3LFwiLi9zdmdjb250YWluZXJcIjoyMyxcIi4vc3Znbm9kZWNvbnRhaW5lclwiOjI0LFwiLi91dGlsc1wiOjI2LFwiLi93ZWJraXRncmFkaWVudGNvbnRhaW5lclwiOjI3fV0sMTI6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gZihlKXtvLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLnR5cGU9by5UWVBFUy5MSU5FQVI7dmFyIG49Zi5SRUdFWFBfRElSRUNUSU9OLnRlc3QoZS5hcmdzWzBdKXx8IW8uUkVHRVhQX0NPTE9SU1RPUC50ZXN0KGUuYXJnc1swXSk7bj9lLmFyZ3NbMF0uc3BsaXQoL1xccysvKS5yZXZlcnNlKCkuZm9yRWFjaChmdW5jdGlvbihlLG4pe3N3aXRjaChlKXtjYXNlXCJsZWZ0XCI6dGhpcy54MD0wLHRoaXMueDE9MTticmVhaztjYXNlXCJ0b3BcIjp0aGlzLnkwPTAsdGhpcy55MT0xO2JyZWFrO2Nhc2VcInJpZ2h0XCI6dGhpcy54MD0xLHRoaXMueDE9MDticmVhaztjYXNlXCJib3R0b21cIjp0aGlzLnkwPTEsdGhpcy55MT0wO2JyZWFrO2Nhc2VcInRvXCI6dmFyIGY9dGhpcy55MCxvPXRoaXMueDA7dGhpcy55MD10aGlzLnkxLHRoaXMueDA9dGhpcy54MSx0aGlzLngxPW8sdGhpcy55MT1mO2JyZWFrO2Nhc2VcImNlbnRlclwiOmJyZWFrO2RlZmF1bHQ6dmFyIGQ9LjAxKnBhcnNlRmxvYXQoZSwxMCk7aWYoaXNOYU4oZCkpYnJlYWs7MD09PW4/KHRoaXMueTA9ZCx0aGlzLnkxPTEtdGhpcy55MCk6KHRoaXMueDA9ZCx0aGlzLngxPTEtdGhpcy54MCl9fSx0aGlzKToodGhpcy55MD0wLHRoaXMueTE9MSksdGhpcy5jb2xvclN0b3BzPWUuYXJncy5zbGljZShuPzE6MCkubWFwKGZ1bmN0aW9uKGUpe3ZhciBuPWUubWF0Y2goby5SRUdFWFBfQ09MT1JTVE9QKSxmPStuWzJdLGk9MD09PWY/XCIlXCI6blszXTtyZXR1cm57Y29sb3I6bmV3IGQoblsxXSksc3RvcDpcIiVcIj09PWk/Zi8xMDA6bnVsbH19KSxudWxsPT09dGhpcy5jb2xvclN0b3BzWzBdLnN0b3AmJih0aGlzLmNvbG9yU3RvcHNbMF0uc3RvcD0wKSxudWxsPT09dGhpcy5jb2xvclN0b3BzW3RoaXMuY29sb3JTdG9wcy5sZW5ndGgtMV0uc3RvcCYmKHRoaXMuY29sb3JTdG9wc1t0aGlzLmNvbG9yU3RvcHMubGVuZ3RoLTFdLnN0b3A9MSksdGhpcy5jb2xvclN0b3BzLmZvckVhY2goZnVuY3Rpb24oZSxuKXtudWxsPT09ZS5zdG9wJiZ0aGlzLmNvbG9yU3RvcHMuc2xpY2Uobikuc29tZShmdW5jdGlvbihmLG8pe3JldHVybiBudWxsIT09Zi5zdG9wPyhlLnN0b3A9KGYuc3RvcC10aGlzLmNvbG9yU3RvcHNbbi0xXS5zdG9wKS8obysxKSt0aGlzLmNvbG9yU3RvcHNbbi0xXS5zdG9wLCEwKTohMX0sdGhpcyl9LHRoaXMpfXZhciBvPWUoXCIuL2dyYWRpZW50Y29udGFpbmVyXCIpLGQ9ZShcIi4vY29sb3JcIik7Zi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSksZi5SRUdFWFBfRElSRUNUSU9OPS9eXFxzKig/OnRvfGxlZnR8cmlnaHR8dG9wfGJvdHRvbXxjZW50ZXJ8XFxkezEsM30oPzpcXC5cXGQrKT8lPykoPzpcXHN8JCkvaSxuLmV4cG9ydHM9Zn0se1wiLi9jb2xvclwiOjMsXCIuL2dyYWRpZW50Y29udGFpbmVyXCI6OX1dLDEzOltmdW5jdGlvbihlLG4pe3ZhciBmPWZ1bmN0aW9uKCl7Zi5vcHRpb25zLmxvZ2dpbmcmJndpbmRvdy5jb25zb2xlJiZ3aW5kb3cuY29uc29sZS5sb2cmJkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwod2luZG93LmNvbnNvbGUubG9nLHdpbmRvdy5jb25zb2xlKS5hcHBseSh3aW5kb3cuY29uc29sZSxbRGF0ZS5ub3coKS1mLm9wdGlvbnMuc3RhcnQrXCJtc1wiLFwiaHRtbDJjYW52YXM6XCJdLmNvbmNhdChbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSkpfTtmLm9wdGlvbnM9e2xvZ2dpbmc6ITF9LG4uZXhwb3J0cz1mfSx7fV0sMTQ6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gZihlLG4pe3RoaXMubm9kZT1lLHRoaXMucGFyZW50PW4sdGhpcy5zdGFjaz1udWxsLHRoaXMuYm91bmRzPW51bGwsdGhpcy5ib3JkZXJzPW51bGwsdGhpcy5jbGlwPVtdLHRoaXMuYmFja2dyb3VuZENsaXA9W10sdGhpcy5vZmZzZXRCb3VuZHM9bnVsbCx0aGlzLnZpc2libGU9bnVsbCx0aGlzLmNvbXB1dGVkU3R5bGVzPW51bGwsdGhpcy5jb2xvcnM9e30sdGhpcy5zdHlsZXM9e30sdGhpcy5iYWNrZ3JvdW5kSW1hZ2VzPW51bGwsdGhpcy50cmFuc2Zvcm1EYXRhPW51bGwsdGhpcy50cmFuc2Zvcm1NYXRyaXg9bnVsbCx0aGlzLmlzUHNldWRvRWxlbWVudD0hMSx0aGlzLm9wYWNpdHk9bnVsbH1mdW5jdGlvbiBvKGUpe3ZhciBuPWUub3B0aW9uc1tlLnNlbGVjdGVkSW5kZXh8fDBdO3JldHVybiBuP24udGV4dHx8XCJcIjpcIlwifWZ1bmN0aW9uIGQoZSl7aWYoZSYmXCJtYXRyaXhcIj09PWVbMV0pcmV0dXJuIGVbMl0uc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VGbG9hdChlLnRyaW0oKSl9KTtpZihlJiZcIm1hdHJpeDNkXCI9PT1lWzFdKXt2YXIgbj1lWzJdLnNwbGl0KFwiLFwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlRmxvYXQoZS50cmltKCkpfSk7cmV0dXJuW25bMF0sblsxXSxuWzRdLG5bNV0sblsxMl0sblsxM11dfX1mdW5jdGlvbiBpKGUpe3JldHVybi0xIT09ZS50b1N0cmluZygpLmluZGV4T2YoXCIlXCIpfWZ1bmN0aW9uIHQoZSl7cmV0dXJuIGUucmVwbGFjZShcInB4XCIsXCJcIil9ZnVuY3Rpb24gbChlKXtyZXR1cm4gcGFyc2VGbG9hdChlKX12YXIgcz1lKFwiLi9jb2xvclwiKSx1PWUoXCIuL3V0aWxzXCIpLGE9dS5nZXRCb3VuZHMscD11LnBhcnNlQmFja2dyb3VuZHMsYz11Lm9mZnNldEJvdW5kcztmLnByb3RvdHlwZS5jbG9uZVRvPWZ1bmN0aW9uKGUpe2UudmlzaWJsZT10aGlzLnZpc2libGUsZS5ib3JkZXJzPXRoaXMuYm9yZGVycyxlLmJvdW5kcz10aGlzLmJvdW5kcyxlLmNsaXA9dGhpcy5jbGlwLGUuYmFja2dyb3VuZENsaXA9dGhpcy5iYWNrZ3JvdW5kQ2xpcCxlLmNvbXB1dGVkU3R5bGVzPXRoaXMuY29tcHV0ZWRTdHlsZXMsZS5zdHlsZXM9dGhpcy5zdHlsZXMsZS5iYWNrZ3JvdW5kSW1hZ2VzPXRoaXMuYmFja2dyb3VuZEltYWdlcyxlLm9wYWNpdHk9dGhpcy5vcGFjaXR5fSxmLnByb3RvdHlwZS5nZXRPcGFjaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLm9wYWNpdHk/dGhpcy5vcGFjaXR5PXRoaXMuY3NzRmxvYXQoXCJvcGFjaXR5XCIpOnRoaXMub3BhY2l0eX0sZi5wcm90b3R5cGUuYXNzaWduU3RhY2s9ZnVuY3Rpb24oZSl7dGhpcy5zdGFjaz1lLGUuY2hpbGRyZW4ucHVzaCh0aGlzKX0sZi5wcm90b3R5cGUuaXNFbGVtZW50VmlzaWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERT90aGlzLnBhcmVudC52aXNpYmxlOlwibm9uZVwiIT09dGhpcy5jc3MoXCJkaXNwbGF5XCIpJiZcImhpZGRlblwiIT09dGhpcy5jc3MoXCJ2aXNpYmlsaXR5XCIpJiYhdGhpcy5ub2RlLmhhc0F0dHJpYnV0ZShcImRhdGEtaHRtbDJjYW52YXMtaWdub3JlXCIpJiYoXCJJTlBVVFwiIT09dGhpcy5ub2RlLm5vZGVOYW1lfHxcImhpZGRlblwiIT09dGhpcy5ub2RlLmdldEF0dHJpYnV0ZShcInR5cGVcIikpfSxmLnByb3RvdHlwZS5jc3M9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29tcHV0ZWRTdHlsZXN8fCh0aGlzLmNvbXB1dGVkU3R5bGVzPXRoaXMuaXNQc2V1ZG9FbGVtZW50P3RoaXMucGFyZW50LmNvbXB1dGVkU3R5bGUodGhpcy5iZWZvcmU/XCI6YmVmb3JlXCI6XCI6YWZ0ZXJcIik6dGhpcy5jb21wdXRlZFN0eWxlKG51bGwpKSx0aGlzLnN0eWxlc1tlXXx8KHRoaXMuc3R5bGVzW2VdPXRoaXMuY29tcHV0ZWRTdHlsZXNbZV0pfSxmLnByb3RvdHlwZS5wcmVmaXhlZENzcz1mdW5jdGlvbihlKXt2YXIgbj1bXCJ3ZWJraXRcIixcIm1velwiLFwibXNcIixcIm9cIl0sZj10aGlzLmNzcyhlKTtyZXR1cm4gdm9pZCAwPT09ZiYmbi5zb21lKGZ1bmN0aW9uKG4pe3JldHVybiBmPXRoaXMuY3NzKG4rZS5zdWJzdHIoMCwxKS50b1VwcGVyQ2FzZSgpK2Uuc3Vic3RyKDEpKSx2b2lkIDAhPT1mfSx0aGlzKSx2b2lkIDA9PT1mP251bGw6Zn0sZi5wcm90b3R5cGUuY29tcHV0ZWRTdHlsZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5ub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm5vZGUsZSl9LGYucHJvdG90eXBlLmNzc0ludD1mdW5jdGlvbihlKXt2YXIgbj1wYXJzZUludCh0aGlzLmNzcyhlKSwxMCk7cmV0dXJuIGlzTmFOKG4pPzA6bn0sZi5wcm90b3R5cGUuY29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29sb3JzW2VdfHwodGhpcy5jb2xvcnNbZV09bmV3IHModGhpcy5jc3MoZSkpKX0sZi5wcm90b3R5cGUuY3NzRmxvYXQ9ZnVuY3Rpb24oZSl7dmFyIG49cGFyc2VGbG9hdCh0aGlzLmNzcyhlKSk7cmV0dXJuIGlzTmFOKG4pPzA6bn0sZi5wcm90b3R5cGUuZm9udFdlaWdodD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY3NzKFwiZm9udFdlaWdodFwiKTtzd2l0Y2gocGFyc2VJbnQoZSwxMCkpe2Nhc2UgNDAxOmU9XCJib2xkXCI7YnJlYWs7Y2FzZSA0MDA6ZT1cIm5vcm1hbFwifXJldHVybiBlfSxmLnByb3RvdHlwZS5wYXJzZUNsaXA9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNzcyhcImNsaXBcIikubWF0Y2godGhpcy5DTElQKTtyZXR1cm4gZT97dG9wOnBhcnNlSW50KGVbMV0sMTApLHJpZ2h0OnBhcnNlSW50KGVbMl0sMTApLGJvdHRvbTpwYXJzZUludChlWzNdLDEwKSxsZWZ0OnBhcnNlSW50KGVbNF0sMTApfTpudWxsfSxmLnByb3RvdHlwZS5wYXJzZUJhY2tncm91bmRJbWFnZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iYWNrZ3JvdW5kSW1hZ2VzfHwodGhpcy5iYWNrZ3JvdW5kSW1hZ2VzPXAodGhpcy5jc3MoXCJiYWNrZ3JvdW5kSW1hZ2VcIikpKX0sZi5wcm90b3R5cGUuY3NzTGlzdD1mdW5jdGlvbihlLG4pe3ZhciBmPSh0aGlzLmNzcyhlKXx8XCJcIikuc3BsaXQoXCIsXCIpO3JldHVybiBmPWZbbnx8MF18fGZbMF18fFwiYXV0b1wiLGY9Zi50cmltKCkuc3BsaXQoXCIgXCIpLDE9PT1mLmxlbmd0aCYmKGY9W2ZbMF0saShmWzBdKT9cImF1dG9cIjpmWzBdXSksZn0sZi5wcm90b3R5cGUucGFyc2VCYWNrZ3JvdW5kU2l6ZT1mdW5jdGlvbihlLG4sZil7dmFyIG8sZCx0PXRoaXMuY3NzTGlzdChcImJhY2tncm91bmRTaXplXCIsZik7aWYoaSh0WzBdKSlvPWUud2lkdGgqcGFyc2VGbG9hdCh0WzBdKS8xMDA7ZWxzZXtpZigvY29udGFpbnxjb3Zlci8udGVzdCh0WzBdKSl7dmFyIGw9ZS53aWR0aC9lLmhlaWdodCxzPW4ud2lkdGgvbi5oZWlnaHQ7cmV0dXJuIHM+bF5cImNvbnRhaW5cIj09PXRbMF0/e3dpZHRoOmUuaGVpZ2h0KnMsaGVpZ2h0OmUuaGVpZ2h0fTp7d2lkdGg6ZS53aWR0aCxoZWlnaHQ6ZS53aWR0aC9zfX1vPXBhcnNlSW50KHRbMF0sMTApfXJldHVybiBkPVwiYXV0b1wiPT09dFswXSYmXCJhdXRvXCI9PT10WzFdP24uaGVpZ2h0OlwiYXV0b1wiPT09dFsxXT9vL24ud2lkdGgqbi5oZWlnaHQ6aSh0WzFdKT9lLmhlaWdodCpwYXJzZUZsb2F0KHRbMV0pLzEwMDpwYXJzZUludCh0WzFdLDEwKSxcImF1dG9cIj09PXRbMF0mJihvPWQvbi5oZWlnaHQqbi53aWR0aCkse3dpZHRoOm8saGVpZ2h0OmR9fSxmLnByb3RvdHlwZS5wYXJzZUJhY2tncm91bmRQb3NpdGlvbj1mdW5jdGlvbihlLG4sZixvKXt2YXIgZCx0LGw9dGhpcy5jc3NMaXN0KFwiYmFja2dyb3VuZFBvc2l0aW9uXCIsZik7cmV0dXJuIGQ9aShsWzBdKT8oZS53aWR0aC0ob3x8bikud2lkdGgpKihwYXJzZUZsb2F0KGxbMF0pLzEwMCk6cGFyc2VJbnQobFswXSwxMCksdD1cImF1dG9cIj09PWxbMV0/ZC9uLndpZHRoKm4uaGVpZ2h0OmkobFsxXSk/KGUuaGVpZ2h0LShvfHxuKS5oZWlnaHQpKnBhcnNlRmxvYXQobFsxXSkvMTAwOnBhcnNlSW50KGxbMV0sMTApLFwiYXV0b1wiPT09bFswXSYmKGQ9dC9uLmhlaWdodCpuLndpZHRoKSx7bGVmdDpkLHRvcDp0fX0sZi5wcm90b3R5cGUucGFyc2VCYWNrZ3JvdW5kUmVwZWF0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNzc0xpc3QoXCJiYWNrZ3JvdW5kUmVwZWF0XCIsZSlbMF19LGYucHJvdG90eXBlLnBhcnNlVGV4dFNoYWRvd3M9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNzcyhcInRleHRTaGFkb3dcIiksbj1bXTtpZihlJiZcIm5vbmVcIiE9PWUpZm9yKHZhciBmPWUubWF0Y2godGhpcy5URVhUX1NIQURPV19QUk9QRVJUWSksbz0wO2YmJm88Zi5sZW5ndGg7bysrKXt2YXIgZD1mW29dLm1hdGNoKHRoaXMuVEVYVF9TSEFET1dfVkFMVUVTKTtuLnB1c2goe2NvbG9yOm5ldyBzKGRbMF0pLG9mZnNldFg6ZFsxXT9wYXJzZUZsb2F0KGRbMV0ucmVwbGFjZShcInB4XCIsXCJcIikpOjAsb2Zmc2V0WTpkWzJdP3BhcnNlRmxvYXQoZFsyXS5yZXBsYWNlKFwicHhcIixcIlwiKSk6MCxibHVyOmRbM10/ZFszXS5yZXBsYWNlKFwicHhcIixcIlwiKTowfSl9cmV0dXJuIG59LGYucHJvdG90eXBlLnBhcnNlVHJhbnNmb3JtPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHJhbnNmb3JtRGF0YSlpZih0aGlzLmhhc1RyYW5zZm9ybSgpKXt2YXIgZT10aGlzLnBhcnNlQm91bmRzKCksbj10aGlzLnByZWZpeGVkQ3NzKFwidHJhbnNmb3JtT3JpZ2luXCIpLnNwbGl0KFwiIFwiKS5tYXAodCkubWFwKGwpO25bMF0rPWUubGVmdCxuWzFdKz1lLnRvcCx0aGlzLnRyYW5zZm9ybURhdGE9e29yaWdpbjpuLG1hdHJpeDp0aGlzLnBhcnNlVHJhbnNmb3JtTWF0cml4KCl9fWVsc2UgdGhpcy50cmFuc2Zvcm1EYXRhPXtvcmlnaW46WzAsMF0sbWF0cml4OlsxLDAsMCwxLDAsMF19O3JldHVybiB0aGlzLnRyYW5zZm9ybURhdGF9LGYucHJvdG90eXBlLnBhcnNlVHJhbnNmb3JtTWF0cml4PWZ1bmN0aW9uKCl7aWYoIXRoaXMudHJhbnNmb3JtTWF0cml4KXt2YXIgZT10aGlzLnByZWZpeGVkQ3NzKFwidHJhbnNmb3JtXCIpLG49ZT9kKGUubWF0Y2godGhpcy5NQVRSSVhfUFJPUEVSVFkpKTpudWxsO3RoaXMudHJhbnNmb3JtTWF0cml4PW4/bjpbMSwwLDAsMSwwLDBdfXJldHVybiB0aGlzLnRyYW5zZm9ybU1hdHJpeH0sZi5wcm90b3R5cGUucGFyc2VCb3VuZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib3VuZHN8fCh0aGlzLmJvdW5kcz10aGlzLmhhc1RyYW5zZm9ybSgpP2ModGhpcy5ub2RlKTphKHRoaXMubm9kZSkpfSxmLnByb3RvdHlwZS5oYXNUcmFuc2Zvcm09ZnVuY3Rpb24oKXtyZXR1cm5cIjEsMCwwLDEsMCwwXCIhPT10aGlzLnBhcnNlVHJhbnNmb3JtTWF0cml4KCkuam9pbihcIixcIil8fHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5oYXNUcmFuc2Zvcm0oKX0sZi5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm5vZGUudmFsdWV8fFwiXCI7cmV0dXJuXCJTRUxFQ1RcIj09PXRoaXMubm9kZS50YWdOYW1lP2U9byh0aGlzLm5vZGUpOlwicGFzc3dvcmRcIj09PXRoaXMubm9kZS50eXBlJiYoZT1BcnJheShlLmxlbmd0aCsxKS5qb2luKFwi4oCiXCIpKSwwPT09ZS5sZW5ndGg/dGhpcy5ub2RlLnBsYWNlaG9sZGVyfHxcIlwiOmV9LGYucHJvdG90eXBlLk1BVFJJWF9QUk9QRVJUWT0vKG1hdHJpeHxtYXRyaXgzZClcXCgoLispXFwpLyxmLnByb3RvdHlwZS5URVhUX1NIQURPV19QUk9QRVJUWT0vKChyZ2JhfHJnYilcXChbXlxcKV0rXFwpKFxccy0/XFxkK3B4KXswLH0pL2csZi5wcm90b3R5cGUuVEVYVF9TSEFET1dfVkFMVUVTPS8oLT9cXGQrcHgpfCgjLispfChyZ2JcXCguK1xcKSl8KHJnYmFcXCguK1xcKSkvZyxmLnByb3RvdHlwZS5DTElQPS9ecmVjdFxcKChcXGQrKXB4LD8gKFxcZCspcHgsPyAoXFxkKylweCw/IChcXGQrKXB4XFwpJC8sbi5leHBvcnRzPWZ9LHtcIi4vY29sb3JcIjozLFwiLi91dGlsc1wiOjI2fV0sMTU6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gZihlLG4sZixvLGQpe04oXCJTdGFydGluZyBOb2RlUGFyc2VyXCIpLHRoaXMucmVuZGVyZXI9bix0aGlzLm9wdGlvbnM9ZCx0aGlzLnJhbmdlPW51bGwsdGhpcy5zdXBwb3J0PWYsdGhpcy5yZW5kZXJRdWV1ZT1bXSx0aGlzLnN0YWNrPW5ldyBVKCEwLDEsZS5vd25lckRvY3VtZW50LG51bGwpO3ZhciBpPW5ldyBQKGUsbnVsbCk7aWYoZC5iYWNrZ3JvdW5kJiZuLnJlY3RhbmdsZSgwLDAsbi53aWR0aCxuLmhlaWdodCxuZXcgVChkLmJhY2tncm91bmQpKSxlPT09ZS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCl7dmFyIHQ9bmV3IFAoaS5jb2xvcihcImJhY2tncm91bmRDb2xvclwiKS5pc1RyYW5zcGFyZW50KCk/ZS5vd25lckRvY3VtZW50LmJvZHk6ZS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxudWxsKTtuLnJlY3RhbmdsZSgwLDAsbi53aWR0aCxuLmhlaWdodCx0LmNvbG9yKFwiYmFja2dyb3VuZENvbG9yXCIpKX1pLnZpc2liaWxlPWkuaXNFbGVtZW50VmlzaWJsZSgpLHRoaXMuY3JlYXRlUHNldWRvSGlkZVN0eWxlcyhlLm93bmVyRG9jdW1lbnQpLHRoaXMuZGlzYWJsZUFuaW1hdGlvbnMoZS5vd25lckRvY3VtZW50KSx0aGlzLm5vZGVzPUkoW2ldLmNvbmNhdCh0aGlzLmdldENoaWxkcmVuKGkpKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUudmlzaWJsZT1lLmlzRWxlbWVudFZpc2libGUoKX0pLm1hcCh0aGlzLmdldFBzZXVkb0VsZW1lbnRzLHRoaXMpKSx0aGlzLmZvbnRNZXRyaWNzPW5ldyBTLE4oXCJGZXRjaGVkIG5vZGVzLCB0b3RhbDpcIix0aGlzLm5vZGVzLmxlbmd0aCksTihcIkNhbGN1bGF0ZSBvdmVyZmxvdyBjbGlwc1wiKSx0aGlzLmNhbGN1bGF0ZU92ZXJmbG93Q2xpcHMoKSxOKFwiU3RhcnQgZmV0Y2hpbmcgaW1hZ2VzXCIpLHRoaXMuaW1hZ2VzPW8uZmV0Y2godGhpcy5ub2Rlcy5maWx0ZXIoQSkpLHRoaXMucmVhZHk9dGhpcy5pbWFnZXMucmVhZHkudGhlbihXKGZ1bmN0aW9uKCl7cmV0dXJuIE4oXCJJbWFnZXMgbG9hZGVkLCBzdGFydGluZyBwYXJzaW5nXCIpLE4oXCJDcmVhdGluZyBzdGFja2luZyBjb250ZXh0c1wiKSx0aGlzLmNyZWF0ZVN0YWNraW5nQ29udGV4dHMoKSxOKFwiU29ydGluZyBzdGFja2luZyBjb250ZXh0c1wiKSx0aGlzLnNvcnRTdGFja2luZ0NvbnRleHRzKHRoaXMuc3RhY2spLHRoaXMucGFyc2UodGhpcy5zdGFjayksTihcIlJlbmRlciBxdWV1ZSBjcmVhdGVkIHdpdGggXCIrdGhpcy5yZW5kZXJRdWV1ZS5sZW5ndGgrXCIgaXRlbXNcIiksbmV3IFByb21pc2UoVyhmdW5jdGlvbihlKXtkLmFzeW5jP1wiZnVuY3Rpb25cIj09dHlwZW9mIGQuYXN5bmM/ZC5hc3luYy5jYWxsKHRoaXMsdGhpcy5yZW5kZXJRdWV1ZSxlKTp0aGlzLnJlbmRlclF1ZXVlLmxlbmd0aD4wPyh0aGlzLnJlbmRlckluZGV4PTAsdGhpcy5hc3luY1JlbmRlcmVyKHRoaXMucmVuZGVyUXVldWUsZSkpOmUoKToodGhpcy5yZW5kZXJRdWV1ZS5mb3JFYWNoKHRoaXMucGFpbnQsdGhpcyksZSgpKX0sdGhpcykpfSx0aGlzKSl9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZS5wYXJlbnQmJmUucGFyZW50LmNsaXAubGVuZ3RofWZ1bmN0aW9uIGQoZSl7cmV0dXJuIGUucmVwbGFjZSgvKFxcLVthLXpdKS9nLGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvVXBwZXJDYXNlKCkucmVwbGFjZShcIi1cIixcIlwiKX0pfWZ1bmN0aW9uIGkoKXt9ZnVuY3Rpb24gdChlLG4sZixvKXtyZXR1cm4gZS5tYXAoZnVuY3Rpb24oZCxpKXtpZihkLndpZHRoPjApe3ZhciB0PW4ubGVmdCxsPW4udG9wLHM9bi53aWR0aCx1PW4uaGVpZ2h0LWVbMl0ud2lkdGg7c3dpdGNoKGkpe2Nhc2UgMDp1PWVbMF0ud2lkdGgsZC5hcmdzPWEoe2MxOlt0LGxdLGMyOlt0K3MsbF0sYzM6W3Qrcy1lWzFdLndpZHRoLGwrdV0sYzQ6W3QrZVszXS53aWR0aCxsK3VdfSxvWzBdLG9bMV0sZi50b3BMZWZ0T3V0ZXIsZi50b3BMZWZ0SW5uZXIsZi50b3BSaWdodE91dGVyLGYudG9wUmlnaHRJbm5lcik7YnJlYWs7Y2FzZSAxOnQ9bi5sZWZ0K24ud2lkdGgtZVsxXS53aWR0aCxzPWVbMV0ud2lkdGgsZC5hcmdzPWEoe2MxOlt0K3MsbF0sYzI6W3QrcyxsK3UrZVsyXS53aWR0aF0sYzM6W3QsbCt1XSxjNDpbdCxsK2VbMF0ud2lkdGhdfSxvWzFdLG9bMl0sZi50b3BSaWdodE91dGVyLGYudG9wUmlnaHRJbm5lcixmLmJvdHRvbVJpZ2h0T3V0ZXIsZi5ib3R0b21SaWdodElubmVyKTticmVhaztjYXNlIDI6bD1sK24uaGVpZ2h0LWVbMl0ud2lkdGgsdT1lWzJdLndpZHRoLGQuYXJncz1hKHtjMTpbdCtzLGwrdV0sYzI6W3QsbCt1XSxjMzpbdCtlWzNdLndpZHRoLGxdLGM0Olt0K3MtZVszXS53aWR0aCxsXX0sb1syXSxvWzNdLGYuYm90dG9tUmlnaHRPdXRlcixmLmJvdHRvbVJpZ2h0SW5uZXIsZi5ib3R0b21MZWZ0T3V0ZXIsZi5ib3R0b21MZWZ0SW5uZXIpO2JyZWFrO2Nhc2UgMzpzPWVbM10ud2lkdGgsZC5hcmdzPWEoe2MxOlt0LGwrdStlWzJdLndpZHRoXSxjMjpbdCxsXSxjMzpbdCtzLGwrZVswXS53aWR0aF0sYzQ6W3QrcyxsK3VdfSxvWzNdLG9bMF0sZi5ib3R0b21MZWZ0T3V0ZXIsZi5ib3R0b21MZWZ0SW5uZXIsZi50b3BMZWZ0T3V0ZXIsZi50b3BMZWZ0SW5uZXIpfX1yZXR1cm4gZH0pfWZ1bmN0aW9uIGwoZSxuLGYsbyl7dmFyIGQ9NCooKE1hdGguc3FydCgyKS0xKS8zKSxpPWYqZCx0PW8qZCxsPWUrZixzPW4rbztyZXR1cm57dG9wTGVmdDp1KHt4OmUseTpzfSx7eDplLHk6cy10fSx7eDpsLWkseTpufSx7eDpsLHk6bn0pLHRvcFJpZ2h0OnUoe3g6ZSx5Om59LHt4OmUraSx5Om59LHt4OmwseTpzLXR9LHt4OmwseTpzfSksYm90dG9tUmlnaHQ6dSh7eDpsLHk6bn0se3g6bCx5Om4rdH0se3g6ZStpLHk6c30se3g6ZSx5OnN9KSxib3R0b21MZWZ0OnUoe3g6bCx5OnN9LHt4OmwtaSx5OnN9LHt4OmUseTpuK3R9LHt4OmUseTpufSl9fWZ1bmN0aW9uIHMoZSxuLGYpe3ZhciBvPWUubGVmdCxkPWUudG9wLGk9ZS53aWR0aCx0PWUuaGVpZ2h0LHM9blswXVswXTxpLzI/blswXVswXTppLzIsdT1uWzBdWzFdPHQvMj9uWzBdWzFdOnQvMixhPW5bMV1bMF08aS8yP25bMV1bMF06aS8yLHA9blsxXVsxXTx0LzI/blsxXVsxXTp0LzIsYz1uWzJdWzBdPGkvMj9uWzJdWzBdOmkvMix5PW5bMl1bMV08dC8yP25bMl1bMV06dC8yLG09blszXVswXTxpLzI/blszXVswXTppLzIscj1uWzNdWzFdPHQvMj9uWzNdWzFdOnQvMix2PWktYSx3PXQteSxiPWktYyxnPXQtcjtyZXR1cm57dG9wTGVmdE91dGVyOmwobyxkLHMsdSkudG9wTGVmdC5zdWJkaXZpZGUoLjUpLHRvcExlZnRJbm5lcjpsKG8rZlszXS53aWR0aCxkK2ZbMF0ud2lkdGgsTWF0aC5tYXgoMCxzLWZbM10ud2lkdGgpLE1hdGgubWF4KDAsdS1mWzBdLndpZHRoKSkudG9wTGVmdC5zdWJkaXZpZGUoLjUpLHRvcFJpZ2h0T3V0ZXI6bChvK3YsZCxhLHApLnRvcFJpZ2h0LnN1YmRpdmlkZSguNSksdG9wUmlnaHRJbm5lcjpsKG8rTWF0aC5taW4odixpK2ZbM10ud2lkdGgpLGQrZlswXS53aWR0aCx2PmkrZlszXS53aWR0aD8wOmEtZlszXS53aWR0aCxwLWZbMF0ud2lkdGgpLnRvcFJpZ2h0LnN1YmRpdmlkZSguNSksYm90dG9tUmlnaHRPdXRlcjpsKG8rYixkK3csYyx5KS5ib3R0b21SaWdodC5zdWJkaXZpZGUoLjUpLGJvdHRvbVJpZ2h0SW5uZXI6bChvK01hdGgubWluKGIsaS1mWzNdLndpZHRoKSxkK01hdGgubWluKHcsdCtmWzBdLndpZHRoKSxNYXRoLm1heCgwLGMtZlsxXS53aWR0aCkseS1mWzJdLndpZHRoKS5ib3R0b21SaWdodC5zdWJkaXZpZGUoLjUpLGJvdHRvbUxlZnRPdXRlcjpsKG8sZCtnLG0scikuYm90dG9tTGVmdC5zdWJkaXZpZGUoLjUpLGJvdHRvbUxlZnRJbm5lcjpsKG8rZlszXS53aWR0aCxkK2csTWF0aC5tYXgoMCxtLWZbM10ud2lkdGgpLHItZlsyXS53aWR0aCkuYm90dG9tTGVmdC5zdWJkaXZpZGUoLjUpfVxufWZ1bmN0aW9uIHUoZSxuLGYsbyl7dmFyIGQ9ZnVuY3Rpb24oZSxuLGYpe3JldHVybnt4OmUueCsobi54LWUueCkqZix5OmUueSsobi55LWUueSkqZn19O3JldHVybntzdGFydDplLHN0YXJ0Q29udHJvbDpuLGVuZENvbnRyb2w6ZixlbmQ6byxzdWJkaXZpZGU6ZnVuY3Rpb24oaSl7dmFyIHQ9ZChlLG4saSksbD1kKG4sZixpKSxzPWQoZixvLGkpLGE9ZCh0LGwsaSkscD1kKGwscyxpKSxjPWQoYSxwLGkpO3JldHVyblt1KGUsdCxhLGMpLHUoYyxwLHMsbyldfSxjdXJ2ZVRvOmZ1bmN0aW9uKGUpe2UucHVzaChbXCJiZXppZXJDdXJ2ZVwiLG4ueCxuLnksZi54LGYueSxvLngsby55XSl9LGN1cnZlVG9SZXZlcnNlZDpmdW5jdGlvbihvKXtvLnB1c2goW1wiYmV6aWVyQ3VydmVcIixmLngsZi55LG4ueCxuLnksZS54LGUueV0pfX19ZnVuY3Rpb24gYShlLG4sZixvLGQsaSx0KXt2YXIgbD1bXTtyZXR1cm4gblswXT4wfHxuWzFdPjA/KGwucHVzaChbXCJsaW5lXCIsb1sxXS5zdGFydC54LG9bMV0uc3RhcnQueV0pLG9bMV0uY3VydmVUbyhsKSk6bC5wdXNoKFtcImxpbmVcIixlLmMxWzBdLGUuYzFbMV1dKSxmWzBdPjB8fGZbMV0+MD8obC5wdXNoKFtcImxpbmVcIixpWzBdLnN0YXJ0LngsaVswXS5zdGFydC55XSksaVswXS5jdXJ2ZVRvKGwpLGwucHVzaChbXCJsaW5lXCIsdFswXS5lbmQueCx0WzBdLmVuZC55XSksdFswXS5jdXJ2ZVRvUmV2ZXJzZWQobCkpOihsLnB1c2goW1wibGluZVwiLGUuYzJbMF0sZS5jMlsxXV0pLGwucHVzaChbXCJsaW5lXCIsZS5jM1swXSxlLmMzWzFdXSkpLG5bMF0+MHx8blsxXT4wPyhsLnB1c2goW1wibGluZVwiLGRbMV0uZW5kLngsZFsxXS5lbmQueV0pLGRbMV0uY3VydmVUb1JldmVyc2VkKGwpKTpsLnB1c2goW1wibGluZVwiLGUuYzRbMF0sZS5jNFsxXV0pLGx9ZnVuY3Rpb24gcChlLG4sZixvLGQsaSx0KXtuWzBdPjB8fG5bMV0+MD8oZS5wdXNoKFtcImxpbmVcIixvWzBdLnN0YXJ0Lngsb1swXS5zdGFydC55XSksb1swXS5jdXJ2ZVRvKGUpLG9bMV0uY3VydmVUbyhlKSk6ZS5wdXNoKFtcImxpbmVcIixpLHRdKSwoZlswXT4wfHxmWzFdPjApJiZlLnB1c2goW1wibGluZVwiLGRbMF0uc3RhcnQueCxkWzBdLnN0YXJ0LnldKX1mdW5jdGlvbiBjKGUpe3JldHVybiBlLmNzc0ludChcInpJbmRleFwiKTwwfWZ1bmN0aW9uIHkoZSl7cmV0dXJuIGUuY3NzSW50KFwiekluZGV4XCIpPjB9ZnVuY3Rpb24gbShlKXtyZXR1cm4gMD09PWUuY3NzSW50KFwiekluZGV4XCIpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuLTEhPT1bXCJpbmxpbmVcIixcImlubGluZS1ibG9ja1wiLFwiaW5saW5lLXRhYmxlXCJdLmluZGV4T2YoZS5jc3MoXCJkaXNwbGF5XCIpKX1mdW5jdGlvbiB2KGUpe3JldHVybiBlIGluc3RhbmNlb2YgVX1mdW5jdGlvbiB3KGUpe3JldHVybiBlLm5vZGUuZGF0YS50cmltKCkubGVuZ3RoPjB9ZnVuY3Rpb24gYihlKXtyZXR1cm4vXihub3JtYWx8bm9uZXwwcHgpJC8udGVzdChlLnBhcmVudC5jc3MoXCJsZXR0ZXJTcGFjaW5nXCIpKX1mdW5jdGlvbiBnKGUpe3JldHVybltcIlRvcExlZnRcIixcIlRvcFJpZ2h0XCIsXCJCb3R0b21SaWdodFwiLFwiQm90dG9tTGVmdFwiXS5tYXAoZnVuY3Rpb24obil7dmFyIGY9ZS5jc3MoXCJib3JkZXJcIituK1wiUmFkaXVzXCIpLG89Zi5zcGxpdChcIiBcIik7cmV0dXJuIG8ubGVuZ3RoPD0xJiYob1sxXT1vWzBdKSxvLm1hcChGKX0pfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGUubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERXx8ZS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFfWZ1bmN0aW9uIHgoZSl7dmFyIG49ZS5jc3MoXCJwb3NpdGlvblwiKSxmPS0xIT09W1wiYWJzb2x1dGVcIixcInJlbGF0aXZlXCIsXCJmaXhlZFwiXS5pbmRleE9mKG4pP2UuY3NzKFwiekluZGV4XCIpOlwiYXV0b1wiO3JldHVyblwiYXV0b1wiIT09Zn1mdW5jdGlvbiBqKGUpe3JldHVyblwic3RhdGljXCIhPT1lLmNzcyhcInBvc2l0aW9uXCIpfWZ1bmN0aW9uIGsoZSl7cmV0dXJuXCJub25lXCIhPT1lLmNzcyhcImZsb2F0XCIpfWZ1bmN0aW9uIHEoZSl7cmV0dXJuLTEhPT1bXCJpbmxpbmUtYmxvY2tcIixcImlubGluZS10YWJsZVwiXS5pbmRleE9mKGUuY3NzKFwiZGlzcGxheVwiKSl9ZnVuY3Rpb24geihlKXt2YXIgbj10aGlzO3JldHVybiBmdW5jdGlvbigpe3JldHVybiFlLmFwcGx5KG4sYXJndW1lbnRzKX19ZnVuY3Rpb24gQShlKXtyZXR1cm4gZS5ub2RlLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREV9ZnVuY3Rpb24gQihlKXtyZXR1cm4gZS5pc1BzZXVkb0VsZW1lbnQ9PT0hMH1mdW5jdGlvbiBDKGUpe3JldHVybiBlLm5vZGUubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERX1mdW5jdGlvbiBEKGUpe3JldHVybiBmdW5jdGlvbihuLGYpe3JldHVybiBuLmNzc0ludChcInpJbmRleFwiKStlLmluZGV4T2YobikvZS5sZW5ndGgtKGYuY3NzSW50KFwiekluZGV4XCIpK2UuaW5kZXhPZihmKS9lLmxlbmd0aCl9fWZ1bmN0aW9uIEUoZSl7cmV0dXJuIGUuZ2V0T3BhY2l0eSgpPDF9ZnVuY3Rpb24gRihlKXtyZXR1cm4gcGFyc2VJbnQoZSwxMCl9ZnVuY3Rpb24gRyhlKXtyZXR1cm4gZS53aWR0aH1mdW5jdGlvbiBIKGUpe3JldHVybiBlLm5vZGUubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8LTE9PT1bXCJTQ1JJUFRcIixcIkhFQURcIixcIlRJVExFXCIsXCJPQkpFQ1RcIixcIkJSXCIsXCJPUFRJT05cIl0uaW5kZXhPZihlLm5vZGUubm9kZU5hbWUpfWZ1bmN0aW9uIEkoZSl7cmV0dXJuW10uY29uY2F0LmFwcGx5KFtdLGUpfWZ1bmN0aW9uIEooZSl7dmFyIG49ZS5zdWJzdHIoMCwxKTtyZXR1cm4gbj09PWUuc3Vic3RyKGUubGVuZ3RoLTEpJiZuLm1hdGNoKC8nfFwiLyk/ZS5zdWJzdHIoMSxlLmxlbmd0aC0yKTplfWZ1bmN0aW9uIEsoZSl7Zm9yKHZhciBuLGY9W10sbz0wLGQ9ITE7ZS5sZW5ndGg7KUwoZVtvXSk9PT1kPyhuPWUuc3BsaWNlKDAsbyksbi5sZW5ndGgmJmYucHVzaChPLnVjczIuZW5jb2RlKG4pKSxkPSFkLG89MCk6bysrLG8+PWUubGVuZ3RoJiYobj1lLnNwbGljZSgwLG8pLG4ubGVuZ3RoJiZmLnB1c2goTy51Y3MyLmVuY29kZShuKSkpO3JldHVybiBmfWZ1bmN0aW9uIEwoZSl7cmV0dXJuLTEhPT1bMzIsMTMsMTAsOSw0NV0uaW5kZXhPZihlKX1mdW5jdGlvbiBNKGUpe3JldHVybi9bXlxcdTAwMDAtXFx1MDBmZl0vLnRlc3QoZSl9dmFyIE49ZShcIi4vbG9nXCIpLE89ZShcInB1bnljb2RlXCIpLFA9ZShcIi4vbm9kZWNvbnRhaW5lclwiKSxRPWUoXCIuL3RleHRjb250YWluZXJcIiksUj1lKFwiLi9wc2V1ZG9lbGVtZW50Y29udGFpbmVyXCIpLFM9ZShcIi4vZm9udG1ldHJpY3NcIiksVD1lKFwiLi9jb2xvclwiKSxVPWUoXCIuL3N0YWNraW5nY29udGV4dFwiKSxWPWUoXCIuL3V0aWxzXCIpLFc9Vi5iaW5kLFg9Vi5nZXRCb3VuZHMsWT1WLnBhcnNlQmFja2dyb3VuZHMsWj1WLm9mZnNldEJvdW5kcztmLnByb3RvdHlwZS5jYWxjdWxhdGVPdmVyZmxvd0NsaXBzPWZ1bmN0aW9uKCl7dGhpcy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKEEoZSkpe0IoZSkmJmUuYXBwZW5kVG9ET00oKSxlLmJvcmRlcnM9dGhpcy5wYXJzZUJvcmRlcnMoZSk7dmFyIG49XCJoaWRkZW5cIj09PWUuY3NzKFwib3ZlcmZsb3dcIik/W2UuYm9yZGVycy5jbGlwXTpbXSxmPWUucGFyc2VDbGlwKCk7ZiYmLTEhPT1bXCJhYnNvbHV0ZVwiLFwiZml4ZWRcIl0uaW5kZXhPZihlLmNzcyhcInBvc2l0aW9uXCIpKSYmbi5wdXNoKFtbXCJyZWN0XCIsZS5ib3VuZHMubGVmdCtmLmxlZnQsZS5ib3VuZHMudG9wK2YudG9wLGYucmlnaHQtZi5sZWZ0LGYuYm90dG9tLWYudG9wXV0pLGUuY2xpcD1vKGUpP2UucGFyZW50LmNsaXAuY29uY2F0KG4pOm4sZS5iYWNrZ3JvdW5kQ2xpcD1cImhpZGRlblwiIT09ZS5jc3MoXCJvdmVyZmxvd1wiKT9lLmNsaXAuY29uY2F0KFtlLmJvcmRlcnMuY2xpcF0pOmUuY2xpcCxCKGUpJiZlLmNsZWFuRE9NKCl9ZWxzZSBDKGUpJiYoZS5jbGlwPW8oZSk/ZS5wYXJlbnQuY2xpcDpbXSk7QihlKXx8KGUuYm91bmRzPW51bGwpfSx0aGlzKX0sZi5wcm90b3R5cGUuYXN5bmNSZW5kZXJlcj1mdW5jdGlvbihlLG4sZil7Zj1mfHxEYXRlLm5vdygpLHRoaXMucGFpbnQoZVt0aGlzLnJlbmRlckluZGV4KytdKSxlLmxlbmd0aD09PXRoaXMucmVuZGVySW5kZXg/bigpOmYrMjA+RGF0ZS5ub3coKT90aGlzLmFzeW5jUmVuZGVyZXIoZSxuLGYpOnNldFRpbWVvdXQoVyhmdW5jdGlvbigpe3RoaXMuYXN5bmNSZW5kZXJlcihlLG4pfSx0aGlzKSwwKX0sZi5wcm90b3R5cGUuY3JlYXRlUHNldWRvSGlkZVN0eWxlcz1mdW5jdGlvbihlKXt0aGlzLmNyZWF0ZVN0eWxlcyhlLFwiLlwiK1IucHJvdG90eXBlLlBTRVVET19ISURFX0VMRU1FTlRfQ0xBU1NfQkVGT1JFKyc6YmVmb3JlIHsgY29udGVudDogXCJcIiAhaW1wb3J0YW50OyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0uJytSLnByb3RvdHlwZS5QU0VVRE9fSElERV9FTEVNRU5UX0NMQVNTX0FGVEVSKyc6YWZ0ZXIgeyBjb250ZW50OiBcIlwiICFpbXBvcnRhbnQ7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpfSxmLnByb3RvdHlwZS5kaXNhYmxlQW5pbWF0aW9ucz1mdW5jdGlvbihlKXt0aGlzLmNyZWF0ZVN0eWxlcyhlLFwiKiB7IC13ZWJraXQtYW5pbWF0aW9uOiBub25lICFpbXBvcnRhbnQ7IC1tb3otYW5pbWF0aW9uOiBub25lICFpbXBvcnRhbnQ7IC1vLWFuaW1hdGlvbjogbm9uZSAhaW1wb3J0YW50OyBhbmltYXRpb246IG5vbmUgIWltcG9ydGFudDsgLXdlYmtpdC10cmFuc2l0aW9uOiBub25lICFpbXBvcnRhbnQ7IC1tb3otdHJhbnNpdGlvbjogbm9uZSAhaW1wb3J0YW50OyAtby10cmFuc2l0aW9uOiBub25lICFpbXBvcnRhbnQ7IHRyYW5zaXRpb246IG5vbmUgIWltcG9ydGFudDt9XCIpfSxmLnByb3RvdHlwZS5jcmVhdGVTdHlsZXM9ZnVuY3Rpb24oZSxuKXt2YXIgZj1lLmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtmLmlubmVySFRNTD1uLGUuYm9keS5hcHBlbmRDaGlsZChmKX0sZi5wcm90b3R5cGUuZ2V0UHNldWRvRWxlbWVudHM9ZnVuY3Rpb24oZSl7dmFyIG49W1tlXV07aWYoZS5ub2RlLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBmPXRoaXMuZ2V0UHNldWRvRWxlbWVudChlLFwiOmJlZm9yZVwiKSxvPXRoaXMuZ2V0UHNldWRvRWxlbWVudChlLFwiOmFmdGVyXCIpO2YmJm4ucHVzaChmKSxvJiZuLnB1c2gobyl9cmV0dXJuIEkobil9LGYucHJvdG90eXBlLmdldFBzZXVkb0VsZW1lbnQ9ZnVuY3Rpb24oZSxuKXt2YXIgZj1lLmNvbXB1dGVkU3R5bGUobik7aWYoIWZ8fCFmLmNvbnRlbnR8fFwibm9uZVwiPT09Zi5jb250ZW50fHxcIi1tb3otYWx0LWNvbnRlbnRcIj09PWYuY29udGVudHx8XCJub25lXCI9PT1mLmRpc3BsYXkpcmV0dXJuIG51bGw7Zm9yKHZhciBvPUooZi5jb250ZW50KSxpPVwidXJsXCI9PT1vLnN1YnN0cigwLDMpLHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpP1wiaW1nXCI6XCJodG1sMmNhbnZhc3BzZXVkb2VsZW1lbnRcIiksbD1uZXcgUih0LGUsbikscz1mLmxlbmd0aC0xO3M+PTA7cy0tKXt2YXIgdT1kKGYuaXRlbShzKSk7dC5zdHlsZVt1XT1mW3VdfWlmKHQuY2xhc3NOYW1lPVIucHJvdG90eXBlLlBTRVVET19ISURFX0VMRU1FTlRfQ0xBU1NfQkVGT1JFK1wiIFwiK1IucHJvdG90eXBlLlBTRVVET19ISURFX0VMRU1FTlRfQ0xBU1NfQUZURVIsaSlyZXR1cm4gdC5zcmM9WShvKVswXS5hcmdzWzBdLFtsXTt2YXIgYT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvKTtyZXR1cm4gdC5hcHBlbmRDaGlsZChhKSxbbCxuZXcgUShhLGwpXX0sZi5wcm90b3R5cGUuZ2V0Q2hpbGRyZW49ZnVuY3Rpb24oZSl7cmV0dXJuIEkoW10uZmlsdGVyLmNhbGwoZS5ub2RlLmNoaWxkTm9kZXMsaCkubWFwKGZ1bmN0aW9uKG4pe3ZhciBmPVtuLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREU/bmV3IFEobixlKTpuZXcgUChuLGUpXS5maWx0ZXIoSCk7cmV0dXJuIG4ubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSYmZi5sZW5ndGgmJlwiVEVYVEFSRUFcIiE9PW4udGFnTmFtZT9mWzBdLmlzRWxlbWVudFZpc2libGUoKT9mLmNvbmNhdCh0aGlzLmdldENoaWxkcmVuKGZbMF0pKTpbXTpmfSx0aGlzKSl9LGYucHJvdG90eXBlLm5ld1N0YWNraW5nQ29udGV4dD1mdW5jdGlvbihlLG4pe3ZhciBmPW5ldyBVKG4sZS5nZXRPcGFjaXR5KCksZS5ub2RlLGUucGFyZW50KTtlLmNsb25lVG8oZik7dmFyIG89bj9mLmdldFBhcmVudFN0YWNrKHRoaXMpOmYucGFyZW50LnN0YWNrO28uY29udGV4dHMucHVzaChmKSxlLnN0YWNrPWZ9LGYucHJvdG90eXBlLmNyZWF0ZVN0YWNraW5nQ29udGV4dHM9ZnVuY3Rpb24oKXt0aGlzLm5vZGVzLmZvckVhY2goZnVuY3Rpb24oZSl7QShlKSYmKHRoaXMuaXNSb290RWxlbWVudChlKXx8RShlKXx8eChlKXx8dGhpcy5pc0JvZHlXaXRoVHJhbnNwYXJlbnRSb290KGUpfHxlLmhhc1RyYW5zZm9ybSgpKT90aGlzLm5ld1N0YWNraW5nQ29udGV4dChlLCEwKTpBKGUpJiYoaihlKSYmbShlKXx8cShlKXx8ayhlKSk/dGhpcy5uZXdTdGFja2luZ0NvbnRleHQoZSwhMSk6ZS5hc3NpZ25TdGFjayhlLnBhcmVudC5zdGFjayl9LHRoaXMpfSxmLnByb3RvdHlwZS5pc0JvZHlXaXRoVHJhbnNwYXJlbnRSb290PWZ1bmN0aW9uKGUpe3JldHVyblwiQk9EWVwiPT09ZS5ub2RlLm5vZGVOYW1lJiZlLnBhcmVudC5jb2xvcihcImJhY2tncm91bmRDb2xvclwiKS5pc1RyYW5zcGFyZW50KCl9LGYucHJvdG90eXBlLmlzUm9vdEVsZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lLnBhcmVudH0sZi5wcm90b3R5cGUuc29ydFN0YWNraW5nQ29udGV4dHM9ZnVuY3Rpb24oZSl7ZS5jb250ZXh0cy5zb3J0KEQoZS5jb250ZXh0cy5zbGljZSgwKSkpLGUuY29udGV4dHMuZm9yRWFjaCh0aGlzLnNvcnRTdGFja2luZ0NvbnRleHRzLHRoaXMpfSxmLnByb3RvdHlwZS5wYXJzZVRleHRCb3VuZHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKG4sZixvKXtpZihcIm5vbmVcIiE9PWUucGFyZW50LmNzcyhcInRleHREZWNvcmF0aW9uXCIpLnN1YnN0cigwLDQpfHwwIT09bi50cmltKCkubGVuZ3RoKXtpZih0aGlzLnN1cHBvcnQucmFuZ2VCb3VuZHMmJiFlLnBhcmVudC5oYXNUcmFuc2Zvcm0oKSl7dmFyIGQ9by5zbGljZSgwLGYpLmpvaW4oXCJcIikubGVuZ3RoO3JldHVybiB0aGlzLmdldFJhbmdlQm91bmRzKGUubm9kZSxkLG4ubGVuZ3RoKX1pZihlLm5vZGUmJlwic3RyaW5nXCI9PXR5cGVvZiBlLm5vZGUuZGF0YSl7dmFyIGk9ZS5ub2RlLnNwbGl0VGV4dChuLmxlbmd0aCksdD10aGlzLmdldFdyYXBwZXJCb3VuZHMoZS5ub2RlLGUucGFyZW50Lmhhc1RyYW5zZm9ybSgpKTtyZXR1cm4gZS5ub2RlPWksdH19ZWxzZSghdGhpcy5zdXBwb3J0LnJhbmdlQm91bmRzfHxlLnBhcmVudC5oYXNUcmFuc2Zvcm0oKSkmJihlLm5vZGU9ZS5ub2RlLnNwbGl0VGV4dChuLmxlbmd0aCkpO3JldHVybnt9fX0sZi5wcm90b3R5cGUuZ2V0V3JhcHBlckJvdW5kcz1mdW5jdGlvbihlLG4pe3ZhciBmPWUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHRtbDJjYW52YXN3cmFwcGVyXCIpLG89ZS5wYXJlbnROb2RlLGQ9ZS5jbG9uZU5vZGUoITApO2YuYXBwZW5kQ2hpbGQoZS5jbG9uZU5vZGUoITApKSxvLnJlcGxhY2VDaGlsZChmLGUpO3ZhciBpPW4/WihmKTpYKGYpO3JldHVybiBvLnJlcGxhY2VDaGlsZChkLGYpLGl9LGYucHJvdG90eXBlLmdldFJhbmdlQm91bmRzPWZ1bmN0aW9uKGUsbixmKXt2YXIgbz10aGlzLnJhbmdlfHwodGhpcy5yYW5nZT1lLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSk7cmV0dXJuIG8uc2V0U3RhcnQoZSxuKSxvLnNldEVuZChlLG4rZiksby5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX0sZi5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oZSl7dmFyIG49ZS5jb250ZXh0cy5maWx0ZXIoYyksZj1lLmNoaWxkcmVuLmZpbHRlcihBKSxvPWYuZmlsdGVyKHooaykpLGQ9by5maWx0ZXIoeihqKSkuZmlsdGVyKHoocikpLHQ9Zi5maWx0ZXIoeihqKSkuZmlsdGVyKGspLGw9by5maWx0ZXIoeihqKSkuZmlsdGVyKHIpLHM9ZS5jb250ZXh0cy5jb25jYXQoby5maWx0ZXIoaikpLmZpbHRlcihtKSx1PWUuY2hpbGRyZW4uZmlsdGVyKEMpLmZpbHRlcih3KSxhPWUuY29udGV4dHMuZmlsdGVyKHkpO24uY29uY2F0KGQpLmNvbmNhdCh0KS5jb25jYXQobCkuY29uY2F0KHMpLmNvbmNhdCh1KS5jb25jYXQoYSkuZm9yRWFjaChmdW5jdGlvbihlKXt0aGlzLnJlbmRlclF1ZXVlLnB1c2goZSksdihlKSYmKHRoaXMucGFyc2UoZSksdGhpcy5yZW5kZXJRdWV1ZS5wdXNoKG5ldyBpKSl9LHRoaXMpfSxmLnByb3RvdHlwZS5wYWludD1mdW5jdGlvbihlKXt0cnl7ZSBpbnN0YW5jZW9mIGk/dGhpcy5yZW5kZXJlci5jdHgucmVzdG9yZSgpOkMoZSk/KEIoZS5wYXJlbnQpJiZlLnBhcmVudC5hcHBlbmRUb0RPTSgpLHRoaXMucGFpbnRUZXh0KGUpLEIoZS5wYXJlbnQpJiZlLnBhcmVudC5jbGVhbkRPTSgpKTp0aGlzLnBhaW50Tm9kZShlKX1jYXRjaChuKXtpZihOKG4pLHRoaXMub3B0aW9ucy5zdHJpY3QpdGhyb3cgbn19LGYucHJvdG90eXBlLnBhaW50Tm9kZT1mdW5jdGlvbihlKXt2KGUpJiYodGhpcy5yZW5kZXJlci5zZXRPcGFjaXR5KGUub3BhY2l0eSksdGhpcy5yZW5kZXJlci5jdHguc2F2ZSgpLGUuaGFzVHJhbnNmb3JtKCkmJnRoaXMucmVuZGVyZXIuc2V0VHJhbnNmb3JtKGUucGFyc2VUcmFuc2Zvcm0oKSkpLFwiSU5QVVRcIj09PWUubm9kZS5ub2RlTmFtZSYmXCJjaGVja2JveFwiPT09ZS5ub2RlLnR5cGU/dGhpcy5wYWludENoZWNrYm94KGUpOlwiSU5QVVRcIj09PWUubm9kZS5ub2RlTmFtZSYmXCJyYWRpb1wiPT09ZS5ub2RlLnR5cGU/dGhpcy5wYWludFJhZGlvKGUpOnRoaXMucGFpbnRFbGVtZW50KGUpfSxmLnByb3RvdHlwZS5wYWludEVsZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIG49ZS5wYXJzZUJvdW5kcygpO3RoaXMucmVuZGVyZXIuY2xpcChlLmJhY2tncm91bmRDbGlwLGZ1bmN0aW9uKCl7dGhpcy5yZW5kZXJlci5yZW5kZXJCYWNrZ3JvdW5kKGUsbixlLmJvcmRlcnMuYm9yZGVycy5tYXAoRykpfSx0aGlzKSx0aGlzLnJlbmRlcmVyLmNsaXAoZS5jbGlwLGZ1bmN0aW9uKCl7dGhpcy5yZW5kZXJlci5yZW5kZXJCb3JkZXJzKGUuYm9yZGVycy5ib3JkZXJzKX0sdGhpcyksdGhpcy5yZW5kZXJlci5jbGlwKGUuYmFja2dyb3VuZENsaXAsZnVuY3Rpb24oKXtzd2l0Y2goZS5ub2RlLm5vZGVOYW1lKXtjYXNlXCJzdmdcIjpjYXNlXCJJRlJBTUVcIjp2YXIgZj10aGlzLmltYWdlcy5nZXQoZS5ub2RlKTtmP3RoaXMucmVuZGVyZXIucmVuZGVySW1hZ2UoZSxuLGUuYm9yZGVycyxmKTpOKFwiRXJyb3IgbG9hZGluZyA8XCIrZS5ub2RlLm5vZGVOYW1lK1wiPlwiLGUubm9kZSk7YnJlYWs7Y2FzZVwiSU1HXCI6dmFyIG89dGhpcy5pbWFnZXMuZ2V0KGUubm9kZS5zcmMpO28/dGhpcy5yZW5kZXJlci5yZW5kZXJJbWFnZShlLG4sZS5ib3JkZXJzLG8pOk4oXCJFcnJvciBsb2FkaW5nIDxpbWc+XCIsZS5ub2RlLnNyYyk7YnJlYWs7Y2FzZVwiQ0FOVkFTXCI6dGhpcy5yZW5kZXJlci5yZW5kZXJJbWFnZShlLG4sZS5ib3JkZXJzLHtpbWFnZTplLm5vZGV9KTticmVhaztjYXNlXCJTRUxFQ1RcIjpjYXNlXCJJTlBVVFwiOmNhc2VcIlRFWFRBUkVBXCI6dGhpcy5wYWludEZvcm1WYWx1ZShlKX19LHRoaXMpfSxmLnByb3RvdHlwZS5wYWludENoZWNrYm94PWZ1bmN0aW9uKGUpe3ZhciBuPWUucGFyc2VCb3VuZHMoKSxmPU1hdGgubWluKG4ud2lkdGgsbi5oZWlnaHQpLG89e3dpZHRoOmYtMSxoZWlnaHQ6Zi0xLHRvcDpuLnRvcCxsZWZ0Om4ubGVmdH0sZD1bMywzXSxpPVtkLGQsZCxkXSxsPVsxLDEsMSwxXS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue2NvbG9yOm5ldyBUKFwiI0E1QTVBNVwiKSx3aWR0aDplfX0pLHU9cyhvLGksbCk7dGhpcy5yZW5kZXJlci5jbGlwKGUuYmFja2dyb3VuZENsaXAsZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLnJlY3RhbmdsZShvLmxlZnQrMSxvLnRvcCsxLG8ud2lkdGgtMixvLmhlaWdodC0yLG5ldyBUKFwiI0RFREVERVwiKSksdGhpcy5yZW5kZXJlci5yZW5kZXJCb3JkZXJzKHQobCxvLHUsaSkpLGUubm9kZS5jaGVja2VkJiYodGhpcy5yZW5kZXJlci5mb250KG5ldyBUKFwiIzQyNDI0MlwiKSxcIm5vcm1hbFwiLFwibm9ybWFsXCIsXCJib2xkXCIsZi0zK1wicHhcIixcImFyaWFsXCIpLHRoaXMucmVuZGVyZXIudGV4dChcIuKclFwiLG8ubGVmdCtmLzYsby50b3ArZi0xKSl9LHRoaXMpfSxmLnByb3RvdHlwZS5wYWludFJhZGlvPWZ1bmN0aW9uKGUpe3ZhciBuPWUucGFyc2VCb3VuZHMoKSxmPU1hdGgubWluKG4ud2lkdGgsbi5oZWlnaHQpLTI7dGhpcy5yZW5kZXJlci5jbGlwKGUuYmFja2dyb3VuZENsaXAsZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLmNpcmNsZVN0cm9rZShuLmxlZnQrMSxuLnRvcCsxLGYsbmV3IFQoXCIjREVERURFXCIpLDEsbmV3IFQoXCIjQTVBNUE1XCIpKSxlLm5vZGUuY2hlY2tlZCYmdGhpcy5yZW5kZXJlci5jaXJjbGUoTWF0aC5jZWlsKG4ubGVmdCtmLzQpKzEsTWF0aC5jZWlsKG4udG9wK2YvNCkrMSxNYXRoLmZsb29yKGYvMiksbmV3IFQoXCIjNDI0MjQyXCIpKX0sdGhpcyl9LGYucHJvdG90eXBlLnBhaW50Rm9ybVZhbHVlPWZ1bmN0aW9uKGUpe3ZhciBuPWUuZ2V0VmFsdWUoKTtpZihuLmxlbmd0aD4wKXt2YXIgZj1lLm5vZGUub3duZXJEb2N1bWVudCxvPWYuY3JlYXRlRWxlbWVudChcImh0bWwyY2FudmFzd3JhcHBlclwiKSxkPVtcImxpbmVIZWlnaHRcIixcInRleHRBbGlnblwiLFwiZm9udEZhbWlseVwiLFwiZm9udFdlaWdodFwiLFwiZm9udFNpemVcIixcImNvbG9yXCIsXCJwYWRkaW5nTGVmdFwiLFwicGFkZGluZ1RvcFwiLFwicGFkZGluZ1JpZ2h0XCIsXCJwYWRkaW5nQm90dG9tXCIsXCJ3aWR0aFwiLFwiaGVpZ2h0XCIsXCJib3JkZXJMZWZ0U3R5bGVcIixcImJvcmRlclRvcFN0eWxlXCIsXCJib3JkZXJMZWZ0V2lkdGhcIixcImJvcmRlclRvcFdpZHRoXCIsXCJib3hTaXppbmdcIixcIndoaXRlU3BhY2VcIixcIndvcmRXcmFwXCJdO2QuZm9yRWFjaChmdW5jdGlvbihuKXt0cnl7by5zdHlsZVtuXT1lLmNzcyhuKX1jYXRjaChmKXtOKFwiaHRtbDJjYW52YXM6IFBhcnNlOiBFeGNlcHRpb24gY2F1Z2h0IGluIHJlbmRlckZvcm1WYWx1ZTogXCIrZi5tZXNzYWdlKX19KTt2YXIgaT1lLnBhcnNlQm91bmRzKCk7by5zdHlsZS5wb3NpdGlvbj1cImZpeGVkXCIsby5zdHlsZS5sZWZ0PWkubGVmdCtcInB4XCIsby5zdHlsZS50b3A9aS50b3ArXCJweFwiLG8udGV4dENvbnRlbnQ9bixmLmJvZHkuYXBwZW5kQ2hpbGQobyksdGhpcy5wYWludFRleHQobmV3IFEoby5maXJzdENoaWxkLGUpKSxmLmJvZHkucmVtb3ZlQ2hpbGQobyl9fSxmLnByb3RvdHlwZS5wYWludFRleHQ9ZnVuY3Rpb24oZSl7ZS5hcHBseVRleHRUcmFuc2Zvcm0oKTt2YXIgbj1PLnVjczIuZGVjb2RlKGUubm9kZS5kYXRhKSxmPXRoaXMub3B0aW9ucy5sZXR0ZXJSZW5kZXJpbmcmJiFiKGUpfHxNKGUubm9kZS5kYXRhKT9uLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gTy51Y3MyLmVuY29kZShbZV0pfSk6SyhuKSxvPWUucGFyZW50LmZvbnRXZWlnaHQoKSxkPWUucGFyZW50LmNzcyhcImZvbnRTaXplXCIpLGk9ZS5wYXJlbnQuY3NzKFwiZm9udEZhbWlseVwiKSx0PWUucGFyZW50LnBhcnNlVGV4dFNoYWRvd3MoKTt0aGlzLnJlbmRlcmVyLmZvbnQoZS5wYXJlbnQuY29sb3IoXCJjb2xvclwiKSxlLnBhcmVudC5jc3MoXCJmb250U3R5bGVcIiksZS5wYXJlbnQuY3NzKFwiZm9udFZhcmlhbnRcIiksbyxkLGkpLHQubGVuZ3RoP3RoaXMucmVuZGVyZXIuZm9udFNoYWRvdyh0WzBdLmNvbG9yLHRbMF0ub2Zmc2V0WCx0WzBdLm9mZnNldFksdFswXS5ibHVyKTp0aGlzLnJlbmRlcmVyLmNsZWFyU2hhZG93KCksdGhpcy5yZW5kZXJlci5jbGlwKGUucGFyZW50LmNsaXAsZnVuY3Rpb24oKXtmLm1hcCh0aGlzLnBhcnNlVGV4dEJvdW5kcyhlKSx0aGlzKS5mb3JFYWNoKGZ1bmN0aW9uKG4sbyl7biYmKHRoaXMucmVuZGVyZXIudGV4dChmW29dLG4ubGVmdCxuLmJvdHRvbSksdGhpcy5yZW5kZXJUZXh0RGVjb3JhdGlvbihlLnBhcmVudCxuLHRoaXMuZm9udE1ldHJpY3MuZ2V0TWV0cmljcyhpLGQpKSl9LHRoaXMpfSx0aGlzKX0sZi5wcm90b3R5cGUucmVuZGVyVGV4dERlY29yYXRpb249ZnVuY3Rpb24oZSxuLGYpe3N3aXRjaChlLmNzcyhcInRleHREZWNvcmF0aW9uXCIpLnNwbGl0KFwiIFwiKVswXSl7Y2FzZVwidW5kZXJsaW5lXCI6dGhpcy5yZW5kZXJlci5yZWN0YW5nbGUobi5sZWZ0LE1hdGgucm91bmQobi50b3ArZi5iYXNlbGluZStmLmxpbmVXaWR0aCksbi53aWR0aCwxLGUuY29sb3IoXCJjb2xvclwiKSk7YnJlYWs7Y2FzZVwib3ZlcmxpbmVcIjp0aGlzLnJlbmRlcmVyLnJlY3RhbmdsZShuLmxlZnQsTWF0aC5yb3VuZChuLnRvcCksbi53aWR0aCwxLGUuY29sb3IoXCJjb2xvclwiKSk7YnJlYWs7Y2FzZVwibGluZS10aHJvdWdoXCI6dGhpcy5yZW5kZXJlci5yZWN0YW5nbGUobi5sZWZ0LE1hdGguY2VpbChuLnRvcCtmLm1pZGRsZStmLmxpbmVXaWR0aCksbi53aWR0aCwxLGUuY29sb3IoXCJjb2xvclwiKSl9fTt2YXIgJD17aW5zZXQ6W1tcImRhcmtlblwiLC42XSxbXCJkYXJrZW5cIiwuMV0sW1wiZGFya2VuXCIsLjFdLFtcImRhcmtlblwiLC42XV19O2YucHJvdG90eXBlLnBhcnNlQm9yZGVycz1mdW5jdGlvbihlKXt2YXIgbj1lLnBhcnNlQm91bmRzKCksZj1nKGUpLG89W1wiVG9wXCIsXCJSaWdodFwiLFwiQm90dG9tXCIsXCJMZWZ0XCJdLm1hcChmdW5jdGlvbihuLGYpe3ZhciBvPWUuY3NzKFwiYm9yZGVyXCIrbitcIlN0eWxlXCIpLGQ9ZS5jb2xvcihcImJvcmRlclwiK24rXCJDb2xvclwiKTtcImluc2V0XCI9PT1vJiZkLmlzQmxhY2soKSYmKGQ9bmV3IFQoWzI1NSwyNTUsMjU1LGQuYV0pKTt2YXIgaT0kW29dPyRbb11bZl06bnVsbDtyZXR1cm57d2lkdGg6ZS5jc3NJbnQoXCJib3JkZXJcIituK1wiV2lkdGhcIiksY29sb3I6aT9kW2lbMF1dKGlbMV0pOmQsYXJnczpudWxsfX0pLGQ9cyhuLGYsbyk7cmV0dXJue2NsaXA6dGhpcy5wYXJzZUJhY2tncm91bmRDbGlwKGUsZCxvLGYsbiksYm9yZGVyczp0KG8sbixkLGYpfX0sZi5wcm90b3R5cGUucGFyc2VCYWNrZ3JvdW5kQ2xpcD1mdW5jdGlvbihlLG4sZixvLGQpe3ZhciBpPWUuY3NzKFwiYmFja2dyb3VuZENsaXBcIiksdD1bXTtzd2l0Y2goaSl7Y2FzZVwiY29udGVudC1ib3hcIjpjYXNlXCJwYWRkaW5nLWJveFwiOnAodCxvWzBdLG9bMV0sbi50b3BMZWZ0SW5uZXIsbi50b3BSaWdodElubmVyLGQubGVmdCtmWzNdLndpZHRoLGQudG9wK2ZbMF0ud2lkdGgpLHAodCxvWzFdLG9bMl0sbi50b3BSaWdodElubmVyLG4uYm90dG9tUmlnaHRJbm5lcixkLmxlZnQrZC53aWR0aC1mWzFdLndpZHRoLGQudG9wK2ZbMF0ud2lkdGgpLHAodCxvWzJdLG9bM10sbi5ib3R0b21SaWdodElubmVyLG4uYm90dG9tTGVmdElubmVyLGQubGVmdCtkLndpZHRoLWZbMV0ud2lkdGgsZC50b3ArZC5oZWlnaHQtZlsyXS53aWR0aCkscCh0LG9bM10sb1swXSxuLmJvdHRvbUxlZnRJbm5lcixuLnRvcExlZnRJbm5lcixkLmxlZnQrZlszXS53aWR0aCxkLnRvcCtkLmhlaWdodC1mWzJdLndpZHRoKTticmVhaztkZWZhdWx0OnAodCxvWzBdLG9bMV0sbi50b3BMZWZ0T3V0ZXIsbi50b3BSaWdodE91dGVyLGQubGVmdCxkLnRvcCkscCh0LG9bMV0sb1syXSxuLnRvcFJpZ2h0T3V0ZXIsbi5ib3R0b21SaWdodE91dGVyLGQubGVmdCtkLndpZHRoLGQudG9wKSxwKHQsb1syXSxvWzNdLG4uYm90dG9tUmlnaHRPdXRlcixuLmJvdHRvbUxlZnRPdXRlcixkLmxlZnQrZC53aWR0aCxkLnRvcCtkLmhlaWdodCkscCh0LG9bM10sb1swXSxuLmJvdHRvbUxlZnRPdXRlcixuLnRvcExlZnRPdXRlcixkLmxlZnQsZC50b3ArZC5oZWlnaHQpfXJldHVybiB0fSxuLmV4cG9ydHM9Zn0se1wiLi9jb2xvclwiOjMsXCIuL2ZvbnRtZXRyaWNzXCI6NyxcIi4vbG9nXCI6MTMsXCIuL25vZGVjb250YWluZXJcIjoxNCxcIi4vcHNldWRvZWxlbWVudGNvbnRhaW5lclwiOjE4LFwiLi9zdGFja2luZ2NvbnRleHRcIjoyMSxcIi4vdGV4dGNvbnRhaW5lclwiOjI1LFwiLi91dGlsc1wiOjI2LHB1bnljb2RlOjF9XSwxNjpbZnVuY3Rpb24oZSxuLGYpe2Z1bmN0aW9uIG8oZSxuLGYpe3ZhciBvPVwid2l0aENyZWRlbnRpYWxzXCJpbiBuZXcgWE1MSHR0cFJlcXVlc3Q7aWYoIW4pcmV0dXJuIFByb21pc2UucmVqZWN0KFwiTm8gcHJveHkgY29uZmlndXJlZFwiKTt2YXIgZD10KG8pLHM9bChuLGUsZCk7cmV0dXJuIG8/YShzKTppKGYscyxkKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBtKGUuY29udGVudCl9KX1mdW5jdGlvbiBkKGUsbixmKXt2YXIgbz1cImNyb3NzT3JpZ2luXCJpbiBuZXcgSW1hZ2UsZD10KG8pLHM9bChuLGUsZCk7cmV0dXJuIG8/UHJvbWlzZS5yZXNvbHZlKHMpOmkoZixzLGQpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuXCJkYXRhOlwiK2UudHlwZStcIjtiYXNlNjQsXCIrZS5jb250ZW50fSl9ZnVuY3Rpb24gaShlLG4sZil7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG8sZCl7dmFyIGk9ZS5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLHQ9ZnVuY3Rpb24oKXtkZWxldGUgd2luZG93Lmh0bWwyY2FudmFzLnByb3h5W2ZdLGUuYm9keS5yZW1vdmVDaGlsZChpKX07d2luZG93Lmh0bWwyY2FudmFzLnByb3h5W2ZdPWZ1bmN0aW9uKGUpe3QoKSxvKGUpfSxpLnNyYz1uLGkub25lcnJvcj1mdW5jdGlvbihlKXt0KCksZChlKX0sZS5ib2R5LmFwcGVuZENoaWxkKGkpfSl9ZnVuY3Rpb24gdChlKXtyZXR1cm4gZT9cIlwiOlwiaHRtbDJjYW52YXNfXCIrRGF0ZS5ub3coKStcIl9cIisgKytyK1wiX1wiK01hdGgucm91bmQoMWU1Kk1hdGgucmFuZG9tKCkpfWZ1bmN0aW9uIGwoZSxuLGYpe3JldHVybiBlK1wiP3VybD1cIitlbmNvZGVVUklDb21wb25lbnQobikrKGYubGVuZ3RoP1wiJmNhbGxiYWNrPWh0bWwyY2FudmFzLnByb3h5LlwiK2Y6XCJcIil9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIGYsbz1uZXcgRE9NUGFyc2VyO3RyeXtmPW8ucGFyc2VGcm9tU3RyaW5nKG4sXCJ0ZXh0L2h0bWxcIil9Y2F0Y2goZCl7YyhcIkRPTVBhcnNlciBub3Qgc3VwcG9ydGVkLCBmYWxsaW5nIGJhY2sgdG8gY3JlYXRlSFRNTERvY3VtZW50XCIpLGY9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KFwiXCIpO3RyeXtmLm9wZW4oKSxmLndyaXRlKG4pLGYuY2xvc2UoKX1jYXRjaChpKXtjKFwiY3JlYXRlSFRNTERvY3VtZW50IHdyaXRlIG5vdCBzdXBwb3J0ZWQsIGZhbGxpbmcgYmFjayB0byBkb2N1bWVudC5ib2R5LmlubmVySFRNTFwiKSxmLmJvZHkuaW5uZXJIVE1MPW59fXZhciB0PWYucXVlcnlTZWxlY3RvcihcImJhc2VcIik7aWYoIXR8fCF0LmhyZWYuaG9zdCl7dmFyIGw9Zi5jcmVhdGVFbGVtZW50KFwiYmFzZVwiKTtsLmhyZWY9ZSxmLmhlYWQuaW5zZXJ0QmVmb3JlKGwsZi5oZWFkLmZpcnN0Q2hpbGQpfXJldHVybiBmfX1mdW5jdGlvbiB1KGUsbixmLGQsaSx0KXtyZXR1cm4gbmV3IG8oZSxuLHdpbmRvdy5kb2N1bWVudCkudGhlbihzKGUpKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB5KGUsZixkLGksdCwwLDApfSl9dmFyIGE9ZShcIi4veGhyXCIpLHA9ZShcIi4vdXRpbHNcIiksYz1lKFwiLi9sb2dcIikseT1lKFwiLi9jbG9uZVwiKSxtPXAuZGVjb2RlNjQscj0wO2YuUHJveHk9byxmLlByb3h5VVJMPWQsZi5sb2FkVXJsRG9jdW1lbnQ9dX0se1wiLi9jbG9uZVwiOjIsXCIuL2xvZ1wiOjEzLFwiLi91dGlsc1wiOjI2LFwiLi94aHJcIjoyOH1dLDE3OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSxuKXt2YXIgZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtmLmhyZWY9ZSxlPWYuaHJlZix0aGlzLnNyYz1lLHRoaXMuaW1hZ2U9bmV3IEltYWdlO3ZhciBkPXRoaXM7dGhpcy5wcm9taXNlPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGYsaSl7ZC5pbWFnZS5jcm9zc09yaWdpbj1cIkFub255bW91c1wiLGQuaW1hZ2Uub25sb2FkPWYsZC5pbWFnZS5vbmVycm9yPWksbmV3IG8oZSxuLGRvY3VtZW50KS50aGVuKGZ1bmN0aW9uKGUpe2QuaW1hZ2Uuc3JjPWV9KVtcImNhdGNoXCJdKGkpfSl9dmFyIG89ZShcIi4vcHJveHlcIikuUHJveHlVUkw7bi5leHBvcnRzPWZ9LHtcIi4vcHJveHlcIjoxNn1dLDE4OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSxuLGYpe28uY2FsbCh0aGlzLGUsbiksdGhpcy5pc1BzZXVkb0VsZW1lbnQ9ITAsdGhpcy5iZWZvcmU9XCI6YmVmb3JlXCI9PT1mfXZhciBvPWUoXCIuL25vZGVjb250YWluZXJcIik7Zi5wcm90b3R5cGUuY2xvbmVUbz1mdW5jdGlvbihlKXtmLnByb3RvdHlwZS5jbG9uZVRvLmNhbGwodGhpcyxlKSxlLmlzUHNldWRvRWxlbWVudD0hMCxlLmJlZm9yZT10aGlzLmJlZm9yZX0sZi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSksZi5wcm90b3R5cGUuYXBwZW5kVG9ET009ZnVuY3Rpb24oKXt0aGlzLmJlZm9yZT90aGlzLnBhcmVudC5ub2RlLmluc2VydEJlZm9yZSh0aGlzLm5vZGUsdGhpcy5wYXJlbnQubm9kZS5maXJzdENoaWxkKTp0aGlzLnBhcmVudC5ub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSksdGhpcy5wYXJlbnQubm9kZS5jbGFzc05hbWUrPVwiIFwiK3RoaXMuZ2V0SGlkZUNsYXNzKCl9LGYucHJvdG90eXBlLmNsZWFuRE9NPWZ1bmN0aW9uKCl7dGhpcy5ub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5ub2RlKSx0aGlzLnBhcmVudC5ub2RlLmNsYXNzTmFtZT10aGlzLnBhcmVudC5ub2RlLmNsYXNzTmFtZS5yZXBsYWNlKHRoaXMuZ2V0SGlkZUNsYXNzKCksXCJcIil9LGYucHJvdG90eXBlLmdldEhpZGVDbGFzcz1mdW5jdGlvbigpe3JldHVybiB0aGlzW1wiUFNFVURPX0hJREVfRUxFTUVOVF9DTEFTU19cIisodGhpcy5iZWZvcmU/XCJCRUZPUkVcIjpcIkFGVEVSXCIpXX0sZi5wcm90b3R5cGUuUFNFVURPX0hJREVfRUxFTUVOVF9DTEFTU19CRUZPUkU9XCJfX19odG1sMmNhbnZhc19fX3BzZXVkb2VsZW1lbnRfYmVmb3JlXCIsZi5wcm90b3R5cGUuUFNFVURPX0hJREVfRUxFTUVOVF9DTEFTU19BRlRFUj1cIl9fX2h0bWwyY2FudmFzX19fcHNldWRvZWxlbWVudF9hZnRlclwiLG4uZXhwb3J0cz1mfSx7XCIuL25vZGVjb250YWluZXJcIjoxNH1dLDE5OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSxuLGYsbyxkKXt0aGlzLndpZHRoPWUsdGhpcy5oZWlnaHQ9bix0aGlzLmltYWdlcz1mLHRoaXMub3B0aW9ucz1vLHRoaXMuZG9jdW1lbnQ9ZH12YXIgbz1lKFwiLi9sb2dcIik7Zi5wcm90b3R5cGUucmVuZGVySW1hZ2U9ZnVuY3Rpb24oZSxuLGYsbyl7dmFyIGQ9ZS5jc3NJbnQoXCJwYWRkaW5nTGVmdFwiKSxpPWUuY3NzSW50KFwicGFkZGluZ1RvcFwiKSx0PWUuY3NzSW50KFwicGFkZGluZ1JpZ2h0XCIpLGw9ZS5jc3NJbnQoXCJwYWRkaW5nQm90dG9tXCIpLHM9Zi5ib3JkZXJzLHU9bi53aWR0aC0oc1sxXS53aWR0aCtzWzNdLndpZHRoK2QrdCksYT1uLmhlaWdodC0oc1swXS53aWR0aCtzWzJdLndpZHRoK2krbCk7dGhpcy5kcmF3SW1hZ2UobywwLDAsby5pbWFnZS53aWR0aHx8dSxvLmltYWdlLmhlaWdodHx8YSxuLmxlZnQrZCtzWzNdLndpZHRoLG4udG9wK2krc1swXS53aWR0aCx1LGEpfSxmLnByb3RvdHlwZS5yZW5kZXJCYWNrZ3JvdW5kPWZ1bmN0aW9uKGUsbixmKXtuLmhlaWdodD4wJiZuLndpZHRoPjAmJih0aGlzLnJlbmRlckJhY2tncm91bmRDb2xvcihlLG4pLHRoaXMucmVuZGVyQmFja2dyb3VuZEltYWdlKGUsbixmKSl9LGYucHJvdG90eXBlLnJlbmRlckJhY2tncm91bmRDb2xvcj1mdW5jdGlvbihlLG4pe3ZhciBmPWUuY29sb3IoXCJiYWNrZ3JvdW5kQ29sb3JcIik7Zi5pc1RyYW5zcGFyZW50KCl8fHRoaXMucmVjdGFuZ2xlKG4ubGVmdCxuLnRvcCxuLndpZHRoLG4uaGVpZ2h0LGYpfSxmLnByb3RvdHlwZS5yZW5kZXJCb3JkZXJzPWZ1bmN0aW9uKGUpe2UuZm9yRWFjaCh0aGlzLnJlbmRlckJvcmRlcix0aGlzKX0sZi5wcm90b3R5cGUucmVuZGVyQm9yZGVyPWZ1bmN0aW9uKGUpe2UuY29sb3IuaXNUcmFuc3BhcmVudCgpfHxudWxsPT09ZS5hcmdzfHx0aGlzLmRyYXdTaGFwZShlLmFyZ3MsZS5jb2xvcil9LGYucHJvdG90eXBlLnJlbmRlckJhY2tncm91bmRJbWFnZT1mdW5jdGlvbihlLG4sZil7dmFyIGQ9ZS5wYXJzZUJhY2tncm91bmRJbWFnZXMoKTtkLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uKGQsaSx0KXtzd2l0Y2goZC5tZXRob2Qpe2Nhc2VcInVybFwiOnZhciBsPXRoaXMuaW1hZ2VzLmdldChkLmFyZ3NbMF0pO2w/dGhpcy5yZW5kZXJCYWNrZ3JvdW5kUmVwZWF0aW5nKGUsbixsLHQubGVuZ3RoLShpKzEpLGYpOm8oXCJFcnJvciBsb2FkaW5nIGJhY2tncm91bmQtaW1hZ2VcIixkLmFyZ3NbMF0pO2JyZWFrO2Nhc2VcImxpbmVhci1ncmFkaWVudFwiOmNhc2VcImdyYWRpZW50XCI6dmFyIHM9dGhpcy5pbWFnZXMuZ2V0KGQudmFsdWUpO3M/dGhpcy5yZW5kZXJCYWNrZ3JvdW5kR3JhZGllbnQocyxuLGYpOm8oXCJFcnJvciBsb2FkaW5nIGJhY2tncm91bmQtaW1hZ2VcIixkLmFyZ3NbMF0pO2JyZWFrO2Nhc2VcIm5vbmVcIjpicmVhaztkZWZhdWx0Om8oXCJVbmtub3duIGJhY2tncm91bmQtaW1hZ2UgdHlwZVwiLGQuYXJnc1swXSl9fSx0aGlzKX0sZi5wcm90b3R5cGUucmVuZGVyQmFja2dyb3VuZFJlcGVhdGluZz1mdW5jdGlvbihlLG4sZixvLGQpe3ZhciBpPWUucGFyc2VCYWNrZ3JvdW5kU2l6ZShuLGYuaW1hZ2UsbyksdD1lLnBhcnNlQmFja2dyb3VuZFBvc2l0aW9uKG4sZi5pbWFnZSxvLGkpLGw9ZS5wYXJzZUJhY2tncm91bmRSZXBlYXQobyk7c3dpdGNoKGwpe2Nhc2VcInJlcGVhdC14XCI6Y2FzZVwicmVwZWF0IG5vLXJlcGVhdFwiOnRoaXMuYmFja2dyb3VuZFJlcGVhdFNoYXBlKGYsdCxpLG4sbi5sZWZ0K2RbM10sbi50b3ArdC50b3ArZFswXSw5OTk5OSxpLmhlaWdodCxkKTticmVhaztjYXNlXCJyZXBlYXQteVwiOmNhc2VcIm5vLXJlcGVhdCByZXBlYXRcIjp0aGlzLmJhY2tncm91bmRSZXBlYXRTaGFwZShmLHQsaSxuLG4ubGVmdCt0LmxlZnQrZFszXSxuLnRvcCtkWzBdLGkud2lkdGgsOTk5OTksZCk7YnJlYWs7Y2FzZVwibm8tcmVwZWF0XCI6dGhpcy5iYWNrZ3JvdW5kUmVwZWF0U2hhcGUoZix0LGksbixuLmxlZnQrdC5sZWZ0K2RbM10sbi50b3ArdC50b3ArZFswXSxpLndpZHRoLGkuaGVpZ2h0LGQpO2JyZWFrO2RlZmF1bHQ6dGhpcy5yZW5kZXJCYWNrZ3JvdW5kUmVwZWF0KGYsdCxpLHt0b3A6bi50b3AsbGVmdDpuLmxlZnR9LGRbM10sZFswXSl9fSxuLmV4cG9ydHM9Zn0se1wiLi9sb2dcIjoxM31dLDIwOltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSxuKXtkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmNhbnZhcz10aGlzLm9wdGlvbnMuY2FudmFzfHx0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksdGhpcy5vcHRpb25zLmNhbnZhc3x8KHRoaXMuY2FudmFzLndpZHRoPWUsdGhpcy5jYW52YXMuaGVpZ2h0PW4pLHRoaXMuY3R4PXRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSx0aGlzLnRhaW50Q3R4PXRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0KFwiMmRcIiksdGhpcy5jdHgudGV4dEJhc2VsaW5lPVwiYm90dG9tXCIsdGhpcy52YXJpYWJsZXM9e30sdChcIkluaXRpYWxpemVkIENhbnZhc1JlbmRlcmVyIHdpdGggc2l6ZVwiLGUsXCJ4XCIsbil9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZS5sZW5ndGg+MH12YXIgZD1lKFwiLi4vcmVuZGVyZXJcIiksaT1lKFwiLi4vbGluZWFyZ3JhZGllbnRjb250YWluZXJcIiksdD1lKFwiLi4vbG9nXCIpO2YucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGYucHJvdG90eXBlLnNldEZpbGxTdHlsZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jdHguZmlsbFN0eWxlPVwib2JqZWN0XCI9PXR5cGVvZiBlJiZlLmlzQ29sb3I/ZS50b1N0cmluZygpOmUsdGhpcy5jdHh9LGYucHJvdG90eXBlLnJlY3RhbmdsZT1mdW5jdGlvbihlLG4sZixvLGQpe3RoaXMuc2V0RmlsbFN0eWxlKGQpLmZpbGxSZWN0KGUsbixmLG8pfSxmLnByb3RvdHlwZS5jaXJjbGU9ZnVuY3Rpb24oZSxuLGYsbyl7dGhpcy5zZXRGaWxsU3R5bGUobyksdGhpcy5jdHguYmVnaW5QYXRoKCksdGhpcy5jdHguYXJjKGUrZi8yLG4rZi8yLGYvMiwwLDIqTWF0aC5QSSwhMCksdGhpcy5jdHguY2xvc2VQYXRoKCksdGhpcy5jdHguZmlsbCgpfSxmLnByb3RvdHlwZS5jaXJjbGVTdHJva2U9ZnVuY3Rpb24oZSxuLGYsbyxkLGkpe3RoaXMuY2lyY2xlKGUsbixmLG8pLHRoaXMuY3R4LnN0cm9rZVN0eWxlPWkudG9TdHJpbmcoKSx0aGlzLmN0eC5zdHJva2UoKX0sZi5wcm90b3R5cGUuZHJhd1NoYXBlPWZ1bmN0aW9uKGUsbil7dGhpcy5zaGFwZShlKSx0aGlzLnNldEZpbGxTdHlsZShuKS5maWxsKCl9LGYucHJvdG90eXBlLnRhaW50cz1mdW5jdGlvbihlKXtpZihudWxsPT09ZS50YWludGVkKXt0aGlzLnRhaW50Q3R4LmRyYXdJbWFnZShlLmltYWdlLDAsMCk7dHJ5e3RoaXMudGFpbnRDdHguZ2V0SW1hZ2VEYXRhKDAsMCwxLDEpLGUudGFpbnRlZD0hMX1jYXRjaChuKXt0aGlzLnRhaW50Q3R4PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikuZ2V0Q29udGV4dChcIjJkXCIpLGUudGFpbnRlZD0hMH19cmV0dXJuIGUudGFpbnRlZH0sZi5wcm90b3R5cGUuZHJhd0ltYWdlPWZ1bmN0aW9uKGUsbixmLG8sZCxpLHQsbCxzKXsoIXRoaXMudGFpbnRzKGUpfHx0aGlzLm9wdGlvbnMuYWxsb3dUYWludCkmJnRoaXMuY3R4LmRyYXdJbWFnZShlLmltYWdlLG4sZixvLGQsaSx0LGwscyl9LGYucHJvdG90eXBlLmNsaXA9ZnVuY3Rpb24oZSxuLGYpe3RoaXMuY3R4LnNhdmUoKSxlLmZpbHRlcihvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RoaXMuc2hhcGUoZSkuY2xpcCgpfSx0aGlzKSxuLmNhbGwoZiksdGhpcy5jdHgucmVzdG9yZSgpfSxmLnByb3RvdHlwZS5zaGFwZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jdHguYmVnaW5QYXRoKCksZS5mb3JFYWNoKGZ1bmN0aW9uKGUsbil7XCJyZWN0XCI9PT1lWzBdP3RoaXMuY3R4LnJlY3QuYXBwbHkodGhpcy5jdHgsZS5zbGljZSgxKSk6dGhpcy5jdHhbMD09PW4/XCJtb3ZlVG9cIjplWzBdK1wiVG9cIl0uYXBwbHkodGhpcy5jdHgsZS5zbGljZSgxKSl9LHRoaXMpLHRoaXMuY3R4LmNsb3NlUGF0aCgpLHRoaXMuY3R4fSxmLnByb3RvdHlwZS5mb250PWZ1bmN0aW9uKGUsbixmLG8sZCxpKXt0aGlzLnNldEZpbGxTdHlsZShlKS5mb250PVtuLGYsbyxkLGldLmpvaW4oXCIgXCIpLnNwbGl0KFwiLFwiKVswXX0sZi5wcm90b3R5cGUuZm9udFNoYWRvdz1mdW5jdGlvbihlLG4sZixvKXt0aGlzLnNldFZhcmlhYmxlKFwic2hhZG93Q29sb3JcIixlLnRvU3RyaW5nKCkpLnNldFZhcmlhYmxlKFwic2hhZG93T2Zmc2V0WVwiLG4pLnNldFZhcmlhYmxlKFwic2hhZG93T2Zmc2V0WFwiLGYpLnNldFZhcmlhYmxlKFwic2hhZG93Qmx1clwiLG8pfSxmLnByb3RvdHlwZS5jbGVhclNoYWRvdz1mdW5jdGlvbigpe3RoaXMuc2V0VmFyaWFibGUoXCJzaGFkb3dDb2xvclwiLFwicmdiYSgwLDAsMCwwKVwiKX0sZi5wcm90b3R5cGUuc2V0T3BhY2l0eT1mdW5jdGlvbihlKXt0aGlzLmN0eC5nbG9iYWxBbHBoYT1lfSxmLnByb3RvdHlwZS5zZXRUcmFuc2Zvcm09ZnVuY3Rpb24oZSl7dGhpcy5jdHgudHJhbnNsYXRlKGUub3JpZ2luWzBdLGUub3JpZ2luWzFdKSx0aGlzLmN0eC50cmFuc2Zvcm0uYXBwbHkodGhpcy5jdHgsZS5tYXRyaXgpLHRoaXMuY3R4LnRyYW5zbGF0ZSgtZS5vcmlnaW5bMF0sLWUub3JpZ2luWzFdKX0sZi5wcm90b3R5cGUuc2V0VmFyaWFibGU9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdGhpcy52YXJpYWJsZXNbZV0hPT1uJiYodGhpcy52YXJpYWJsZXNbZV09dGhpcy5jdHhbZV09biksdGhpc30sZi5wcm90b3R5cGUudGV4dD1mdW5jdGlvbihlLG4sZil7dGhpcy5jdHguZmlsbFRleHQoZSxuLGYpfSxmLnByb3RvdHlwZS5iYWNrZ3JvdW5kUmVwZWF0U2hhcGU9ZnVuY3Rpb24oZSxuLGYsbyxkLGksdCxsLHMpe3ZhciB1PVtbXCJsaW5lXCIsTWF0aC5yb3VuZChkKSxNYXRoLnJvdW5kKGkpXSxbXCJsaW5lXCIsTWF0aC5yb3VuZChkK3QpLE1hdGgucm91bmQoaSldLFtcImxpbmVcIixNYXRoLnJvdW5kKGQrdCksTWF0aC5yb3VuZChsK2kpXSxbXCJsaW5lXCIsTWF0aC5yb3VuZChkKSxNYXRoLnJvdW5kKGwraSldXTt0aGlzLmNsaXAoW3VdLGZ1bmN0aW9uKCl7dGhpcy5yZW5kZXJCYWNrZ3JvdW5kUmVwZWF0KGUsbixmLG8sc1szXSxzWzBdKX0sdGhpcyl9LGYucHJvdG90eXBlLnJlbmRlckJhY2tncm91bmRSZXBlYXQ9ZnVuY3Rpb24oZSxuLGYsbyxkLGkpe3ZhciB0PU1hdGgucm91bmQoby5sZWZ0K24ubGVmdCtkKSxsPU1hdGgucm91bmQoby50b3Arbi50b3AraSk7dGhpcy5zZXRGaWxsU3R5bGUodGhpcy5jdHguY3JlYXRlUGF0dGVybih0aGlzLnJlc2l6ZUltYWdlKGUsZiksXCJyZXBlYXRcIikpLHRoaXMuY3R4LnRyYW5zbGF0ZSh0LGwpLHRoaXMuY3R4LmZpbGwoKSx0aGlzLmN0eC50cmFuc2xhdGUoLXQsLWwpfSxmLnByb3RvdHlwZS5yZW5kZXJCYWNrZ3JvdW5kR3JhZGllbnQ9ZnVuY3Rpb24oZSxuKXtpZihlIGluc3RhbmNlb2YgaSl7dmFyIGY9dGhpcy5jdHguY3JlYXRlTGluZWFyR3JhZGllbnQobi5sZWZ0K24ud2lkdGgqZS54MCxuLnRvcCtuLmhlaWdodCplLnkwLG4ubGVmdCtuLndpZHRoKmUueDEsbi50b3Arbi5oZWlnaHQqZS55MSk7ZS5jb2xvclN0b3BzLmZvckVhY2goZnVuY3Rpb24oZSl7Zi5hZGRDb2xvclN0b3AoZS5zdG9wLGUuY29sb3IudG9TdHJpbmcoKSl9KSx0aGlzLnJlY3RhbmdsZShuLmxlZnQsbi50b3Asbi53aWR0aCxuLmhlaWdodCxmKX19LGYucHJvdG90eXBlLnJlc2l6ZUltYWdlPWZ1bmN0aW9uKGUsbil7dmFyIGY9ZS5pbWFnZTtpZihmLndpZHRoPT09bi53aWR0aCYmZi5oZWlnaHQ9PT1uLmhlaWdodClyZXR1cm4gZjt2YXIgbyxkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7cmV0dXJuIGQud2lkdGg9bi53aWR0aCxkLmhlaWdodD1uLmhlaWdodCxvPWQuZ2V0Q29udGV4dChcIjJkXCIpLG8uZHJhd0ltYWdlKGYsMCwwLGYud2lkdGgsZi5oZWlnaHQsMCwwLG4ud2lkdGgsbi5oZWlnaHQpLGR9LG4uZXhwb3J0cz1mfSx7XCIuLi9saW5lYXJncmFkaWVudGNvbnRhaW5lclwiOjEyLFwiLi4vbG9nXCI6MTMsXCIuLi9yZW5kZXJlclwiOjE5fV0sMjE6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gZihlLG4sZixkKXtvLmNhbGwodGhpcyxmLGQpLHRoaXMub3duU3RhY2tpbmc9ZSx0aGlzLmNvbnRleHRzPVtdLHRoaXMuY2hpbGRyZW49W10sdGhpcy5vcGFjaXR5PSh0aGlzLnBhcmVudD90aGlzLnBhcmVudC5zdGFjay5vcGFjaXR5OjEpKm59dmFyIG89ZShcIi4vbm9kZWNvbnRhaW5lclwiKTtmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxmLnByb3RvdHlwZS5nZXRQYXJlbnRTdGFjaz1mdW5jdGlvbihlKXt2YXIgbj10aGlzLnBhcmVudD90aGlzLnBhcmVudC5zdGFjazpudWxsO3JldHVybiBuP24ub3duU3RhY2tpbmc/bjpuLmdldFBhcmVudFN0YWNrKGUpOmUuc3RhY2t9LG4uZXhwb3J0cz1mfSx7XCIuL25vZGVjb250YWluZXJcIjoxNH1dLDIyOltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSl7dGhpcy5yYW5nZUJvdW5kcz10aGlzLnRlc3RSYW5nZUJvdW5kcyhlKSx0aGlzLmNvcnM9dGhpcy50ZXN0Q09SUygpLHRoaXMuc3ZnPXRoaXMudGVzdFNWRygpfWYucHJvdG90eXBlLnRlc3RSYW5nZUJvdW5kcz1mdW5jdGlvbihlKXt2YXIgbixmLG8sZCxpPSExO3JldHVybiBlLmNyZWF0ZVJhbmdlJiYobj1lLmNyZWF0ZVJhbmdlKCksbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QmJihmPWUuY3JlYXRlRWxlbWVudChcImJvdW5kdGVzdFwiKSxmLnN0eWxlLmhlaWdodD1cIjEyM3B4XCIsZi5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIixlLmJvZHkuYXBwZW5kQ2hpbGQoZiksbi5zZWxlY3ROb2RlKGYpLG89bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxkPW8uaGVpZ2h0LDEyMz09PWQmJihpPSEwKSxlLmJvZHkucmVtb3ZlQ2hpbGQoZikpKSxpfSxmLnByb3RvdHlwZS50ZXN0Q09SUz1mdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZihuZXcgSW1hZ2UpLmNyb3NzT3JpZ2lufSxmLnByb3RvdHlwZS50ZXN0U1ZHPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IEltYWdlLG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxmPW4uZ2V0Q29udGV4dChcIjJkXCIpO2Uuc3JjPVwiZGF0YTppbWFnZS9zdmcreG1sLDxzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48L3N2Zz5cIjt0cnl7Zi5kcmF3SW1hZ2UoZSwwLDApLG4udG9EYXRhVVJMKCl9Y2F0Y2gobyl7cmV0dXJuITF9cmV0dXJuITB9LG4uZXhwb3J0cz1mfSx7fV0sMjM6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gZihlKXt0aGlzLnNyYz1lLHRoaXMuaW1hZ2U9bnVsbDt2YXIgbj10aGlzO3RoaXMucHJvbWlzZT10aGlzLmhhc0ZhYnJpYygpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbi5pc0lubGluZShlKT9Qcm9taXNlLnJlc29sdmUobi5pbmxpbmVGb3JtYXR0aW5nKGUpKTpvKGUpfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZil7d2luZG93Lmh0bWwyY2FudmFzLnN2Zy5mYWJyaWMubG9hZFNWR0Zyb21TdHJpbmcoZSxuLmNyZWF0ZUNhbnZhcy5jYWxsKG4sZikpfSl9KX12YXIgbz1lKFwiLi94aHJcIiksZD1lKFwiLi91dGlsc1wiKS5kZWNvZGU2NDtmLnByb3RvdHlwZS5oYXNGYWJyaWM9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93Lmh0bWwyY2FudmFzLnN2ZyYmd2luZG93Lmh0bWwyY2FudmFzLnN2Zy5mYWJyaWM/UHJvbWlzZS5yZXNvbHZlKCk6UHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiaHRtbDJjYW52YXMuc3ZnLmpzIGlzIG5vdCBsb2FkZWQsIGNhbm5vdCByZW5kZXIgc3ZnXCIpKX0sZi5wcm90b3R5cGUuaW5saW5lRm9ybWF0dGluZz1mdW5jdGlvbihlKXtyZXR1cm4vXmRhdGE6aW1hZ2VcXC9zdmdcXCt4bWw7YmFzZTY0LC8udGVzdChlKT90aGlzLmRlY29kZTY0KHRoaXMucmVtb3ZlQ29udGVudFR5cGUoZSkpOnRoaXMucmVtb3ZlQ29udGVudFR5cGUoZSl9LGYucHJvdG90eXBlLnJlbW92ZUNvbnRlbnRUeXBlPWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL15kYXRhOmltYWdlXFwvc3ZnXFwreG1sKDtiYXNlNjQpPywvLFwiXCIpfSxmLnByb3RvdHlwZS5pc0lubGluZT1mdW5jdGlvbihlKXtyZXR1cm4vXmRhdGE6aW1hZ2VcXC9zdmdcXCt4bWwvaS50ZXN0KGUpfSxmLnByb3RvdHlwZS5jcmVhdGVDYW52YXM9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gZnVuY3Rpb24oZixvKXt2YXIgZD1uZXcgd2luZG93Lmh0bWwyY2FudmFzLnN2Zy5mYWJyaWMuU3RhdGljQ2FudmFzKFwiY1wiKTtuLmltYWdlPWQubG93ZXJDYW52YXNFbCxkLnNldFdpZHRoKG8ud2lkdGgpLnNldEhlaWdodChvLmhlaWdodCkuYWRkKHdpbmRvdy5odG1sMmNhbnZhcy5zdmcuZmFicmljLnV0aWwuZ3JvdXBTVkdFbGVtZW50cyhmLG8pKS5yZW5kZXJBbGwoKSxlKGQubG93ZXJDYW52YXNFbCl9fSxmLnByb3RvdHlwZS5kZWNvZGU2ND1mdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB3aW5kb3cuYXRvYj93aW5kb3cuYXRvYihlKTpkKGUpfSxuLmV4cG9ydHM9Zn0se1wiLi91dGlsc1wiOjI2LFwiLi94aHJcIjoyOH1dLDI0OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSxuKXt0aGlzLnNyYz1lLHRoaXMuaW1hZ2U9bnVsbDt2YXIgZj10aGlzO3RoaXMucHJvbWlzZT1uP25ldyBQcm9taXNlKGZ1bmN0aW9uKG4sbyl7Zi5pbWFnZT1uZXcgSW1hZ2UsZi5pbWFnZS5vbmxvYWQ9bixmLmltYWdlLm9uZXJyb3I9byxmLmltYWdlLnNyYz1cImRhdGE6aW1hZ2Uvc3ZnK3htbCxcIisobmV3IFhNTFNlcmlhbGl6ZXIpLnNlcmlhbGl6ZVRvU3RyaW5nKGUpLGYuaW1hZ2UuY29tcGxldGU9PT0hMCYmbihmLmltYWdlKX0pOnRoaXMuaGFzRmFicmljKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuKXt3aW5kb3cuaHRtbDJjYW52YXMuc3ZnLmZhYnJpYy5wYXJzZVNWR0RvY3VtZW50KGUsZi5jcmVhdGVDYW52YXMuY2FsbChmLG4pKX0pfSl9dmFyIG89ZShcIi4vc3ZnY29udGFpbmVyXCIpO2YucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpLG4uZXhwb3J0cz1mfSx7XCIuL3N2Z2NvbnRhaW5lclwiOjIzfV0sMjU6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gZihlLG4pe2QuY2FsbCh0aGlzLGUsbil9ZnVuY3Rpb24gbyhlLG4sZil7cmV0dXJuIGUubGVuZ3RoPjA/bitmLnRvVXBwZXJDYXNlKCk6dm9pZCAwfXZhciBkPWUoXCIuL25vZGVjb250YWluZXJcIik7Zi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZi5wcm90b3R5cGUuYXBwbHlUZXh0VHJhbnNmb3JtPWZ1bmN0aW9uKCl7dGhpcy5ub2RlLmRhdGE9dGhpcy50cmFuc2Zvcm0odGhpcy5wYXJlbnQuY3NzKFwidGV4dFRyYW5zZm9ybVwiKSl9LGYucHJvdG90eXBlLnRyYW5zZm9ybT1mdW5jdGlvbihlKXt2YXIgbj10aGlzLm5vZGUuZGF0YTtzd2l0Y2goZSl7Y2FzZVwibG93ZXJjYXNlXCI6cmV0dXJuIG4udG9Mb3dlckNhc2UoKTtjYXNlXCJjYXBpdGFsaXplXCI6cmV0dXJuIG4ucmVwbGFjZSgvKF58XFxzfDp8LXxcXCh8XFwpKShbYS16XSkvZyxvKTtjYXNlXCJ1cHBlcmNhc2VcIjpyZXR1cm4gbi50b1VwcGVyQ2FzZSgpO2RlZmF1bHQ6cmV0dXJuIG59fSxuLmV4cG9ydHM9Zn0se1wiLi9ub2RlY29udGFpbmVyXCI6MTR9XSwyNjpbZnVuY3Rpb24oZSxuLGYpe2Yuc21hbGxJbWFnZT1mdW5jdGlvbigpe3JldHVyblwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUE3XCJ9LGYuYmluZD1mdW5jdGlvbihlLG4pe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KG4sYXJndW1lbnRzKX19LGYuZGVjb2RlNjQ9ZnVuY3Rpb24oZSl7dmFyIG4sZixvLGQsaSx0LGwscyx1PVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiLGE9ZS5sZW5ndGgscD1cIlwiO2ZvcihuPTA7YT5uO24rPTQpZj11LmluZGV4T2YoZVtuXSksbz11LmluZGV4T2YoZVtuKzFdKSxkPXUuaW5kZXhPZihlW24rMl0pLGk9dS5pbmRleE9mKGVbbiszXSksdD1mPDwyfG8+PjQsbD0oMTUmbyk8PDR8ZD4+MixzPSgzJmQpPDw2fGkscCs9NjQ9PT1kP1N0cmluZy5mcm9tQ2hhckNvZGUodCk6NjQ9PT1pfHwtMT09PWk/U3RyaW5nLmZyb21DaGFyQ29kZSh0LGwpOlN0cmluZy5mcm9tQ2hhckNvZGUodCxsLHMpO3JldHVybiBwfSxmLmdldEJvdW5kcz1mdW5jdGlvbihlKXtpZihlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCl7dmFyIG49ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxmPW51bGw9PWUub2Zmc2V0V2lkdGg/bi53aWR0aDplLm9mZnNldFdpZHRoO3JldHVybnt0b3A6bi50b3AsYm90dG9tOm4uYm90dG9tfHxuLnRvcCtuLmhlaWdodCxyaWdodDpuLmxlZnQrZixsZWZ0Om4ubGVmdCx3aWR0aDpmLGhlaWdodDpudWxsPT1lLm9mZnNldEhlaWdodD9uLmhlaWdodDplLm9mZnNldEhlaWdodH19cmV0dXJue319LGYub2Zmc2V0Qm91bmRzPWZ1bmN0aW9uKGUpe3ZhciBuPWUub2Zmc2V0UGFyZW50P2Yub2Zmc2V0Qm91bmRzKGUub2Zmc2V0UGFyZW50KTp7dG9wOjAsbGVmdDowfTtyZXR1cm57dG9wOmUub2Zmc2V0VG9wK24udG9wLGJvdHRvbTplLm9mZnNldFRvcCtlLm9mZnNldEhlaWdodCtuLnRvcCxyaWdodDplLm9mZnNldExlZnQrbi5sZWZ0K2Uub2Zmc2V0V2lkdGgsbGVmdDplLm9mZnNldExlZnQrbi5sZWZ0LHdpZHRoOmUub2Zmc2V0V2lkdGgsaGVpZ2h0OmUub2Zmc2V0SGVpZ2h0fX0sZi5wYXJzZUJhY2tncm91bmRzPWZ1bmN0aW9uKGUpe3ZhciBuLGYsbyxkLGksdCxsLHM9XCIgXFxyXFxuXHRcIix1PVtdLGE9MCxwPTAsYz1mdW5jdGlvbigpe24mJignXCInPT09Zi5zdWJzdHIoMCwxKSYmKGY9Zi5zdWJzdHIoMSxmLmxlbmd0aC0yKSksZiYmbC5wdXNoKGYpLFwiLVwiPT09bi5zdWJzdHIoMCwxKSYmKGQ9bi5pbmRleE9mKFwiLVwiLDEpKzEpPjAmJihvPW4uc3Vic3RyKDAsZCksbj1uLnN1YnN0cihkKSksdS5wdXNoKHtwcmVmaXg6byxtZXRob2Q6bi50b0xvd2VyQ2FzZSgpLHZhbHVlOmksYXJnczpsLGltYWdlOm51bGx9KSksbD1bXSxuPW89Zj1pPVwiXCJ9O3JldHVybiBsPVtdLG49bz1mPWk9XCJcIixlLnNwbGl0KFwiXCIpLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoISgwPT09YSYmcy5pbmRleE9mKGUpPi0xKSl7c3dpdGNoKGUpe2Nhc2UnXCInOnQ/dD09PWUmJih0PW51bGwpOnQ9ZTticmVhaztjYXNlXCIoXCI6aWYodClicmVhaztpZigwPT09YSlyZXR1cm4gYT0xLHZvaWQoaSs9ZSk7cCsrO2JyZWFrO2Nhc2VcIilcIjppZih0KWJyZWFrO2lmKDE9PT1hKXtpZigwPT09cClyZXR1cm4gYT0wLGkrPWUsdm9pZCBjKCk7cC0tfWJyZWFrO2Nhc2VcIixcIjppZih0KWJyZWFrO2lmKDA9PT1hKXJldHVybiB2b2lkIGMoKTtpZigxPT09YSYmMD09PXAmJiFuLm1hdGNoKC9edXJsJC9pKSlyZXR1cm4gbC5wdXNoKGYpLGY9XCJcIix2b2lkKGkrPWUpfWkrPWUsMD09PWE/bis9ZTpmKz1lfX0pLGMoKSx1fX0se31dLDI3OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSl7by5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy50eXBlPVwibGluZWFyXCI9PT1lLmFyZ3NbMF0/by5UWVBFUy5MSU5FQVI6by5UWVBFUy5SQURJQUx9dmFyIG89ZShcIi4vZ3JhZGllbnRjb250YWluZXJcIik7Zi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSksbi5leHBvcnRzPWZ9LHtcIi4vZ3JhZGllbnRjb250YWluZXJcIjo5fV0sMjg6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gZihlKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obixmKXt2YXIgbz1uZXcgWE1MSHR0cFJlcXVlc3Q7by5vcGVuKFwiR0VUXCIsZSksby5vbmxvYWQ9ZnVuY3Rpb24oKXsyMDA9PT1vLnN0YXR1cz9uKG8ucmVzcG9uc2VUZXh0KTpmKG5ldyBFcnJvcihvLnN0YXR1c1RleHQpKX0sby5vbmVycm9yPWZ1bmN0aW9uKCl7ZihuZXcgRXJyb3IoXCJOZXR3b3JrIEVycm9yXCIpKX0sby5zZW5kKCl9KX1uLmV4cG9ydHM9Zn0se31dfSx7fSxbNF0pKDQpfSk7Il19
